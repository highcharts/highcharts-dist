/**
 * Highcharts JS v12.5.0-modified (2026-02-21)
 * @module highcharts/modules/series-on-point
 * @requires highcharts
 *
 * Series on point module
 *
 * (c) 2010-2026 Highsoft AS
 * Author: Rafal Sebestjanski and Piotr Madej
 *
 * A commercial license may be required depending on use.
 * See www.highcharts.com/license
 */import*as t from"../highcharts.js";var e,s={};s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);let o=t.default;var i=s.n(o);let{setLength:r,splice:n}={convertToNumber:function(t,e){switch(typeof t){case"boolean":return+!!t;case"number":return isNaN(t)&&!e?null:t;default:return isNaN(t=parseFloat(`${t??""}`))&&!e?null:t}},setLength:function(t,e,s){return Array.isArray(t)?(t.length=e,t):t[s?"subarray":"slice"](0,e)},splice:function(t,e,s,o,i=[]){if(Array.isArray(t))return Array.isArray(i)||(i=Array.from(i)),{removed:t.splice(e,s,...i),array:t};let r=Object.getPrototypeOf(t).constructor,n=t[o?"subarray":"slice"](e,e+s),a=new r(t.length-s+i.length);return a.set(t.subarray(0,e),0),a.set(i,e),a.set(t.subarray(e+s),e+i.length),{removed:n,array:a}}},{fireEvent:a,objectEach:l,uniqueKey:h}=i(),u=class{constructor(t={}){this.autoId=!t.id,this.columns={},this.id=t.id||h(),this.rowCount=0,this.versionTag=h();let e=0;l(t.columns||{},(t,s)=>{this.columns[s]=t.slice(),e=Math.max(e,t.length)}),this.applyRowCount(e)}applyRowCount(t){this.rowCount=t,l(this.columns,(e,s)=>{e.length!==t&&(this.columns[s]=r(e,t))})}deleteRows(t,e=1){if(e>0&&t<this.rowCount){let s=0;l(this.columns,(o,i)=>{this.columns[i]=n(o,t,e).array,s=o.length}),this.rowCount=s}a(this,"afterDeleteRows",{rowIndex:t,rowCount:e}),this.versionTag=h()}getColumn(t,e){return this.columns[t]}getColumns(t,e){return(t||Object.keys(this.columns)).reduce((t,e)=>(t[e]=this.columns[e],t),{})}getRow(t,e){return(e||Object.keys(this.columns)).map(e=>this.columns[e]?.[t])}setColumn(t,e=[],s=0,o){this.setColumns({[t]:e},s,o)}setColumns(t,e,s){let o=this.rowCount;l(t,(t,e)=>{this.columns[e]=t.slice(),o=t.length}),this.applyRowCount(o),s?.silent||(a(this,"afterSetColumns"),this.versionTag=h())}setRow(t,e=this.rowCount,s,o){let{columns:i}=this,r=s?this.rowCount+1:e+1,u=Object.keys(t);if(o?.addColumns!==!1)for(let t=0,e=u.length;t<e;t++){let e=u[t];i[e]||(i[e]=[])}l(i,(a,l)=>{a||o?.addColumns===!1||(a=Array(r)),a&&(s?a=n(a,e,0,!0,[t[l]??null]).array:a[e]=t[l]??null,i[l]=a)}),r>this.rowCount&&this.applyRowCount(r),o?.silent||(a(this,"afterSetRows"),this.versionTag=h())}getModified(){return this.modified||this}},c=t.default.Point;var p=s.n(c);let d=t.default.SeriesRegistry;var f=s.n(d);let y=t.default.SVGRenderer;var m=s.n(y);let{composed:g}=i(),{bubble:C}=f().seriesTypes,{addEvent:w,defined:b,find:P,isNumber:R,pushUnique:v}=i();var x=e||(e={});x.compose=function(t,e){if(v(g,"SeriesOnPoint")){let{chartGetZData:s,seriesAfterInit:o,seriesAfterRender:i,seriesGetCenter:r,seriesShowOrHide:n,seriesTranslate:a}=A.prototype;t.types.pie.prototype.onPointSupported=!0,w(t,"afterInit",o),w(t,"afterRender",i),w(t,"afterGetCenter",r),w(t,"hide",n),w(t,"show",n),w(t,"translate",a),w(e,"beforeRender",s),w(e,"beforeRedraw",s)}return t};class A{constructor(t){this.getColumn=C.prototype.getColumn,this.getRadii=C.prototype.getRadii,this.getRadius=C.prototype.getRadius,this.getPxExtremes=C.prototype.getPxExtremes,this.getZExtremes=C.prototype.getZExtremes,this.chart=t.chart,this.series=t,this.options=t.options.onPoint}drawConnector(){this.connector||(this.connector=this.series.chart.renderer.path().addClass("highcharts-connector-seriesonpoint").attr({zIndex:-1}).add(this.series.markerGroup));let t=this.getConnectorAttributes();t&&this.connector.animate(t)}getConnectorAttributes(){let t=this.series.chart,e=this.options;if(!e)return;let s=e.connectorOptions||{},o=e.position,i=t.get(e.id);if(!(i instanceof p())||!o||!b(i.plotX)||!b(i.plotY))return;let r=b(o.x)?o.x:i.plotX,n=b(o.y)?o.y:i.plotY,a=r+(o.offsetX||0),l=n+(o.offsetY||0),h=s.width||1,u=s.stroke||this.series.color,c=s.dashstyle,d={d:m().prototype.crispLine([["M",r,n],["L",a,l]],h),"stroke-width":h};return t.styledMode||(d.stroke=u,d.dashstyle=c),d}seriesAfterInit(){this.onPointSupported&&this.options.onPoint&&(this.bubblePadding=!0,this.useMapGeometry=!0,this.onPoint=new A(this))}seriesAfterRender(){delete this.chart.bubbleZExtremes,this.onPoint&&this.onPoint.drawConnector()}seriesGetCenter(t){let e=this.options.onPoint,s=t.positions;if(e){let t=this.chart.get(e.id);t instanceof p()&&b(t.plotX)&&b(t.plotY)&&(s[0]=t.plotX,s[1]=t.plotY);let o=e.position;o&&(b(o.x)&&(s[0]=o.x),b(o.y)&&(s[1]=o.y),o.offsetX&&(s[0]+=o.offsetX),o.offsetY&&(s[1]+=o.offsetY))}let o=this.radii&&this.radii[this.index];R(o)&&(s[2]=2*o),t.positions=s}seriesShowOrHide(){let t=this.chart.series;this.points?.forEach(e=>{let s=P(t,t=>{let s=((t.onPoint||{}).options||{}).id;return!!s&&s===e.id});s&&s.setVisible(!s.visible,!1)})}seriesTranslate(){this.onPoint&&(this.onPoint.getRadii(),this.radii=this.onPoint.radii)}chartGetZData(){let t=[];this.series.forEach(e=>{let s=e.options.onPoint;t.push(s?.z??null)});let e=new u({columns:{z:t}});this.series.forEach(t=>{t.onPoint&&(t.onPoint.dataTable=t.dataTable=e)})}}x.Additions=A;let O=e,S=i();O.compose(S.Series,S.Chart);let T=i();export{T as default};