{"version":3,"sources":["<anon>"],"sourcesContent":["/**\n * @license Highcharts JS v11.2.0 (2023-10-30)\n *\n * Annotations module\n *\n * (c) 2009-2021 Torstein Honsi\n *\n * License: www.highcharts.com/license\n */\n(function (factory) {\n    if (typeof module === 'object' && module.exports) {\n        factory['default'] = factory;\n        module.exports = factory;\n    } else if (typeof define === 'function' && define.amd) {\n        define('highcharts/modules/annotations', ['highcharts'], function (Highcharts) {\n            factory(Highcharts);\n            factory.Highcharts = Highcharts;\n            return factory;\n        });\n    } else {\n        factory(typeof Highcharts !== 'undefined' ? Highcharts : undefined);\n    }\n}(function (Highcharts) {\n    'use strict';\n    var _modules = Highcharts ? Highcharts._modules : {};\n    function _registerModule(obj, path, args, fn) {\n        if (!obj.hasOwnProperty(path)) {\n            obj[path] = fn.apply(null, args);\n\n            if (typeof CustomEvent === 'function') {\n                window.dispatchEvent(new CustomEvent(\n                    'HighchartsModuleLoaded',\n                    { detail: { path: path, module: obj[path] } }\n                ));\n            }\n        }\n    }\n    _registerModule(_modules, 'Extensions/Annotations/AnnotationChart.js', [_modules['Core/Utilities.js']], function (U) {\n        /* *\n         *\n         *  (c) 2009-2021 Highsoft, Black Label\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { addEvent, erase, find, fireEvent, pick, wrap } = U;\n        /* *\n         *\n         *  Constants\n         *\n         * */\n        const composedMembers = [];\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * Add an annotation to the chart after render time.\n         *\n         * @sample highcharts/annotations/add-annotation/\n         *         Add annotation\n         *\n         * @function Highcharts.Chart#addAnnotation\n         *\n         * @param  {Highcharts.AnnotationsOptions} options\n         *         The annotation options for the new, detailed annotation.\n         *\n         * @param {boolean} [redraw]\n         *\n         * @return {Highcharts.Annotation}\n         *         The newly generated annotation.\n         */\n        function chartAddAnnotation(userOptions, redraw) {\n            const annotation = this.initAnnotation(userOptions);\n            this.options.annotations.push(annotation.options);\n            if (pick(redraw, true)) {\n                annotation.redraw();\n                annotation.graphic.attr({\n                    opacity: 1\n                });\n            }\n            return annotation;\n        }\n        /**\n         * @private\n         */\n        function chartCallback() {\n            const chart = this;\n            chart.plotBoxClip = this.renderer.clipRect(this.plotBox);\n            chart.controlPointsGroup = chart.renderer\n                .g('control-points')\n                .attr({ zIndex: 99 })\n                .clip(chart.plotBoxClip)\n                .add();\n            chart.options.annotations.forEach((annotationOptions, i) => {\n                if (\n                // Verify that it has not been previously added in a responsive rule\n                !chart.annotations.some((annotation) => annotation.options === annotationOptions)) {\n                    const annotation = chart.initAnnotation(annotationOptions);\n                    chart.options.annotations[i] = annotation.options;\n                }\n            });\n            chart.drawAnnotations();\n            addEvent(chart, 'redraw', chart.drawAnnotations);\n            addEvent(chart, 'destroy', function () {\n                chart.plotBoxClip.destroy();\n                chart.controlPointsGroup.destroy();\n            });\n            addEvent(chart, 'exportData', function (event) {\n                const annotations = chart.annotations, csvColumnHeaderFormatter = ((this.options.exporting &&\n                    this.options.exporting.csv) ||\n                    {}).columnHeaderFormatter, \n                // If second row doesn't have xValues\n                // then it is a title row thus multiple level header is in use.\n                multiLevelHeaders = !event.dataRows[1].xValues, annotationHeader = (chart.options.lang &&\n                    chart.options.lang.exportData &&\n                    chart.options.lang.exportData.annotationHeader), columnHeaderFormatter = function (index) {\n                    let s;\n                    if (csvColumnHeaderFormatter) {\n                        s = csvColumnHeaderFormatter(index);\n                        if (s !== false) {\n                            return s;\n                        }\n                    }\n                    s = annotationHeader + ' ' + index;\n                    if (multiLevelHeaders) {\n                        return {\n                            columnTitle: s,\n                            topLevelColumnTitle: s\n                        };\n                    }\n                    return s;\n                }, startRowLength = event.dataRows[0].length, annotationSeparator = (chart.options.exporting &&\n                    chart.options.exporting.csv &&\n                    chart.options.exporting.csv.annotations &&\n                    chart.options.exporting.csv.annotations.itemDelimiter), joinAnnotations = (chart.options.exporting &&\n                    chart.options.exporting.csv &&\n                    chart.options.exporting.csv.annotations &&\n                    chart.options.exporting.csv.annotations.join);\n                annotations.forEach((annotation) => {\n                    if (annotation.options.labelOptions &&\n                        annotation.options.labelOptions.includeInDataExport) {\n                        annotation.labels.forEach((label) => {\n                            if (label.options.text) {\n                                const annotationText = label.options.text;\n                                label.points.forEach((points) => {\n                                    const annotationX = points.x, xAxisIndex = points.series.xAxis ?\n                                        points.series.xAxis.index :\n                                        -1;\n                                    let wasAdded = false;\n                                    // Annotation not connected to any xAxis -\n                                    // add new row.\n                                    if (xAxisIndex === -1) {\n                                        const n = event.dataRows[0].length, newRow = new Array(n);\n                                        for (let i = 0; i < n; ++i) {\n                                            newRow[i] = '';\n                                        }\n                                        newRow.push(annotationText);\n                                        newRow.xValues = [];\n                                        newRow.xValues[xAxisIndex] = annotationX;\n                                        event.dataRows.push(newRow);\n                                        wasAdded = true;\n                                    }\n                                    // Annotation placed on a exported data point\n                                    // - add new column\n                                    if (!wasAdded) {\n                                        event.dataRows.forEach((row) => {\n                                            if (!wasAdded &&\n                                                row.xValues &&\n                                                xAxisIndex !== void 0 &&\n                                                annotationX === row.xValues[xAxisIndex]) {\n                                                if (joinAnnotations &&\n                                                    row.length > startRowLength) {\n                                                    row[row.length - 1] += (annotationSeparator +\n                                                        annotationText);\n                                                }\n                                                else {\n                                                    row.push(annotationText);\n                                                }\n                                                wasAdded = true;\n                                            }\n                                        });\n                                    }\n                                    // Annotation not placed on any exported data point,\n                                    // but connected to the xAxis - add new row\n                                    if (!wasAdded) {\n                                        const n = event.dataRows[0].length, newRow = new Array(n);\n                                        for (let i = 0; i < n; ++i) {\n                                            newRow[i] = '';\n                                        }\n                                        newRow[0] = annotationX;\n                                        newRow.push(annotationText);\n                                        newRow.xValues = [];\n                                        if (xAxisIndex !== void 0) {\n                                            newRow.xValues[xAxisIndex] = annotationX;\n                                        }\n                                        event.dataRows.push(newRow);\n                                    }\n                                });\n                            }\n                        });\n                    }\n                });\n                let maxRowLen = 0;\n                event.dataRows.forEach((row) => {\n                    maxRowLen = Math.max(maxRowLen, row.length);\n                });\n                const newRows = maxRowLen - event.dataRows[0].length;\n                for (let i = 0; i < newRows; i++) {\n                    const header = columnHeaderFormatter(i + 1);\n                    if (multiLevelHeaders) {\n                        event.dataRows[0].push(header.topLevelColumnTitle);\n                        event.dataRows[1].push(header.columnTitle);\n                    }\n                    else {\n                        event.dataRows[0].push(header);\n                    }\n                }\n            });\n        }\n        /**\n         * @private\n         */\n        function chartDrawAnnotations() {\n            this.plotBoxClip.attr(this.plotBox);\n            this.annotations.forEach((annotation) => {\n                annotation.redraw();\n                annotation.graphic.animate({\n                    opacity: 1\n                }, annotation.animationConfig);\n            });\n        }\n        /**\n         * Remove an annotation from the chart.\n         *\n         * @function Highcharts.Chart#removeAnnotation\n         *\n         * @param {number|string|Highcharts.Annotation} idOrAnnotation\n         *        The annotation's id or direct annotation object.\n         */\n        function chartRemoveAnnotation(idOrAnnotation) {\n            const annotations = this.annotations, annotation = (idOrAnnotation.coll === 'annotations') ?\n                idOrAnnotation :\n                find(annotations, function (annotation) {\n                    return annotation.options.id === idOrAnnotation;\n                });\n            if (annotation) {\n                fireEvent(annotation, 'remove');\n                erase(this.options.annotations, annotation.options);\n                erase(annotations, annotation);\n                annotation.destroy();\n            }\n        }\n        /**\n         * Create lookups initially\n         * @private\n         */\n        function onChartAfterInit() {\n            const chart = this;\n            chart.annotations = [];\n            if (!this.options.annotations) {\n                this.options.annotations = [];\n            }\n        }\n        /**\n         * @private\n         */\n        function wrapPointerOnContainerMouseDown(proceed) {\n            if (!this.chart.hasDraggedAnnotation) {\n                proceed.apply(this, Array.prototype.slice.call(arguments, 1));\n            }\n        }\n        /* *\n         *\n         *  Composition\n         *\n         * */\n        /**\n         * @private\n         */\n        var AnnotationChart;\n        (function (AnnotationChart) {\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            function compose(AnnotationClass, ChartClass, PointerClass) {\n                if (U.pushUnique(composedMembers, ChartClass)) {\n                    addEvent(ChartClass, 'afterInit', onChartAfterInit);\n                    const chartProto = ChartClass.prototype;\n                    chartProto.addAnnotation = chartAddAnnotation;\n                    chartProto.callbacks.push(chartCallback);\n                    chartProto.collectionsWithInit.annotations = [chartAddAnnotation];\n                    chartProto.collectionsWithUpdate.push('annotations');\n                    chartProto.drawAnnotations = chartDrawAnnotations;\n                    chartProto.removeAnnotation = chartRemoveAnnotation;\n                    chartProto.initAnnotation = function chartInitAnnotation(userOptions) {\n                        const Constructor = (AnnotationClass.types[userOptions.type] ||\n                            AnnotationClass), annotation = new Constructor(this, userOptions);\n                        this.annotations.push(annotation);\n                        return annotation;\n                    };\n                }\n                if (U.pushUnique(composedMembers, PointerClass)) {\n                    const pointerProto = PointerClass.prototype;\n                    wrap(pointerProto, 'onContainerMouseDown', wrapPointerOnContainerMouseDown);\n                }\n            }\n            AnnotationChart.compose = compose;\n        })(AnnotationChart || (AnnotationChart = {}));\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return AnnotationChart;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/AnnotationDefaults.js', [_modules['Core/Utilities.js']], function (U) {\n        /* *\n         *\n         *  Imports\n         *\n         * */\n        const { defined } = U;\n        /* *\n         *\n         *  API Options\n         *\n         * */\n        /**\n         * A basic type of an annotation. It allows to add custom labels\n         * or shapes. The items  can be tied to points, axis coordinates\n         * or chart pixel coordinates.\n         *\n         * @sample highcharts/annotations/basic/\n         *         Basic annotations\n         * @sample highcharts/demo/annotations/\n         *         Advanced annotations\n         * @sample highcharts/css/annotations\n         *         Styled mode\n         * @sample highcharts/annotations-advanced/controllable\n         *         Controllable items\n         * @sample {highstock} stock/annotations/fibonacci-retracements\n         *         Custom annotation, Fibonacci retracement\n         *\n         * @type         {Array<*>}\n         * @since        6.0.0\n         * @requires     modules/annotations\n         * @optionparent annotations\n         */\n        const AnnotationDefaults = {\n            /**\n             * Sets an ID for an annotation. Can be user later when\n             * removing an annotation in [Chart#removeAnnotation(id)](\n             * /class-reference/Highcharts.Chart#removeAnnotation) method.\n             *\n             * @type      {number|string}\n             * @apioption annotations.id\n             */\n            /**\n             * Whether the annotation is visible.\n             *\n             * @sample highcharts/annotations/visible/\n             *         Set annotation visibility\n             */\n            visible: true,\n            /**\n             * Enable or disable the initial animation when a series is\n             * displayed for the `annotation`. The animation can also be set\n             * as a configuration object. Please note that this option only\n             * applies to the initial animation.\n             * For other animations, see [chart.animation](#chart.animation)\n             * and the animation parameter under the API methods.\n             * The following properties are supported:\n             *\n             * - `defer`: The animation delay time in milliseconds.\n             *\n             * @sample {highcharts} highcharts/annotations/defer/\n             *          Animation defer settings\n             * @type {boolean|Partial<Highcharts.AnimationOptionsObject>}\n             * @since 8.2.0\n             */\n            animation: {},\n            /**\n             * Whether to hide the part of the annotation\n             * that is outside the plot area.\n             *\n             * @sample highcharts/annotations/label-crop-overflow/\n             *         Crop line annotation\n             * @type  {boolean}\n             * @since 9.3.0\n             */\n            crop: true,\n            /**\n             * The animation delay time in milliseconds.\n             * Set to `0` renders annotation immediately.\n             * As `undefined` inherits defer time from the [series.animation.defer](#plotOptions.series.animation.defer).\n             *\n             * @type      {number}\n             * @since 8.2.0\n             * @apioption annotations.animation.defer\n             */\n            /**\n             * Allow an annotation to be draggable by a user. Possible\n             * values are `'x'`, `'xy'`, `'y'` and `''` (disabled).\n             *\n             * @sample highcharts/annotations/draggable/\n             *         Annotations draggable: 'xy'\n             *\n             * @type {Highcharts.AnnotationDraggableValue}\n             */\n            draggable: 'xy',\n            /**\n             * Options for annotation's labels. Each label inherits options\n             * from the labelOptions object. An option from the labelOptions\n             * can be overwritten by config for a specific label.\n             *\n             * @requires modules/annotations\n             */\n            labelOptions: {\n                /**\n                 * The alignment of the annotation's label. If right,\n                 * the right side of the label should be touching the point.\n                 *\n                 * @sample highcharts/annotations/label-position/\n                 *         Set labels position\n                 *\n                 * @type {Highcharts.AlignValue}\n                 */\n                align: 'center',\n                /**\n                 * Whether to allow the annotation's labels to overlap.\n                 * To make the labels less sensitive for overlapping,\n                 * the can be set to 0.\n                 *\n                 * @sample highcharts/annotations/tooltip-like/\n                 *         Hide overlapping labels\n                 */\n                allowOverlap: false,\n                /**\n                 * The background color or gradient for the annotation's\n                 * label.\n                 *\n                 * @sample highcharts/annotations/label-presentation/\n                 *         Set labels graphic options\n                 *\n                 * @type {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n                 */\n                backgroundColor: 'rgba(0, 0, 0, 0.75)',\n                /**\n                 * The border color for the annotation's label.\n                 *\n                 * @sample highcharts/annotations/label-presentation/\n                 *         Set labels graphic options\n                 *\n                 * @type {Highcharts.ColorString}\n                 */\n                borderColor: \"#000000\" /* Palette.neutralColor100 */,\n                /**\n                 * The border radius in pixels for the annotaiton's label.\n                 *\n                 * @sample highcharts/annotations/label-presentation/\n                 *         Set labels graphic options\n                 */\n                borderRadius: 3,\n                /**\n                 * The border width in pixels for the annotation's label\n                 *\n                 * @sample highcharts/annotations/label-presentation/\n                 *         Set labels graphic options\n                 */\n                borderWidth: 1,\n                /**\n                 * A class name for styling by CSS.\n                 *\n                 * @sample highcharts/css/annotations\n                 *         Styled mode annotations\n                 *\n                 * @since 6.0.5\n                 */\n                className: 'highcharts-no-tooltip',\n                /**\n                 * Whether to hide the annotation's label\n                 * that is outside the plot area.\n                 *\n                 * @sample highcharts/annotations/label-crop-overflow/\n                 *         Crop or justify labels\n                 */\n                crop: false,\n                /**\n                 * The label's pixel distance from the point.\n                 *\n                 * @sample highcharts/annotations/label-position/\n                 *         Set labels position\n                 *\n                 * @type      {number}\n                 * @apioption annotations.labelOptions.distance\n                 */\n                /**\n                 * A\n                 * [format](https://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting)\n                 * string for the data label.\n                 *\n                 * @see [plotOptions.series.dataLabels.format](plotOptions.series.dataLabels.format.html)\n                 *\n                 * @sample highcharts/annotations/label-text/\n                 *         Set labels text\n                 *\n                 * @type      {string}\n                 * @apioption annotations.labelOptions.format\n                 */\n                /**\n                 * Alias for the format option.\n                 *\n                 * @see [format](annotations.labelOptions.format.html)\n                 *\n                 * @sample highcharts/annotations/label-text/\n                 *         Set labels text\n                 *\n                 * @type      {string}\n                 * @apioption annotations.labelOptions.text\n                 */\n                /**\n                 * Callback JavaScript function to format the annotation's\n                 * label. Note that if a `format` or `text` are defined,\n                 * the format or text take precedence and the formatter is\n                 * ignored. `This` refers to a point object.\n                 *\n                 * @sample highcharts/annotations/label-text/\n                 *         Set labels text\n                 *\n                 * @type    {Highcharts.FormatterCallbackFunction<Highcharts.Point>}\n                 * @default function () { return defined(this.y) ? this.y : 'Annotation label'; }\n                 */\n                formatter: function () {\n                    return defined(this.y) ? '' + this.y : 'Annotation label';\n                },\n                /**\n                 * Whether the annotation is visible in the exported data\n                 * table.\n                 *\n                 * @sample highcharts/annotations/include-in-data-export/\n                 *         Do not include in the data export\n                 *\n                 * @since 8.2.0\n                 * @requires modules/export-data\n                 */\n                includeInDataExport: true,\n                /**\n                 * How to handle the annotation's label that flow outside\n                 * the plot area. The justify option aligns the label inside\n                 * the plot area.\n                 *\n                 * @sample highcharts/annotations/label-crop-overflow/\n                 *         Crop or justify labels\n                 *\n                 * @validvalue [\"allow\", \"justify\"]\n                 */\n                overflow: 'justify',\n                /**\n                 * When either the borderWidth or the backgroundColor is\n                 * set, this is the padding within the box.\n                 *\n                 * @sample highcharts/annotations/label-presentation/\n                 *         Set labels graphic options\n                 */\n                padding: 5,\n                /**\n                 * The shadow of the box. The shadow can be an object\n                 * configuration containing `color`, `offsetX`, `offsetY`,\n                 * `opacity` and `width`.\n                 *\n                 * @sample highcharts/annotations/label-presentation/\n                 *         Set labels graphic options\n                 *\n                 * @type {boolean|Highcharts.ShadowOptionsObject}\n                 */\n                shadow: false,\n                /**\n                 * The name of a symbol to use for the border around the\n                 * label. Symbols are predefined functions on the Renderer\n                 * object.\n                 *\n                 * @sample highcharts/annotations/shapes/\n                 *         Available shapes for labels\n                 */\n                shape: 'callout',\n                /**\n                 * Styles for the annotation's label.\n                 *\n                 * @see [plotOptions.series.dataLabels.style](plotOptions.series.dataLabels.style.html)\n                 *\n                 * @sample highcharts/annotations/label-presentation/\n                 *         Set labels graphic options\n                 *\n                 * @type {Highcharts.CSSObject}\n                 */\n                style: {\n                    /** @ignore */\n                    fontSize: '0.7em',\n                    /** @ignore */\n                    fontWeight: 'normal',\n                    /** @ignore */\n                    color: 'contrast'\n                },\n                /**\n                 * Whether to [use HTML](https://www.highcharts.com/docs/chart-concepts/labels-and-string-formatting#html)\n                 * to render the annotation's label.\n                 */\n                useHTML: false,\n                /**\n                 * The vertical alignment of the annotation's label.\n                 *\n                 * @sample highcharts/annotations/label-position/\n                 *         Set labels position\n                 *\n                 * @type {Highcharts.VerticalAlignValue}\n                 */\n                verticalAlign: 'bottom',\n                /**\n                 * The x position offset of the label relative to the point.\n                 * Note that if a `distance` is defined, the distance takes\n                 * precedence over `x` and `y` options.\n                 *\n                 * @sample highcharts/annotations/label-position/\n                 *         Set labels position\n                 */\n                x: 0,\n                /**\n                 * The y position offset of the label relative to the point.\n                 * Note that if a `distance` is defined, the distance takes\n                 * precedence over `x` and `y` options.\n                 *\n                 * @sample highcharts/annotations/label-position/\n                 *         Set labels position\n                 */\n                y: -16\n            },\n            /**\n             * An array of labels for the annotation. For options that apply\n             * to multiple labels, they can be added to the\n             * [labelOptions](annotations.labelOptions.html).\n             *\n             * @type      {Array<*>}\n             * @extends   annotations.labelOptions\n             * @apioption annotations.labels\n             */\n            /**\n             * This option defines the point to which the label will be\n             * connected. It can be either the point which exists in the\n             * series - it is referenced by the point's id - or a new point\n             * with defined x, y properties and optionally axes.\n             *\n             * @sample highcharts/annotations/mock-point/\n             *         Attach annotation to a mock point\n             * @sample highcharts/annotations/mock-points/\n             *         Attach annotation to a mock point with different ways\n             *\n             * @declare   Highcharts.AnnotationMockPointOptionsObject\n             * @type      {\n             *               string|\n             *               Highcharts.AnnotationMockPointOptionsObject|\n             *               Highcharts.AnnotationMockPointFunction\n             *            }\n             * @requires  modules/annotations\n             * @apioption annotations.labels.point\n             */\n            /**\n             * An array of shapes for the annotation. For options that apply\n             * to multiple shapes, then can be added to the\n             * [shapeOptions](annotations.shapeOptions.html).\n             *\n             * @type      {Array<*>}\n             * @extends   annotations.shapeOptions\n             * @apioption annotations.shapes\n             */\n            /**\n             * This option defines the point to which the shape will be\n             * connected. It can be either the point which exists in the\n             * series - it is referenced by the point's id - or a new point\n             * with defined x, y properties and optionally axes.\n             *\n             * @sample highcharts/annotations/mock-points/\n             *         Attach annotation to a mock point with different ways\n             *\n             * @declare   Highcharts.AnnotationMockPointOptionsObject\n             * @type      {\n             *               string|\n             *               Highcharts.AnnotationMockPointOptionsObject|\n             *               Highcharts.AnnotationMockPointFunction\n             *            }\n             * @extends   annotations.labels.point\n             * @requires  modules/annotations\n             * @apioption annotations.shapes.point\n             */\n            /**\n             * An array of points for the shape\n             * or a callback function that returns that shape point.\n             *\n             * This option is available\n             * for shapes which can use multiple points such as path. A\n             * point can be either a point object or a point's id.\n             *\n             * @see [annotations.shapes.point](annotations.shapes.point.html)\n             *\n             * @type      {Array<Highcharts.AnnotationShapePointOptions>}\n             * @extends   annotations.labels.point\n             * @apioption annotations.shapes.points\n             */\n            /**\n             * The URL for an image to use as the annotation shape. Note,\n             * type has to be set to `'image'`.\n             *\n             * @see [annotations.shapes.type](annotations.shapes.type)\n             * @sample highcharts/annotations/shape-src/\n             *         Define a marker image url for annotations\n             *\n             * @type      {string}\n             * @apioption annotations.shapes.src\n             */\n            /**\n             * Id of the marker which will be drawn at the final vertex of\n             * the path. Custom markers can be defined in defs property.\n             *\n             * @see [defs.markers](defs.markers.html)\n             *\n             * @sample highcharts/annotations/custom-markers/\n             *         Define a custom marker for annotations\n             *\n             * @type      {string}\n             * @apioption annotations.shapes.markerEnd\n             */\n            /**\n             * Id of the marker which will be drawn at the first vertex of\n             * the path. Custom markers can be defined in defs property.\n             *\n             * @see [defs.markers](defs.markers.html)\n             *\n             * @sample {highcharts} highcharts/annotations/custom-markers/\n             *         Define a custom marker for annotations\n             *\n             * @type      {string}\n             * @apioption annotations.shapes.markerStart\n             */\n            /**\n             * Options for annotation's shapes. Each shape inherits options\n             * from the shapeOptions object. An option from the shapeOptions\n             * can be overwritten by config for a specific shape.\n             *\n             * @requires  modules/annotations\n             */\n            shapeOptions: {\n                /**\n                 *\n                 * The radius of the shape in y direction.\n                 * Used for the ellipse.\n                 *\n                 * @sample highcharts/annotations/ellipse/\n                 *         Ellipse annotation\n                 *\n                 * @type      {number}\n                 * @apioption annotations.shapeOptions.ry\n                 **/\n                /**\n                 *\n                 * The xAxis index to which the points should be attached.\n                 * Used for the ellipse.\n                 *\n                 * @type      {number}\n                 * @apioption annotations.shapeOptions.xAxis\n                 **/\n                /**\n                 * The yAxis index to which the points should be attached.\n                 * Used for the ellipse.\n                 *\n                 * @type      {number}\n                 * @apioption annotations.shapeOptions.yAxis\n                 **/\n                /**\n                 * The width of the shape.\n                 *\n                 * @sample highcharts/annotations/shape/\n                 *         Basic shape annotation\n                 *\n                 * @type      {number}\n                 * @apioption annotations.shapeOptions.width\n                 **/\n                /**\n                 * The height of the shape.\n                 *\n                 * @sample highcharts/annotations/shape/\n                 *         Basic shape annotation\n                 *\n                 * @type      {number}\n                 * @apioption annotations.shapeOptions.height\n                 */\n                /**\n                 * The type of the shape.\n                 * Avaliable options are circle, rect and ellipse.\n                 *\n                 * @sample highcharts/annotations/shape/\n                 *         Basic shape annotation\n                 *\n                 * @sample highcharts/annotations/ellipse/\n                 *         Ellipse annotation\n                 *\n                 * @type      {string}\n                 * @default   rect\n                 * @apioption annotations.shapeOptions.type\n                 */\n                /**\n                 * The URL for an image to use as the annotation shape.\n                 * Note, type has to be set to `'image'`.\n                 *\n                 * @see [annotations.shapeOptions.type](annotations.shapeOptions.type)\n                 * @sample highcharts/annotations/shape-src/\n                 *         Define a marker image url for annotations\n                 *\n                 * @type      {string}\n                 * @apioption annotations.shapeOptions.src\n                 */\n                /**\n                 * Name of the dash style to use for the shape's stroke.\n                 *\n                 * @sample {highcharts} highcharts/plotoptions/series-dashstyle-all/\n                 *         Possible values demonstrated\n                 *\n                 * @type      {Highcharts.DashStyleValue}\n                 * @apioption annotations.shapeOptions.dashStyle\n                 */\n                /**\n                 * The color of the shape's stroke.\n                 *\n                 * @sample highcharts/annotations/shape/\n                 *         Basic shape annotation\n                 *\n                 * @type {Highcharts.ColorString}\n                 */\n                stroke: 'rgba(0, 0, 0, 0.75)',\n                /**\n                 * The pixel stroke width of the shape.\n                 *\n                 * @sample highcharts/annotations/shape/\n                 *         Basic shape annotation\n                 */\n                strokeWidth: 1,\n                /**\n                 * The color of the shape's fill.\n                 *\n                 * @sample highcharts/annotations/shape/\n                 *         Basic shape annotation\n                 *\n                 * @type {Highcharts.ColorString|Highcharts.GradientColorObject|Highcharts.PatternObject}\n                 */\n                fill: 'rgba(0, 0, 0, 0.75)',\n                /**\n                 * The radius of the shape.\n                 *\n                 * @sample highcharts/annotations/shape/\n                 *         Basic shape annotation\n                 */\n                r: 0,\n                /**\n                 * Defines additional snapping area around an annotation\n                 * making this annotation to focus. Defined in pixels.\n                 */\n                snap: 2\n            },\n            /**\n             * Options for annotation's control points. Each control point\n             * inherits options from controlPointOptions object.\n             * Options from the controlPointOptions can be overwritten\n             * by options in a specific control point.\n             *\n             * @declare  Highcharts.AnnotationControlPointOptionsObject\n             * @requires modules/annotations\n             */\n            controlPointOptions: {\n                /**\n                 * @type      {Highcharts.AnnotationControlPointPositionerFunction}\n                 * @apioption annotations.controlPointOptions.positioner\n                 */\n                /**\n                 * @type {Highcharts.Dictionary<Function>}\n                 */\n                events: {},\n                /**\n                 * @type {Highcharts.SVGAttributes}\n                 */\n                style: {\n                    cursor: 'pointer',\n                    fill: \"#ffffff\" /* Palette.backgroundColor */,\n                    stroke: \"#000000\" /* Palette.neutralColor100 */,\n                    'stroke-width': 2\n                },\n                height: 10,\n                symbol: 'circle',\n                visible: false,\n                width: 10\n            },\n            /**\n             * Event callback when annotation is added to the chart.\n             *\n             * @type      {Highcharts.EventCallbackFunction<Highcharts.Annotation>}\n             * @since     7.1.0\n             * @apioption annotations.events.add\n             */\n            /**\n             * Event callback when annotation is updated (e.g. drag and\n             * droppped or resized by control points).\n             *\n             * @type      {Highcharts.EventCallbackFunction<Highcharts.Annotation>}\n             * @since     7.1.0\n             * @apioption annotations.events.afterUpdate\n             */\n            /**\n             * Fires when the annotation is clicked.\n             *\n             * @type      {Highcharts.EventCallbackFunction<Highcharts.Annotation>}\n             * @since     7.1.0\n             * @apioption annotations.events.click\n             */\n            /**\n             * Fires when the annotation is dragged.\n             *\n             * @type      {Highcharts.EventCallbackFunction<Highcharts.Annotation>}\n             * @apioption annotations.events.drag\n             */\n            /**\n             * Event callback when annotation is removed from the chart.\n             *\n             * @type      {Highcharts.EventCallbackFunction<Highcharts.Annotation>}\n             * @since     7.1.0\n             * @apioption annotations.events.remove\n             */\n            /**\n             * Events available in annotations.\n             *\n             * @requires modules/annotations\n             */\n            events: {},\n            /**\n             * The Z index of the annotation.\n             */\n            zIndex: 6\n        }; // typeOptions are expected but not set\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return AnnotationDefaults;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/EventEmitter.js', [_modules['Core/Globals.js'], _modules['Core/Utilities.js']], function (H, U) {\n        /* *\n         *\n         *  (c) 2009-2021 Highsoft, Black Label\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { doc, isTouchDevice } = H;\n        const { addEvent, fireEvent, objectEach, pick, removeEvent } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * @private\n         */\n        class EventEmitter {\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Add emitter events.\n             * @private\n             */\n            addEvents() {\n                const emitter = this, addMouseDownEvent = function (element) {\n                    addEvent(element, isTouchDevice ? 'touchstart' : 'mousedown', (e) => {\n                        emitter.onMouseDown(e);\n                    }, { passive: false });\n                };\n                addMouseDownEvent(this.graphic.element);\n                (emitter.labels || []).forEach((label) => {\n                    if (label.options.useHTML && label.graphic.text) {\n                        // Mousedown event bound to HTML element (#13070).\n                        addMouseDownEvent(label.graphic.text.element);\n                    }\n                });\n                objectEach(emitter.options.events, (event, type) => {\n                    const eventHandler = function (e) {\n                        if (type !== 'click' || !emitter.cancelClick) {\n                            event.call(emitter, emitter.chart.pointer.normalize(e), emitter.target);\n                        }\n                    };\n                    if ((emitter.nonDOMEvents || []).indexOf(type) === -1) {\n                        emitter.graphic.on(type, eventHandler);\n                    }\n                    else {\n                        addEvent(emitter, type, eventHandler, { passive: false });\n                    }\n                });\n                if (emitter.options.draggable) {\n                    addEvent(emitter, 'drag', emitter.onDrag);\n                    if (!emitter.graphic.renderer.styledMode) {\n                        const cssPointer = {\n                            cursor: {\n                                x: 'ew-resize',\n                                y: 'ns-resize',\n                                xy: 'move'\n                            }[emitter.options.draggable]\n                        };\n                        emitter.graphic.css(cssPointer);\n                        (emitter.labels || []).forEach((label) => {\n                            if (label.options.useHTML && label.graphic.text) {\n                                label.graphic.text.css(cssPointer);\n                            }\n                        });\n                    }\n                }\n                if (!emitter.isUpdating) {\n                    fireEvent(emitter, 'add');\n                }\n            }\n            /**\n             * Destroy the event emitter.\n             */\n            destroy() {\n                this.removeDocEvents();\n                removeEvent(this);\n                this.hcEvents = null;\n            }\n            /**\n             * Map mouse move event to the radians.\n             * @private\n             */\n            mouseMoveToRadians(e, cx, cy) {\n                let prevDy = e.prevChartY - cy, prevDx = e.prevChartX - cx, dy = e.chartY - cy, dx = e.chartX - cx, temp;\n                if (this.chart.inverted) {\n                    temp = prevDx;\n                    prevDx = prevDy;\n                    prevDy = temp;\n                    temp = dx;\n                    dx = dy;\n                    dy = temp;\n                }\n                return Math.atan2(dy, dx) - Math.atan2(prevDy, prevDx);\n            }\n            /**\n             * Map mouse move to the scale factors.\n             * @private\n             */\n            mouseMoveToScale(e, cx, cy) {\n                const prevDx = e.prevChartX - cx, prevDy = e.prevChartY - cy, dx = e.chartX - cx, dy = e.chartY - cy;\n                let sx = (dx || 1) / (prevDx || 1), sy = (dy || 1) / (prevDy || 1);\n                if (this.chart.inverted) {\n                    const temp = sy;\n                    sy = sx;\n                    sx = temp;\n                }\n                return {\n                    x: sx,\n                    y: sy\n                };\n            }\n            /**\n             * Map mouse move event to the distance between two following events.\n             * @private\n             */\n            mouseMoveToTranslation(e) {\n                let dx = e.chartX - e.prevChartX, dy = e.chartY - e.prevChartY, temp;\n                if (this.chart.inverted) {\n                    temp = dy;\n                    dy = dx;\n                    dx = temp;\n                }\n                return {\n                    x: dx,\n                    y: dy\n                };\n            }\n            /**\n             * Drag and drop event. All basic annotations should share this\n             * capability as well as the extended ones.\n             * @private\n             */\n            onDrag(e) {\n                if (this.chart.isInsidePlot(e.chartX - this.chart.plotLeft, e.chartY - this.chart.plotTop, {\n                    visiblePlotOnly: true\n                })) {\n                    const translation = this.mouseMoveToTranslation(e);\n                    if (this.options.draggable === 'x') {\n                        translation.y = 0;\n                    }\n                    if (this.options.draggable === 'y') {\n                        translation.x = 0;\n                    }\n                    const emitter = this;\n                    if (emitter.points.length) {\n                        emitter.translate(translation.x, translation.y);\n                    }\n                    else {\n                        emitter.shapes.forEach((shape) => shape.translate(translation.x, translation.y));\n                        emitter.labels.forEach((label) => label.translate(translation.x, translation.y));\n                    }\n                    this.redraw(false);\n                }\n            }\n            /**\n             * Mouse down handler.\n             * @private\n             */\n            onMouseDown(e) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n                // On right click, do nothing:\n                if (e.button === 2) {\n                    return;\n                }\n                const emitter = this, pointer = emitter.chart.pointer, \n                // Using experimental property on event object to check if event was\n                // created by touch on screen on hybrid device (#18122)\n                firesTouchEvents = (e?.sourceCapabilities?.firesTouchEvents) || false;\n                e = pointer.normalize(e);\n                let prevChartX = e.chartX, prevChartY = e.chartY;\n                emitter.cancelClick = false;\n                emitter.chart.hasDraggedAnnotation = true;\n                emitter.removeDrag = addEvent(doc, isTouchDevice || firesTouchEvents ? 'touchmove' : 'mousemove', function (e) {\n                    emitter.hasDragged = true;\n                    e = pointer.normalize(e);\n                    e.prevChartX = prevChartX;\n                    e.prevChartY = prevChartY;\n                    fireEvent(emitter, 'drag', e);\n                    prevChartX = e.chartX;\n                    prevChartY = e.chartY;\n                }, isTouchDevice || firesTouchEvents ? { passive: false } : void 0);\n                emitter.removeMouseUp = addEvent(doc, isTouchDevice || firesTouchEvents ? 'touchend' : 'mouseup', function (e) {\n                    // Sometimes the target is the annotation and sometimes its the\n                    // controllable\n                    const annotation = pick(emitter.target && emitter.target.annotation, emitter.target);\n                    if (annotation) {\n                        // Keep annotation selected after dragging control point\n                        annotation.cancelClick = emitter.hasDragged;\n                    }\n                    emitter.cancelClick = emitter.hasDragged;\n                    emitter.hasDragged = false;\n                    emitter.chart.hasDraggedAnnotation = false;\n                    // ControlPoints vs Annotation:\n                    fireEvent(pick(annotation, // #15952\n                    emitter), 'afterUpdate');\n                    emitter.onMouseUp(e);\n                }, isTouchDevice || firesTouchEvents ? { passive: false } : void 0);\n            }\n            /**\n             * Mouse up handler.\n             */\n            onMouseUp(_e) {\n                const chart = this.chart, annotation = this.target || this, annotationsOptions = chart.options.annotations, index = chart.annotations.indexOf(annotation);\n                this.removeDocEvents();\n                annotationsOptions[index] = annotation.options;\n            }\n            /**\n             * Remove emitter document events.\n             * @private\n             */\n            removeDocEvents() {\n                if (this.removeDrag) {\n                    this.removeDrag = this.removeDrag();\n                }\n                if (this.removeMouseUp) {\n                    this.removeMouseUp = this.removeMouseUp();\n                }\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return EventEmitter;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/ControlPoint.js', [_modules['Extensions/Annotations/EventEmitter.js'], _modules['Core/Utilities.js']], function (EventEmitter, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { merge, pick } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * A control point class which is a connection between controllable\n         * transform methods and a user actions.\n         *\n         * @requires modules/annotations\n         *\n         * @class\n         * @name Highcharts.AnnotationControlPoint\n         *\n         * @hideconstructor\n         *\n         * @param {Highcharts.Chart} chart\n         * A chart instance.\n         *\n         * @param {Highcharts.AnnotationControllable} target\n         * A controllable instance which is a target for a control point.\n         *\n         * @param {Highcharts.AnnotationControlPointOptionsObject} options\n         * An options object.\n         *\n         * @param {number} [index]\n         * Point index.\n         */\n        class ControlPoint extends EventEmitter {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(chart, target, options, index) {\n                super();\n                this.graphic = void 0;\n                /**\n                 * List of events for `anntation.options.events` that should not be\n                 * added to `annotation.graphic` but to the `annotation`.\n                 * @private\n                 * @name Highcharts.AnnotationControlPoint#nonDOMEvents\n                 * @type {Array<string>}\n                 */\n                this.nonDOMEvents = ['drag'];\n                this.chart = chart;\n                this.target = target;\n                this.options = options;\n                this.index = pick(options.index, index);\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Destroy the control point.\n             * @private\n             */\n            destroy() {\n                super.destroy();\n                if (this.graphic) {\n                    this.graphic = this.graphic.destroy();\n                }\n                this.chart = null;\n                this.target = null;\n                this.options = null;\n            }\n            /**\n             * Redraw the control point.\n             * @private\n             * @param {boolean} [animation]\n             */\n            redraw(animation) {\n                this.graphic[animation ? 'animate' : 'attr'](this.options.positioner.call(this, this.target));\n            }\n            /**\n             * Render the control point.\n             * @private\n             */\n            render() {\n                const chart = this.chart, options = this.options;\n                this.graphic = chart.renderer\n                    .symbol(options.symbol, 0, 0, options.width, options.height)\n                    .add(chart.controlPointsGroup)\n                    .css(options.style);\n                this.setVisibility(options.visible);\n                // npm test -- --tests \"highcharts/annotations-advanced/*\"\n                this.addEvents();\n            }\n            /**\n             * Set the visibility of the control point.\n             *\n             * @function Highcharts.AnnotationControlPoint#setVisibility\n             *\n             * @param {boolean} visible\n             * Visibility of the control point.\n             *\n             */\n            setVisibility(visible) {\n                this.graphic[visible ? 'show' : 'hide']();\n                this.options.visible = visible;\n            }\n            /**\n             * Update the control point.\n             *\n             * @function Highcharts.AnnotationControlPoint#update\n             *\n             * @param {Partial<Highcharts.AnnotationControlPointOptionsObject>} userOptions\n             * New options for the control point.\n             */\n            update(userOptions) {\n                const chart = this.chart, target = this.target, index = this.index, options = merge(true, this.options, userOptions);\n                this.destroy();\n                this.constructor(chart, target, options, index);\n                this.render(chart.controlPointsGroup);\n                this.redraw();\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        /* *\n         *\n         *  API Declarations\n         *\n         * */\n        /**\n         * Callback to modify annotation's possitioner controls.\n         *\n         * @callback Highcharts.AnnotationControlPointPositionerFunction\n         * @param {Highcharts.AnnotationControlPoint} this\n         * @param {Highcharts.AnnotationControllable} target\n         * @return {Highcharts.PositionObject}\n         */\n        (''); // keeps doclets above in JS file\n\n        return ControlPoint;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/MockPoint.js', [_modules['Core/Series/SeriesRegistry.js'], _modules['Core/Utilities.js']], function (SeriesRegistry, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { series: { prototype: seriesProto } } = SeriesRegistry;\n        const { defined, fireEvent } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * A trimmed point object which imitates {@link Highchart.Point} class. It is\n         * created when there is a need of pointing to some chart's position using axis\n         * values or pixel values\n         *\n         * @requires modules/annotations\n         *\n         * @private\n         * @class\n         * @name Highcharts.AnnotationMockPoint\n         *\n         * @hideconstructor\n         *\n         * @param {Highcharts.Chart} chart\n         * The chart instance.\n         *\n         * @param {Highcharts.AnnotationControllable|null} target\n         * The related controllable.\n         *\n         * @param {Highcharts.AnnotationMockPointOptionsObject|Function} options\n         * The options object.\n         */\n        class MockPoint {\n            /* *\n             *\n             *  Static Functions\n             *\n             * */\n            /**\n             * Create a mock point from a real Highcharts point.\n             *\n             * @private\n             * @static\n             *\n             * @param {Highcharts.Point} point\n             *\n             * @return {Highcharts.AnnotationMockPoint}\n             * A mock point instance.\n             */\n            static fromPoint(point) {\n                return new MockPoint(point.series.chart, null, {\n                    x: point.x,\n                    y: point.y,\n                    xAxis: point.series.xAxis,\n                    yAxis: point.series.yAxis\n                });\n            }\n            /**\n             * Get the pixel position from the point like object.\n             *\n             * @private\n             * @static\n             *\n             * @param {Highcharts.AnnotationPointType} point\n             *\n             * @param {boolean} [paneCoordinates]\n             *        Whether the pixel position should be relative\n             *\n             * @return {Highcharts.PositionObject} pixel position\n             */\n            static pointToPixels(point, paneCoordinates) {\n                const series = point.series, chart = series.chart;\n                let x = point.plotX || 0, y = point.plotY || 0, plotBox;\n                if (chart.inverted) {\n                    if (point.mock) {\n                        x = point.plotY;\n                        y = point.plotX;\n                    }\n                    else {\n                        x = chart.plotWidth - (point.plotY || 0);\n                        y = chart.plotHeight - (point.plotX || 0);\n                    }\n                }\n                if (series && !paneCoordinates) {\n                    plotBox = series.getPlotBox();\n                    x += plotBox.translateX;\n                    y += plotBox.translateY;\n                }\n                return {\n                    x: x,\n                    y: y\n                };\n            }\n            /**\n             * Get fresh mock point options from the point like object.\n             *\n             * @private\n             * @static\n             *\n             * @param {Highcharts.AnnotationPointType} point\n             *\n             * @return {Highcharts.AnnotationMockPointOptionsObject}\n             * A mock point's options.\n             */\n            static pointToOptions(point) {\n                return {\n                    x: point.x,\n                    y: point.y,\n                    xAxis: point.series.xAxis,\n                    yAxis: point.series.yAxis\n                };\n            }\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(chart, target, options) {\n                this.plotX = void 0;\n                this.plotY = void 0;\n                /* *\n                 *\n                 * Functions\n                 *\n                 * */\n                /**\n                 * A flag indicating that a point is not the real one.\n                 *\n                 * @type {boolean}\n                 * @default true\n                 */\n                this.mock = true;\n                /**\n                 * A mock series instance imitating a real series from a real point.\n                 *\n                 * @name Annotation.AnnotationMockPoint#series\n                 * @type {Highcharts.AnnotationMockSeries}\n                 */\n                this.series = {\n                    visible: true,\n                    chart: chart,\n                    getPlotBox: seriesProto.getPlotBox\n                };\n                /**\n                 * @name Annotation.AnnotationMockPoint#target\n                 * @type {Highcharts.AnnotationControllable|null}\n                 */\n                this.target = target || null;\n                /**\n                 * Options for the mock point.\n                 *\n                 * @name Annotation.AnnotationMockPoint#options\n                 * @type {Highcharts.AnnotationsMockPointOptionsObject}\n                 */\n                this.options = options;\n                /**\n                 * If an xAxis is set it represents the point's value in terms of the\n                 * xAxis.\n                 *\n                 * @name Annotation.AnnotationMockPoint#x\n                 * @type {number|undefined}\n                 */\n                /**\n                 * If an yAxis is set it represents the point's value in terms of the\n                 * yAxis.\n                 *\n                 * @name Annotation.AnnotationMockPoint#y\n                 * @type {number|undefined}\n                 */\n                /**\n                 * It represents the point's pixel x coordinate relative to its plot\n                 * box.\n                 *\n                 * @name Annotation.AnnotationMockPoint#plotX\n                 * @type {number|undefined}\n                 */\n                /**\n                 * It represents the point's pixel y position relative to its plot box.\n                 *\n                 * @name Annotation.AnnotationMockPoint#plotY\n                 * @type {number|undefined}\n                 */\n                /**\n                 * Whether the point is inside the plot box.\n                 *\n                 * @name Annotation.AnnotationMockPoint#isInside\n                 * @type {boolean|undefined}\n                 */\n                this.applyOptions(this.getOptions());\n            }\n            /**\n             * Apply options for the point.\n             * @private\n             * @param {Highcharts.AnnotationMockPointOptionsObject} options\n             */\n            applyOptions(options) {\n                this.command = options.command;\n                this.setAxis(options, 'x');\n                this.setAxis(options, 'y');\n                this.refresh();\n            }\n            /**\n             * Returns a label config object - the same as\n             * Highcharts.Point.prototype.getLabelConfig\n             * @private\n             * @return {Highcharts.AnnotationMockLabelOptionsObject}\n             * The point's label config\n             */\n            getLabelConfig() {\n                return {\n                    x: this.x,\n                    y: this.y,\n                    point: this\n                };\n            }\n            /**\n             * Get the point's options.\n             * @private\n             * @return {Highcharts.AnnotationMockPointOptionsObject}\n             * The mock point's options.\n             */\n            getOptions() {\n                return this.hasDynamicOptions() ?\n                    this.options(this.target) :\n                    this.options;\n            }\n            /**\n             * Check if the point has dynamic options.\n             * @private\n             * @return {boolean}\n             * A positive flag if the point has dynamic options.\n             */\n            hasDynamicOptions() {\n                return typeof this.options === 'function';\n            }\n            /**\n             * Check if the point is inside its pane.\n             * @private\n             * @return {boolean} A flag indicating whether the point is inside the pane.\n             */\n            isInsidePlot() {\n                const plotX = this.plotX, plotY = this.plotY, xAxis = this.series.xAxis, yAxis = this.series.yAxis, e = {\n                    x: plotX,\n                    y: plotY,\n                    isInsidePlot: true,\n                    options: {}\n                };\n                if (xAxis) {\n                    e.isInsidePlot = defined(plotX) && plotX >= 0 && plotX <= xAxis.len;\n                }\n                if (yAxis) {\n                    e.isInsidePlot =\n                        e.isInsidePlot &&\n                            defined(plotY) &&\n                            plotY >= 0 && plotY <= yAxis.len;\n                }\n                fireEvent(this.series.chart, 'afterIsInsidePlot', e);\n                return e.isInsidePlot;\n            }\n            /**\n             * Refresh point values and coordinates based on its options.\n             * @private\n             */\n            refresh() {\n                const series = this.series, xAxis = series.xAxis, yAxis = series.yAxis, options = this.getOptions();\n                if (xAxis) {\n                    this.x = options.x;\n                    this.plotX = xAxis.toPixels(options.x, true);\n                }\n                else {\n                    this.x = void 0;\n                    this.plotX = options.x;\n                }\n                if (yAxis) {\n                    this.y = options.y;\n                    this.plotY = yAxis.toPixels(options.y, true);\n                }\n                else {\n                    this.y = null;\n                    this.plotY = options.y;\n                }\n                this.isInside = this.isInsidePlot();\n            }\n            /**\n             * Refresh point options based on its plot coordinates.\n             * @private\n             */\n            refreshOptions() {\n                const series = this.series, xAxis = series.xAxis, yAxis = series.yAxis;\n                this.x = this.options.x = xAxis ?\n                    this.options.x = xAxis.toValue(this.plotX, true) :\n                    this.plotX;\n                this.y = this.options.y = yAxis ?\n                    yAxis.toValue(this.plotY, true) :\n                    this.plotY;\n            }\n            /**\n             * Rotate the point.\n             * @private\n             * @param {number} cx origin x rotation\n             * @param {number} cy origin y rotation\n             * @param {number} radians\n             */\n            rotate(cx, cy, radians) {\n                if (!this.hasDynamicOptions()) {\n                    const cos = Math.cos(radians), sin = Math.sin(radians), x = this.plotX - cx, y = this.plotY - cy, tx = x * cos - y * sin, ty = x * sin + y * cos;\n                    this.plotX = tx + cx;\n                    this.plotY = ty + cy;\n                    this.refreshOptions();\n                }\n            }\n            /**\n             * Scale the point.\n             *\n             * @private\n             *\n             * @param {number} cx\n             * Origin x transformation.\n             *\n             * @param {number} cy\n             * Origin y transformation.\n             *\n             * @param {number} sx\n             * Scale factor x.\n             *\n             * @param {number} sy\n             * Scale factor y.\n             */\n            scale(cx, cy, sx, sy) {\n                if (!this.hasDynamicOptions()) {\n                    const x = this.plotX * sx, y = this.plotY * sy, tx = (1 - sx) * cx, ty = (1 - sy) * cy;\n                    this.plotX = tx + x;\n                    this.plotY = ty + y;\n                    this.refreshOptions();\n                }\n            }\n            /**\n             * Set x or y axis.\n             * @private\n             * @param {Highcharts.AnnotationMockPointOptionsObject} options\n             * @param {string} xOrY\n             * 'x' or 'y' string literal\n             */\n            setAxis(options, xOrY) {\n                const axisName = (xOrY + 'Axis'), axisOptions = options[axisName], chart = this.series.chart;\n                this.series[axisName] =\n                    typeof axisOptions === 'object' ?\n                        axisOptions :\n                        defined(axisOptions) ?\n                            (chart[axisName][axisOptions] ||\n                                // @todo v--- (axisName)[axisOptions] ?\n                                chart.get(axisOptions)) :\n                            null;\n            }\n            /**\n             * Transform the mock point to an anchor (relative position on the chart).\n             * @private\n             * @return {Array<number>}\n             * A quadruple of numbers which denotes x, y, width and height of the box\n             **/\n            toAnchor() {\n                const anchor = [this.plotX, this.plotY, 0, 0];\n                if (this.series.chart.inverted) {\n                    anchor[0] = this.plotY;\n                    anchor[1] = this.plotX;\n                }\n                return anchor;\n            }\n            /**\n             * Translate the point.\n             *\n             * @private\n             *\n             * @param {number|undefined} cx\n             * Origin x transformation.\n             *\n             * @param {number|undefined} cy\n             * Origin y transformation.\n             *\n             * @param {number} dx\n             * Translation for x coordinate.\n             *\n             * @param {number} dy\n             * Translation for y coordinate.\n             **/\n            translate(_cx, _cy, dx, dy) {\n                if (!this.hasDynamicOptions()) {\n                    this.plotX += dx;\n                    this.plotY += dy;\n                    this.refreshOptions();\n                }\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        /* *\n         *\n         *  API Declarations\n         *\n         * */\n        /**\n         * @private\n         * @interface Highcharts.AnnotationMockLabelOptionsObject\n         */ /**\n        * Point instance of the point.\n        * @name Highcharts.AnnotationMockLabelOptionsObject#point\n        * @type {Highcharts.AnnotationMockPoint}\n        */ /**\n        * X value translated to x axis scale.\n        * @name Highcharts.AnnotationMockLabelOptionsObject#x\n        * @type {number|null}\n        */ /**\n        * Y value translated to y axis scale.\n        * @name Highcharts.AnnotationMockLabelOptionsObject#y\n        * @type {number|null}\n        */\n        /**\n         * Object of shape point.\n         *\n         * @interface Highcharts.AnnotationMockPointOptionsObject\n         */ /**\n        * The x position of the point. Units can be either in axis\n        * or chart pixel coordinates.\n        *\n        * @type      {number}\n        * @name      Highcharts.AnnotationMockPointOptionsObject.x\n        */ /**\n        * The y position of the point. Units can be either in axis\n        * or chart pixel coordinates.\n        *\n        * @type      {number}\n        * @name      Highcharts.AnnotationMockPointOptionsObject.y\n        */ /**\n        * This number defines which xAxis the point is connected to.\n        * It refers to either the axis id or the index of the axis in\n        * the xAxis array. If the option is not configured or the axis\n        * is not found the point's x coordinate refers to the chart\n        * pixels.\n        *\n        * @type      {number|string|null}\n        * @name      Highcharts.AnnotationMockPointOptionsObject.xAxis\n        */ /**\n        * This number defines which yAxis the point is connected to.\n        * It refers to either the axis id or the index of the axis in\n        * the yAxis array. If the option is not configured or the axis\n        * is not found the point's y coordinate refers to the chart\n        * pixels.\n        *\n        * @type      {number|string|null}\n        * @name      Highcharts.AnnotationMockPointOptionsObject.yAxis\n        */\n        /**\n         * Callback function that returns the annotation shape point.\n         *\n         * @callback Highcharts.AnnotationMockPointFunction\n         *\n         * @param  {Highcharts.Annotation} annotation\n         *         An annotation instance.\n         *\n         * @return {Highcharts.AnnotationMockPointOptionsObject}\n         *         Annotations shape point.\n         */\n        /**\n         * A mock series instance imitating a real series from a real point.\n         * @private\n         * @interface Highcharts.AnnotationMockSeries\n         */ /**\n        * Whether a series is visible.\n        * @name Highcharts.AnnotationMockSeries#visible\n        * @type {boolean}\n        */ /**\n        * A chart instance.\n        * @name Highcharts.AnnotationMockSeries#chart\n        * @type {Highcharts.Chart}\n        */ /**\n        * @name Highcharts.AnnotationMockSeries#getPlotBox\n        * @type {Function}\n        */\n        /**\n         * Indicates if this is a mock point for an annotation.\n         * @name Highcharts.Point#mock\n         * @type {boolean|undefined}\n         */\n        (''); // keeps doclets above in JS file\n\n        return MockPoint;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/ControlTarget.js', [_modules['Extensions/Annotations/ControlPoint.js'], _modules['Extensions/Annotations/MockPoint.js'], _modules['Core/Utilities.js']], function (ControlPoint, MockPoint, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        /* *\n         *\n         *  Composition Namespace\n         *\n         * */\n        var ControlTarget;\n        (function (ControlTarget) {\n            /* *\n             *\n             *  Declarations\n             *\n             * */\n            /* *\n             *\n             *  Constants\n             *\n             * */\n            const composedMembers = [];\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Add control points.\n             * @private\n             */\n            function addControlPoints() {\n                const controlPoints = this.controlPoints, controlPointsOptions = this.options.controlPoints || [];\n                controlPointsOptions.forEach((controlPointOptions, i) => {\n                    const options = U.merge(this.options.controlPointOptions, controlPointOptions);\n                    if (!options.index) {\n                        options.index = i;\n                    }\n                    controlPointsOptions[i] = options;\n                    controlPoints.push(new ControlPoint(this.chart, this, options));\n                });\n            }\n            /**\n             * Returns object which denotes anchor position - relative and absolute.\n             * @private\n             * @param {Highcharts.AnnotationPointType} point\n             * An annotation point.\n             *\n             * @return {Highcharts.AnnotationAnchorObject}\n             * An annotation anchor.\n             */\n            function anchor(point) {\n                const plotBox = point.series.getPlotBox(), chart = point.series.chart, box = point.mock ?\n                    point.toAnchor() :\n                    chart.tooltip &&\n                        chart.tooltip.getAnchor.call({\n                            chart: point.series.chart\n                        }, point) ||\n                        [0, 0, 0, 0], anchor = {\n                    x: box[0] + (this.options.x || 0),\n                    y: box[1] + (this.options.y || 0),\n                    height: box[2] || 0,\n                    width: box[3] || 0\n                };\n                return {\n                    relativePosition: anchor,\n                    absolutePosition: U.merge(anchor, {\n                        x: anchor.x + (point.mock ? plotBox.translateX : chart.plotLeft),\n                        y: anchor.y + (point.mock ? plotBox.translateY : chart.plotTop)\n                    })\n                };\n            }\n            /**\n             * Adds shared functions to be used with targets of ControlPoint.\n             * @private\n             */\n            function compose(ControlTargetClass) {\n                if (U.pushUnique(composedMembers, ControlTargetClass)) {\n                    U.merge(true, ControlTargetClass.prototype, {\n                        addControlPoints,\n                        anchor,\n                        destroyControlTarget,\n                        getPointsOptions,\n                        linkPoints,\n                        point,\n                        redrawControlPoints,\n                        renderControlPoints,\n                        transform,\n                        transformPoint,\n                        translate,\n                        translatePoint\n                    });\n                }\n            }\n            ControlTarget.compose = compose;\n            /**\n             * Destroy control points.\n             * @private\n             */\n            function destroyControlTarget() {\n                this.controlPoints.forEach((controlPoint) => controlPoint.destroy());\n                this.chart = null;\n                this.controlPoints = null;\n                this.points = null;\n                this.options = null;\n                if (this.annotation) {\n                    this.annotation = null;\n                }\n            }\n            /**\n             * Get the points options.\n             * @private\n             * @return {Array<Highcharts.PointOptionsObject>}\n             * An array of points' options.\n             */\n            function getPointsOptions() {\n                const options = this.options;\n                return (options.points ||\n                    (options.point && U.splat(options.point)));\n            }\n            /**\n             * Find point-like objects based on points options.\n             * @private\n             * @return {Array<Annotation.PointLike>}\n             *         An array of point-like objects.\n             */\n            function linkPoints() {\n                const pointsOptions = this.getPointsOptions(), points = this.points, len = (pointsOptions && pointsOptions.length) || 0;\n                let i, point;\n                for (i = 0; i < len; i++) {\n                    point = this.point(pointsOptions[i], points[i]);\n                    if (!point) {\n                        points.length = 0;\n                        return;\n                    }\n                    if (point.mock) {\n                        point.refresh();\n                    }\n                    points[i] = point;\n                }\n                return points;\n            }\n            /**\n             * Map point's options to a point-like object.\n             * @private\n             * @param {string|Function|Highcharts.AnnotationMockPointOptionsObject|Highcharts.AnnotationPointType} pointOptions\n             *        Point's options.\n             * @param {Highcharts.AnnotationPointType} point\n             *        A point-like instance.\n             * @return {Highcharts.AnnotationPointType|null}\n             *         If the point is found/set returns this point, otherwise null\n             */\n            function point(pointOptions, point) {\n                if (pointOptions && pointOptions.series) {\n                    return pointOptions;\n                }\n                if (!point || point.series === null) {\n                    if (U.isObject(pointOptions)) {\n                        point = new MockPoint(this.chart, this, pointOptions);\n                    }\n                    else if (U.isString(pointOptions)) {\n                        point = this.chart.get(pointOptions) || null;\n                    }\n                    else if (typeof pointOptions === 'function') {\n                        const pointConfig = pointOptions.call(point, this);\n                        point = pointConfig.series ?\n                            pointConfig :\n                            new MockPoint(this.chart, this, pointOptions);\n                    }\n                }\n                return point;\n            }\n            /**\n             * Redraw control points.\n             * @private\n             */\n            function redrawControlPoints(animation) {\n                this.controlPoints.forEach((controlPoint) => controlPoint.redraw(animation));\n            }\n            /**\n             * Render controll points.\n             * @private\n             */\n            function renderControlPoints() {\n                this.controlPoints.forEach((controlPoint) => controlPoint.render());\n            }\n            /**\n             * Transform control points with a specific transformation.\n             * @private\n             * @param {string} transformation\n             *        A transformation name\n             * @param {number|null} cx\n             *        Origin x transformation\n             * @param {number|null} cy\n             *        Origin y transformation\n             * @param {number} p1\n             *        Param for the transformation\n             * @param {number} [p2]\n             *        Param for the transformation\n             */\n            function transform(transformation, cx, cy, p1, p2) {\n                if (this.chart.inverted) {\n                    const temp = cx;\n                    cx = cy;\n                    cy = temp;\n                }\n                this.points.forEach((_point, i) => (this.transformPoint(transformation, cx, cy, p1, p2, i)), this);\n            }\n            /**\n             * Transform a point with a specific transformation\n             * If a transformed point is a real point it is replaced with\n             * the mock point.\n             * @private\n             * @param {string} transformation\n             *        A transformation name\n             * @param {number|null} cx\n             *        Origin x transformation\n             * @param {number|null} cy\n             *        Origin y transformation\n             * @param {number} p1\n             *        Param for the transformation\n             * @param {number|undefined} p2\n             *        Param for the transformation\n             * @param {number} i\n             *        Index of the point\n             */\n            function transformPoint(transformation, cx, cy, p1, p2, i) {\n                let point = this.points[i];\n                if (!point.mock) {\n                    point = this.points[i] = MockPoint.fromPoint(point);\n                }\n                point[transformation](cx, cy, p1, p2);\n            }\n            /**\n             * Translate control points.\n             * @private\n             * @param {number} dx\n             *        Translation for x coordinate\n             * @param {number} dy\n             *        Translation for y coordinate\n             **/\n            function translate(dx, dy) {\n                this.transform('translate', null, null, dx, dy);\n            }\n            /**\n             * Translate a specific control point.\n             * @private\n             * @param {number} dx\n             *        Translation for x coordinate\n             * @param {number} dy\n             *        Translation for y coordinate\n             * @param {number} i\n             *        Index of the point\n             **/\n            function translatePoint(dx, dy, i) {\n                this.transformPoint('translate', null, null, dx, dy, i);\n            }\n        })(ControlTarget || (ControlTarget = {}));\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return ControlTarget;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Controllables/Controllable.js', [_modules['Extensions/Annotations/ControlTarget.js'], _modules['Core/Utilities.js']], function (ControlTarget, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { merge } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * It provides methods for handling points, control points\n         * and points transformations.\n         * @private\n         */\n        class Controllable {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(annotation, options, index, itemType) {\n                this.graphic = void 0;\n                this.annotation = annotation;\n                this.chart = annotation.chart;\n                this.collection = (itemType === 'label' ? 'labels' : 'shapes');\n                this.controlPoints = [];\n                this.options = options;\n                this.points = [];\n                this.index = index;\n                this.itemType = itemType;\n                this.init(annotation, options, index);\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Redirect attr usage on the controllable graphic element.\n             * @private\n             */\n            attr(..._args) {\n                this.graphic.attr.apply(this.graphic, arguments);\n            }\n            /**\n             * Utility function for mapping item's options\n             * to element's attribute\n             * @private\n             * @param {Highcharts.AnnotationsLabelsOptions|Highcharts.AnnotationsShapesOptions} options\n             * @return {Highcharts.SVGAttributes}\n             *         Mapped options.\n             */\n            attrsFromOptions(options) {\n                const map = this.constructor.attrsMap, attrs = {}, styledMode = this.chart.styledMode;\n                let key, mappedKey;\n                for (key in options) { // eslint-disable-line guard-for-in\n                    mappedKey = map[key];\n                    if (typeof map[key] !== 'undefined' &&\n                        (!styledMode ||\n                            ['fill', 'stroke', 'stroke-width']\n                                .indexOf(mappedKey) === -1)) {\n                        attrs[mappedKey] = options[key];\n                    }\n                }\n                return attrs;\n            }\n            /**\n             * Destroy a controllable.\n             * @private\n             */\n            destroy() {\n                if (this.graphic) {\n                    this.graphic = this.graphic.destroy();\n                }\n                if (this.tracker) {\n                    this.tracker = this.tracker.destroy();\n                }\n                this.destroyControlTarget();\n            }\n            /**\n             * Init the controllable\n             * @private\n             */\n            init(annotation, options, index) {\n                this.annotation = annotation;\n                this.chart = annotation.chart;\n                this.options = options;\n                this.points = [];\n                this.controlPoints = [];\n                this.index = index;\n                this.linkPoints();\n                this.addControlPoints();\n            }\n            /**\n             * Redraw a controllable.\n             * @private\n             */\n            redraw(animation) {\n                this.redrawControlPoints(animation);\n            }\n            /**\n             * Render a controllable.\n             * @private\n             */\n            render(_parentGroup) {\n                this.renderControlPoints();\n            }\n            /**\n             * Rotate a controllable.\n             * @private\n             * @param {number} cx\n             *        Origin x rotation\n             * @param {number} cy\n             *        Origin y rotation\n             * @param {number} radians\n             **/\n            rotate(cx, cy, radians) {\n                this.transform('rotate', cx, cy, radians);\n            }\n            /**\n             * Scale a controllable.\n             * @private\n             * @param {number} cx\n             *        Origin x rotation\n             * @param {number} cy\n             *        Origin y rotation\n             * @param {number} sx\n             *        Scale factor x\n             * @param {number} sy\n             *        Scale factor y\n             */\n            scale(cx, cy, sx, sy) {\n                this.transform('scale', cx, cy, sx, sy);\n            }\n            /**\n             * Set control points' visibility.\n             * @private\n             */\n            setControlPointsVisibility(visible) {\n                this.controlPoints.forEach((controlPoint) => {\n                    controlPoint.setVisibility(visible);\n                });\n            }\n            /**\n             * Check if a controllable should be rendered/redrawn.\n             * @private\n             * @return {boolean}\n             *         Whether a controllable should be drawn.\n             */\n            shouldBeDrawn() {\n                return !!this.points.length;\n            }\n            /**\n             * Translate shape within controllable item.\n             * Replaces `controllable.translate` method.\n             * @private\n             * @param {number} dx\n             *        Translation for x coordinate\n             * @param {number} dy\n             *        Translation for y coordinate\n             * @param {boolean|undefined} translateSecondPoint\n             *        If the shape has two points attached to it, this option allows you\n             *        to translate also the second point.\n             */\n            translateShape(dx, dy, translateSecondPoint) {\n                const chart = this.annotation.chart, \n                // Annotation.options\n                shapeOptions = this.annotation.userOptions, \n                // Chart.options.annotations\n                annotationIndex = chart.annotations.indexOf(this.annotation), chartOptions = chart.options.annotations[annotationIndex];\n                this.translatePoint(dx, dy, 0);\n                if (translateSecondPoint) {\n                    this.translatePoint(dx, dy, 1);\n                }\n                // Options stored in:\n                // - chart (for exporting)\n                // - current config (for redraws)\n                chartOptions[this.collection][this.index]\n                    .point = this.options.point;\n                shapeOptions[this.collection][this.index]\n                    .point = this.options.point;\n            }\n            /**\n             * Update a controllable.\n             * @private\n             */\n            update(newOptions) {\n                const annotation = this.annotation, options = merge(true, this.options, newOptions), parentGroup = this.graphic.parentGroup, Constructor = this.constructor;\n                this.destroy();\n                const newControllable = new Constructor(annotation, options, this.index, this.itemType);\n                merge(true, this, newControllable);\n                this.render(parentGroup);\n                this.redraw();\n            }\n        }\n        ControlTarget.compose(Controllable);\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        /* *\n         *\n         *  API Declarations\n         *\n         * */\n        /**\n         * An object which denots a controllable's anchor positions - relative and\n         * absolute.\n         *\n         * @private\n         * @interface Highcharts.AnnotationAnchorObject\n         */ /**\n        * Relative to the plot area position\n        * @name Highcharts.AnnotationAnchorObject#relativePosition\n        * @type {Highcharts.BBoxObject}\n        */ /**\n        * Absolute position\n        * @name Highcharts.AnnotationAnchorObject#absolutePosition\n        * @type {Highcharts.BBoxObject}\n        */\n        /**\n         * @interface Highcharts.AnnotationControllable\n         */ /**\n        * @name Highcharts.AnnotationControllable#annotation\n        * @type {Highcharts.Annotation}\n        */ /**\n        * @name Highcharts.AnnotationControllable#chart\n        * @type {Highcharts.Chart}\n        */ /**\n        * @name Highcharts.AnnotationControllable#collection\n        * @type {string}\n        */ /**\n        * @private\n        * @name Highcharts.AnnotationControllable#controlPoints\n        * @type {Array<Highcharts.AnnotationControlPoint>}\n        */ /**\n        * @name Highcharts.AnnotationControllable#points\n        * @type {Array<Highcharts.Point>}\n        */\n        (''); // keeps doclets above in JS file\n\n        return Controllable;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Controllables/ControllableDefaults.js', [], function () {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        /**\n         * Options for configuring markers for annotations.\n         *\n         * An example of the arrow marker:\n         * <pre>\n         * {\n         *   arrow: {\n         *     id: 'arrow',\n         *     tagName: 'marker',\n         *     refY: 5,\n         *     refX: 5,\n         *     markerWidth: 10,\n         *     markerHeight: 10,\n         *     children: [{\n         *       tagName: 'path',\n         *       attrs: {\n         *         d: 'M 0 0 L 10 5 L 0 10 Z',\n         *         'stroke-width': 0\n         *       }\n         *     }]\n         *   }\n         * }\n         * </pre>\n         *\n         * @sample highcharts/annotations/custom-markers/\n         *         Define a custom marker for annotations\n         *\n         * @sample highcharts/css/annotations-markers/\n         *         Define markers in a styled mode\n         *\n         * @type         {Highcharts.Dictionary<Highcharts.ASTNode>}\n         * @since        6.0.0\n         * @optionparent defs\n         */\n        const defaultMarkers = {\n            /**\n             * @type {Highcharts.ASTNode}\n             */\n            arrow: {\n                tagName: 'marker',\n                attributes: {\n                    id: 'arrow',\n                    refY: 5,\n                    refX: 9,\n                    markerWidth: 10,\n                    markerHeight: 10\n                },\n                /**\n                 * @type {Array<Highcharts.DefsOptions>}\n                 */\n                children: [{\n                        tagName: 'path',\n                        attributes: {\n                            d: 'M 0 0 L 10 5 L 0 10 Z',\n                            'stroke-width': 0\n                        }\n                    }]\n            },\n            /**\n             * @type {Highcharts.ASTNode}\n             */\n            'reverse-arrow': {\n                tagName: 'marker',\n                attributes: {\n                    id: 'reverse-arrow',\n                    refY: 5,\n                    refX: 1,\n                    markerWidth: 10,\n                    markerHeight: 10\n                },\n                children: [{\n                        tagName: 'path',\n                        attributes: {\n                            // reverse triangle (used as an arrow)\n                            d: 'M 0 5 L 10 0 L 10 10 Z',\n                            'stroke-width': 0\n                        }\n                    }]\n            }\n        };\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        const ControllableDefaults = {\n            defaultMarkers\n        };\n\n        return ControllableDefaults;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Controllables/ControllablePath.js', [_modules['Extensions/Annotations/Controllables/Controllable.js'], _modules['Extensions/Annotations/Controllables/ControllableDefaults.js'], _modules['Core/Globals.js'], _modules['Core/Utilities.js']], function (Controllable, ControllableDefaults, H, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { defaultMarkers } = ControllableDefaults;\n        const { addEvent, defined, extend, merge, uniqueKey } = U;\n        /* *\n         *\n         *  Constants\n         *\n         * */\n        const composedMembers = [];\n        const markerEndSetter = createMarkerSetter('marker-end');\n        const markerStartSetter = createMarkerSetter('marker-start');\n        // See TRACKER_FILL in highcharts.src.js\n        const TRACKER_FILL = 'rgba(192,192,192,' + (H.svg ? 0.0001 : 0.002) + ')';\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * @private\n         */\n        function createMarkerSetter(markerType) {\n            return function (value) {\n                this.attr(markerType, 'url(#' + value + ')');\n            };\n        }\n        /**\n         * @private\n         */\n        function onChartAfterGetContainer() {\n            this.options.defs = merge(defaultMarkers, this.options.defs || {});\n            // objectEach(this.options.defs, function (def): void {\n            //     const attributes = def.attributes;\n            //     if (\n            //         def.tagName === 'marker' &&\n            //         attributes &&\n            //         attributes.id &&\n            //         attributes.display !== 'none'\n            //     ) {\n            //         this.renderer.addMarker(attributes.id, def);\n            //     }\n            // }, this);\n        }\n        /**\n         * @private\n         */\n        function svgRendererAddMarker(id, markerOptions) {\n            const options = { attributes: { id } };\n            const attrs = {\n                stroke: markerOptions.color || 'none',\n                fill: markerOptions.color || 'rgba(0, 0, 0, 0.75)'\n            };\n            options.children = (markerOptions.children &&\n                markerOptions.children.map(function (child) {\n                    return merge(attrs, child);\n                }));\n            const ast = merge(true, {\n                attributes: {\n                    markerWidth: 20,\n                    markerHeight: 20,\n                    refX: 0,\n                    refY: 0,\n                    orient: 'auto'\n                }\n            }, markerOptions, options);\n            const marker = this.definition(ast);\n            marker.id = id;\n            return marker;\n        }\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * A controllable path class.\n         *\n         * @requires modules/annotations\n         *\n         * @private\n         * @class\n         * @name Highcharts.AnnotationControllablePath\n         *\n         * @param {Highcharts.Annotation}\n         * Related annotation.\n         *\n         * @param {Highcharts.AnnotationsShapeOptions} options\n         * A path's options object.\n         *\n         * @param {number} index\n         * Index of the path.\n         */\n        class ControllablePath extends Controllable {\n            /* *\n             *\n             *  Static Functions\n             *\n             * */\n            static compose(ChartClass, SVGRendererClass) {\n                if (U.pushUnique(composedMembers, ChartClass)) {\n                    addEvent(ChartClass, 'afterGetContainer', onChartAfterGetContainer);\n                }\n                if (U.pushUnique(composedMembers, SVGRendererClass)) {\n                    const svgRendererProto = SVGRendererClass.prototype;\n                    svgRendererProto.addMarker = svgRendererAddMarker;\n                }\n            }\n            /* *\n             *\n             *  Constructors\n             *\n             * */\n            constructor(annotation, options, index) {\n                super(annotation, options, index, 'shape');\n                /* *\n                 *\n                 *  Properties\n                 *\n                 * */\n                this.type = 'path';\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Map the controllable path to 'd' path attribute.\n             *\n             * @return {Highcharts.SVGPathArray|null}\n             * A path's d attribute.\n             */\n            toD() {\n                const dOption = this.options.d;\n                if (dOption) {\n                    return typeof dOption === 'function' ?\n                        dOption.call(this) :\n                        dOption;\n                }\n                const points = this.points, len = points.length, d = [];\n                let showPath = len, point = points[0], position = showPath && this.anchor(point).absolutePosition, pointIndex = 0, command;\n                if (position) {\n                    d.push(['M', position.x, position.y]);\n                    while (++pointIndex < len && showPath) {\n                        point = points[pointIndex];\n                        command = point.command || 'L';\n                        position = this.anchor(point).absolutePosition;\n                        if (command === 'M') {\n                            d.push([command, position.x, position.y]);\n                        }\n                        else if (command === 'L') {\n                            d.push([command, position.x, position.y]);\n                        }\n                        else if (command === 'Z') {\n                            d.push([command]);\n                        }\n                        showPath = point.series.visible;\n                    }\n                }\n                return (showPath && this.graphic ?\n                    this.chart.renderer.crispLine(d, this.graphic.strokeWidth()) :\n                    null);\n            }\n            shouldBeDrawn() {\n                return super.shouldBeDrawn() || !!this.options.d;\n            }\n            render(parent) {\n                const options = this.options, attrs = this.attrsFromOptions(options);\n                this.graphic = this.annotation.chart.renderer\n                    .path([['M', 0, 0]])\n                    .attr(attrs)\n                    .add(parent);\n                if (options.className) {\n                    this.graphic.addClass(options.className);\n                }\n                this.tracker = this.annotation.chart.renderer\n                    .path([['M', 0, 0]])\n                    .addClass('highcharts-tracker-line')\n                    .attr({\n                    zIndex: 2\n                })\n                    .add(parent);\n                if (!this.annotation.chart.styledMode) {\n                    this.tracker.attr({\n                        'stroke-linejoin': 'round',\n                        stroke: TRACKER_FILL,\n                        fill: TRACKER_FILL,\n                        'stroke-width': this.graphic.strokeWidth() +\n                            options.snap * 2\n                    });\n                }\n                super.render();\n                extend(this.graphic, { markerStartSetter, markerEndSetter });\n                this.setMarkers(this);\n            }\n            redraw(animation) {\n                if (this.graphic) {\n                    const d = this.toD(), action = animation ? 'animate' : 'attr';\n                    if (d) {\n                        this.graphic[action]({ d: d });\n                        this.tracker[action]({ d: d });\n                    }\n                    else {\n                        this.graphic.attr({ d: 'M 0 ' + -9e9 });\n                        this.tracker.attr({ d: 'M 0 ' + -9e9 });\n                    }\n                    this.graphic.placed = this.tracker.placed = !!d;\n                }\n                super.redraw(animation);\n            }\n            /**\n             * Set markers.\n             * @private\n             * @param {Highcharts.AnnotationControllablePath} item\n             */\n            setMarkers(item) {\n                const itemOptions = item.options, chart = item.chart, defs = chart.options.defs, fill = itemOptions.fill, color = defined(fill) && fill !== 'none' ?\n                    fill :\n                    itemOptions.stroke;\n                const setMarker = function (markerType) {\n                    let markerId = itemOptions[markerType], def, predefinedMarker, key, marker;\n                    if (markerId) {\n                        for (key in defs) { // eslint-disable-line guard-for-in\n                            def = defs[key];\n                            if ((markerId === (def.attributes && def.attributes.id) ||\n                                // Legacy, for\n                                // unit-tests/annotations/annotations-shapes\n                                markerId === def.id) &&\n                                def.tagName === 'marker') {\n                                predefinedMarker = def;\n                                break;\n                            }\n                        }\n                        if (predefinedMarker) {\n                            marker = item[markerType] = chart.renderer\n                                .addMarker((itemOptions.id || uniqueKey()) + '-' + markerId, merge(predefinedMarker, { color: color }));\n                            item.attr(markerType, marker.getAttribute('id'));\n                        }\n                    }\n                };\n                ['markerStart', 'markerEnd']\n                    .forEach(setMarker);\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        /**\n         * A map object which allows to map options attributes to element attributes\n         *\n         * @name Highcharts.AnnotationControllablePath.attrsMap\n         * @type {Highcharts.Dictionary<string>}\n         */\n        ControllablePath.attrsMap = {\n            dashStyle: 'dashstyle',\n            strokeWidth: 'stroke-width',\n            stroke: 'stroke',\n            fill: 'fill',\n            zIndex: 'zIndex'\n        };\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return ControllablePath;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Controllables/ControllableRect.js', [_modules['Extensions/Annotations/Controllables/Controllable.js'], _modules['Extensions/Annotations/Controllables/ControllablePath.js'], _modules['Core/Utilities.js']], function (Controllable, ControllablePath, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { merge } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * A controllable rect class.\n         *\n         * @requires modules/annotations\n         *\n         * @private\n         * @class\n         * @name Highcharts.AnnotationControllableRect\n         *\n         * @param {Highcharts.Annotation} annotation\n         * An annotation instance.\n         *\n         * @param {Highcharts.AnnotationsShapeOptions} options\n         * A rect's options.\n         *\n         * @param {number} index\n         * Index of the rectangle\n         */\n        class ControllableRect extends Controllable {\n            /* *\n             *\n             *  Constructors\n             *\n             * */\n            constructor(annotation, options, index) {\n                super(annotation, options, index, 'shape');\n                /* *\n                 *\n                 *  Properties\n                 *\n                 * */\n                this.type = 'rect';\n                this.translate = super.translateShape;\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            render(parent) {\n                const attrs = this.attrsFromOptions(this.options);\n                this.graphic = this.annotation.chart.renderer\n                    .rect(0, -9e9, 0, 0)\n                    .attr(attrs)\n                    .add(parent);\n                super.render();\n            }\n            redraw(animation) {\n                if (this.graphic) {\n                    const position = this.anchor(this.points[0]).absolutePosition;\n                    if (position) {\n                        this.graphic[animation ? 'animate' : 'attr']({\n                            x: position.x,\n                            y: position.y,\n                            width: this.options.width,\n                            height: this.options.height\n                        });\n                    }\n                    else {\n                        this.attr({\n                            x: 0,\n                            y: -9e9\n                        });\n                    }\n                    this.graphic.placed = Boolean(position);\n                }\n                super.redraw(animation);\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        /**\n         * A map object which allows to map options attributes to element attributes\n         *\n         * @type {Annotation.ControllableRect.AttrsMap}\n         */\n        ControllableRect.attrsMap = merge(ControllablePath.attrsMap, {\n            width: 'width',\n            height: 'height'\n        });\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return ControllableRect;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Controllables/ControllableCircle.js', [_modules['Extensions/Annotations/Controllables/Controllable.js'], _modules['Extensions/Annotations/Controllables/ControllablePath.js'], _modules['Core/Utilities.js']], function (Controllable, ControllablePath, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { merge } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * A controllable circle class.\n         *\n         * @requires modules/annotations\n         *\n         * @private\n         * @class\n         * @name Highcharts.AnnotationControllableCircle\n         *\n         * @param {Highcharts.Annotation} annotation an annotation instance\n         * @param {Highcharts.AnnotationsShapeOptions} options a shape's options\n         * @param {number} index of the circle\n         */\n        class ControllableCircle extends Controllable {\n            /* *\n             *\n             *  Constructors\n             *\n             * */\n            constructor(annotation, options, index) {\n                super(annotation, options, index, 'shape');\n                /* *\n                 *\n                 *  Properties\n                 *\n                 * */\n                this.type = 'circle';\n                this.translate = super.translateShape;\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            redraw(animation) {\n                if (this.graphic) {\n                    const position = this.anchor(this.points[0]).absolutePosition;\n                    if (position) {\n                        this.graphic[animation ? 'animate' : 'attr']({\n                            x: position.x,\n                            y: position.y,\n                            r: this.options.r\n                        });\n                    }\n                    else {\n                        this.graphic.attr({\n                            x: 0,\n                            y: -9e9\n                        });\n                    }\n                    this.graphic.placed = !!position;\n                }\n                super.redraw.call(this, animation);\n            }\n            /**\n             * @private\n             */\n            render(parent) {\n                const attrs = this.attrsFromOptions(this.options);\n                this.graphic = this.annotation.chart.renderer\n                    .circle(0, -9e9, 0)\n                    .attr(attrs)\n                    .add(parent);\n                super.render();\n            }\n            /**\n             * Set the radius.\n             * @private\n             * @param {number} r\n             *        A radius to be set\n             */\n            setRadius(r) {\n                this.options.r = r;\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        /**\n         * A map object which allows to map options attributes to element\n         * attributes.\n         *\n         * @name Highcharts.AnnotationControllableCircle.attrsMap\n         * @type {Highcharts.Dictionary<string>}\n         */\n        ControllableCircle.attrsMap = merge(ControllablePath.attrsMap, { r: 'r' });\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return ControllableCircle;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Controllables/ControllableEllipse.js', [_modules['Extensions/Annotations/Controllables/Controllable.js'], _modules['Extensions/Annotations/Controllables/ControllablePath.js'], _modules['Core/Utilities.js']], function (Controllable, ControllablePath, U) {\n        /* *\n         *\n         * Author: Pawel Lysy\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { merge, defined } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * A controllable ellipse class.\n         *\n         * @requires modules/annotations\n         *\n         * @private\n         * @class\n         * @name Highcharts.AnnotationControllableEllipse\n         *\n         * @param {Highcharts.Annotation} annotation an annotation instance\n         * @param {Highcharts.AnnotationsShapeOptions} options a shape's options\n         * @param {number} index of the Ellipse\n         */\n        class ControllableEllipse extends Controllable {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(annotation, options, index) {\n                super(annotation, options, index, 'shape');\n                /* *\n                 *\n                 *  Properties\n                 *\n                 * */\n                this.type = 'ellipse';\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            init(annotation, options, index) {\n                if (defined(options.yAxis)) {\n                    options.points.forEach((point) => {\n                        point.yAxis = options.yAxis;\n                    });\n                }\n                if (defined(options.xAxis)) {\n                    options.points.forEach((point) => {\n                        point.xAxis = options.xAxis;\n                    });\n                }\n                super.init(annotation, options, index);\n            }\n            /**\n             * Render the element\n             * @private\n             * @param parent\n             *        Parent SVG element.\n             */\n            render(parent) {\n                this.graphic = this.annotation.chart.renderer.createElement('ellipse')\n                    .attr(this.attrsFromOptions(this.options))\n                    .add(parent);\n                super.render();\n            }\n            /**\n             * Translate the points. Mostly used to handle dragging of the ellipse.\n             * @private\n             */\n            translate(dx, dy) {\n                super.translateShape(dx, dy, true);\n            }\n            /**\n             * Get the distance from the line to the point.\n             * @private\n             * @param point1\n             *        First point which is on the line\n             * @param point2\n             *        Second point\n             * @param x0\n             *        Point's x value from which you want to calculate the distance from\n             * @param y0\n             *        Point's y value from which you want to calculate the distance from\n             */\n            getDistanceFromLine(point1, point2, x0, y0) {\n                return Math.abs((point2.y - point1.y) * x0 - (point2.x - point1.x) * y0 +\n                    point2.x * point1.y - point2.y * point1.x) / Math.sqrt((point2.y - point1.y) * (point2.y - point1.y) +\n                    (point2.x - point1.x) * (point2.x - point1.x));\n            }\n            /**\n             * The fuction calculates the svg attributes of the ellipse, and returns all\n             * parameters neccessary to draw the ellipse.\n             * @private\n             * @param position\n             *        Absolute position of the first point in points array\n             * @param position2\n             *        Absolute position of the second point in points array\n             */\n            getAttrs(position, position2) {\n                const x1 = position.x, y1 = position.y, x2 = position2.x, y2 = position2.y, cx = (x1 + x2) / 2, cy = (y1 + y2) / 2, rx = Math.sqrt((x1 - x2) * (x1 - x2) / 4 + (y1 - y2) * (y1 - y2) / 4), tan = (y2 - y1) / (x2 - x1);\n                let angle = Math.atan(tan) * 180 / Math.PI;\n                if (cx < x1) {\n                    angle += 180;\n                }\n                const ry = this.getRY();\n                return { cx, cy, rx, ry, angle };\n            }\n            /**\n             * Get the value of minor radius of the ellipse.\n             * @private\n             */\n            getRY() {\n                const yAxis = this.getYAxis();\n                return defined(yAxis) ?\n                    Math.abs(yAxis.toPixels(this.options.ry) - yAxis.toPixels(0)) :\n                    this.options.ry;\n            }\n            /**\n             * Get the yAxis object to which the ellipse is pinned.\n             * @private\n             */\n            getYAxis() {\n                const yAxisIndex = this.options.yAxis;\n                return this.chart.yAxis[yAxisIndex];\n            }\n            /**\n             * Get the absolute coordinates of the MockPoint\n             * @private\n             * @param point\n             *        MockPoint that is added through options\n             */\n            getAbsolutePosition(point) {\n                return this.anchor(point).absolutePosition;\n            }\n            /**\n             * Redraw the element\n             * @private\n             * @param animation\n             *        Display an annimation\n             */\n            redraw(animation) {\n                if (this.graphic) {\n                    const position = this.getAbsolutePosition(this.points[0]), position2 = this.getAbsolutePosition(this.points[1]), attrs = this.getAttrs(position, position2);\n                    if (position) {\n                        this.graphic[animation ? 'animate' : 'attr']({\n                            cx: attrs.cx,\n                            cy: attrs.cy,\n                            rx: attrs.rx,\n                            ry: attrs.ry,\n                            rotation: attrs.angle,\n                            rotationOriginX: attrs.cx,\n                            rotationOriginY: attrs.cy\n                        });\n                    }\n                    else {\n                        this.graphic.attr({\n                            x: 0,\n                            y: -9e9\n                        });\n                    }\n                    this.graphic.placed = Boolean(position);\n                }\n                super.redraw(animation);\n            }\n            /**\n             * Set the radius Y.\n             * @private\n             * @param {number} ry\n             *        A radius in y direction to be set\n             */\n            setYRadius(ry) {\n                const shapes = this.annotation.userOptions.shapes;\n                this.options.ry = ry;\n                if (shapes && shapes[0]) {\n                    shapes[0].ry = ry;\n                    shapes[0].ry = ry;\n                }\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        /**\n         * A map object which allows to map options attributes to element\n         * attributes.\n         *\n         * @name Highcharts.AnnotationControllableEllipse.attrsMap\n         * @type {Highcharts.Dictionary<string>}\n         */\n        ControllableEllipse.attrsMap = merge(ControllablePath.attrsMap, {\n            ry: 'ry'\n        });\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return ControllableEllipse;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Controllables/ControllableLabel.js', [_modules['Extensions/Annotations/Controllables/Controllable.js'], _modules['Core/Templating.js'], _modules['Extensions/Annotations/MockPoint.js'], _modules['Core/Utilities.js']], function (Controllable, F, MockPoint, U) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { format } = F;\n        const { extend, isNumber, pick } = U;\n        /* *\n         *\n         *  Constants\n         *\n         * */\n        const composedMembers = [];\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * General symbol definition for labels with connector\n         * @private\n         */\n        function symbolConnector(x, y, w, h, options) {\n            const anchorX = options && options.anchorX, anchorY = options && options.anchorY;\n            let path, yOffset, lateral = w / 2;\n            if (isNumber(anchorX) && isNumber(anchorY)) {\n                path = [['M', anchorX, anchorY]];\n                // Prefer 45 deg connectors\n                yOffset = y - anchorY;\n                if (yOffset < 0) {\n                    yOffset = -h - yOffset;\n                }\n                if (yOffset < w) {\n                    lateral = anchorX < x + (w / 2) ? yOffset : w - yOffset;\n                }\n                // Anchor below label\n                if (anchorY > y + h) {\n                    path.push(['L', x + lateral, y + h]);\n                    // Anchor above label\n                }\n                else if (anchorY < y) {\n                    path.push(['L', x + lateral, y]);\n                    // Anchor left of label\n                }\n                else if (anchorX < x) {\n                    path.push(['L', x, y + h / 2]);\n                    // Anchor right of label\n                }\n                else if (anchorX > x + w) {\n                    path.push(['L', x + w, y + h / 2]);\n                }\n            }\n            return path || [];\n        }\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * A controllable label class.\n         *\n         * @requires modules/annotations\n         *\n         * @private\n         * @class\n         * @name Highcharts.AnnotationControllableLabel\n         *\n         * @param {Highcharts.Annotation} annotation\n         * An annotation instance.\n         * @param {Highcharts.AnnotationsLabelOptions} options\n         * A label's options.\n         * @param {number} index\n         * Index of the label.\n         */\n        class ControllableLabel extends Controllable {\n            /* *\n             *\n             *  Static Functions\n             *\n             * */\n            /**\n             * Returns new aligned position based alignment options and box to align to.\n             * It is almost a one-to-one copy from SVGElement.prototype.align\n             * except it does not use and mutate an element\n             *\n             * @param {Highcharts.AnnotationAlignObject} alignOptions\n             *\n             * @param {Highcharts.BBoxObject} box\n             *\n             * @return {Highcharts.PositionObject}\n             * Aligned position.\n             */\n            static alignedPosition(alignOptions, box) {\n                const align = alignOptions.align, vAlign = alignOptions.verticalAlign;\n                let x = (box.x || 0) + (alignOptions.x || 0), y = (box.y || 0) + (alignOptions.y || 0), alignFactor, vAlignFactor;\n                if (align === 'right') {\n                    alignFactor = 1;\n                }\n                else if (align === 'center') {\n                    alignFactor = 2;\n                }\n                if (alignFactor) {\n                    x += (box.width - (alignOptions.width || 0)) / alignFactor;\n                }\n                if (vAlign === 'bottom') {\n                    vAlignFactor = 1;\n                }\n                else if (vAlign === 'middle') {\n                    vAlignFactor = 2;\n                }\n                if (vAlignFactor) {\n                    y += (box.height - (alignOptions.height || 0)) / vAlignFactor;\n                }\n                return {\n                    x: Math.round(x),\n                    y: Math.round(y)\n                };\n            }\n            static compose(SVGRendererClass) {\n                if (U.pushUnique(composedMembers, SVGRendererClass)) {\n                    const svgRendererProto = SVGRendererClass.prototype;\n                    svgRendererProto.symbols.connector = symbolConnector;\n                }\n            }\n            /**\n             * Returns new alignment options for a label if the label is outside the\n             * plot area. It is almost a one-to-one copy from\n             * Series.prototype.justifyDataLabel except it does not mutate the label and\n             * it works with absolute instead of relative position.\n             */\n            static justifiedOptions(chart, label, alignOptions, alignAttr) {\n                const align = alignOptions.align, verticalAlign = alignOptions.verticalAlign, padding = label.box ? 0 : (label.padding || 0), bBox = label.getBBox(), \n                //\n                options = {\n                    align: align,\n                    verticalAlign: verticalAlign,\n                    x: alignOptions.x,\n                    y: alignOptions.y,\n                    width: label.width,\n                    height: label.height\n                }, \n                //\n                x = (alignAttr.x || 0) - chart.plotLeft, y = (alignAttr.y || 0) - chart.plotTop;\n                let off;\n                // Off left\n                off = x + padding;\n                if (off < 0) {\n                    if (align === 'right') {\n                        options.align = 'left';\n                    }\n                    else {\n                        options.x = (options.x || 0) - off;\n                    }\n                }\n                // Off right\n                off = x + bBox.width - padding;\n                if (off > chart.plotWidth) {\n                    if (align === 'left') {\n                        options.align = 'right';\n                    }\n                    else {\n                        options.x = (options.x || 0) + chart.plotWidth - off;\n                    }\n                }\n                // Off top\n                off = y + padding;\n                if (off < 0) {\n                    if (verticalAlign === 'bottom') {\n                        options.verticalAlign = 'top';\n                    }\n                    else {\n                        options.y = (options.y || 0) - off;\n                    }\n                }\n                // Off bottom\n                off = y + bBox.height - padding;\n                if (off > chart.plotHeight) {\n                    if (verticalAlign === 'top') {\n                        options.verticalAlign = 'bottom';\n                    }\n                    else {\n                        options.y = (options.y || 0) + chart.plotHeight - off;\n                    }\n                }\n                return options;\n            }\n            /* *\n             *\n             *  Constructors\n             *\n             * */\n            constructor(annotation, options, index) {\n                super(annotation, options, index, 'label');\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Translate the point of the label by deltaX and deltaY translations.\n             * The point is the label's anchor.\n             *\n             * @param {number} dx translation for x coordinate\n             * @param {number} dy translation for y coordinate\n             */\n            translatePoint(dx, dy) {\n                super.translatePoint(dx, dy, 0);\n            }\n            /**\n             * Translate x and y position relative to the label's anchor.\n             *\n             * @param {number} dx translation for x coordinate\n             * @param {number} dy translation for y coordinate\n             */\n            translate(dx, dy) {\n                const chart = this.annotation.chart, \n                // Annotation.options\n                labelOptions = this.annotation.userOptions, \n                // Chart.options.annotations\n                annotationIndex = chart.annotations.indexOf(this.annotation), chartAnnotations = chart.options.annotations, chartOptions = chartAnnotations[annotationIndex];\n                if (chart.inverted) {\n                    const temp = dx;\n                    dx = dy;\n                    dy = temp;\n                }\n                // Local options:\n                this.options.x += dx;\n                this.options.y += dy;\n                // Options stored in chart:\n                chartOptions[this.collection][this.index].x = this.options.x;\n                chartOptions[this.collection][this.index].y = this.options.y;\n                labelOptions[this.collection][this.index].x = this.options.x;\n                labelOptions[this.collection][this.index].y = this.options.y;\n            }\n            render(parent) {\n                const options = this.options, attrs = this.attrsFromOptions(options), style = options.style;\n                this.graphic = this.annotation.chart.renderer\n                    .label('', 0, -9999, // #10055\n                options.shape, null, null, options.useHTML, null, 'annotation-label')\n                    .attr(attrs)\n                    .add(parent);\n                if (!this.annotation.chart.styledMode) {\n                    if (style.color === 'contrast') {\n                        style.color = this.annotation.chart.renderer.getContrast(ControllableLabel.shapesWithoutBackground.indexOf(options.shape) > -1 ? '#FFFFFF' : options.backgroundColor);\n                    }\n                    this.graphic\n                        .css(options.style)\n                        .shadow(options.shadow);\n                }\n                if (options.className) {\n                    this.graphic.addClass(options.className);\n                }\n                this.graphic.labelrank = options.labelrank;\n                super.render();\n            }\n            redraw(animation) {\n                const options = this.options, text = this.text || options.format || options.text, label = this.graphic, point = this.points[0];\n                if (!label) {\n                    this.redraw(animation);\n                    return;\n                }\n                label.attr({\n                    text: text ?\n                        format(String(text), point.getLabelConfig(), this.annotation.chart) :\n                        options.formatter.call(point, this)\n                });\n                const anchor = this.anchor(point);\n                const attrs = this.position(anchor);\n                if (attrs) {\n                    label.alignAttr = attrs;\n                    attrs.anchorX = anchor.absolutePosition.x;\n                    attrs.anchorY = anchor.absolutePosition.y;\n                    label[animation ? 'animate' : 'attr'](attrs);\n                }\n                else {\n                    label.attr({\n                        x: 0,\n                        y: -9999 // #10055\n                    });\n                }\n                label.placed = !!attrs;\n                super.redraw(animation);\n            }\n            /**\n             * All basic shapes don't support alignTo() method except label.\n             * For a controllable label, we need to subtract translation from\n             * options.\n             */\n            anchor(_point) {\n                const anchor = super.anchor.apply(this, arguments), x = this.options.x || 0, y = this.options.y || 0;\n                anchor.absolutePosition.x -= x;\n                anchor.absolutePosition.y -= y;\n                anchor.relativePosition.x -= x;\n                anchor.relativePosition.y -= y;\n                return anchor;\n            }\n            /**\n             * Returns the label position relative to its anchor.\n             */\n            position(anchor) {\n                const item = this.graphic, chart = this.annotation.chart, tooltip = chart.tooltip, point = this.points[0], itemOptions = this.options, anchorAbsolutePosition = anchor.absolutePosition, anchorRelativePosition = anchor.relativePosition;\n                let itemPosition, alignTo, itemPosRelativeX, itemPosRelativeY, showItem = point.series.visible &&\n                    MockPoint.prototype.isInsidePlot.call(point);\n                if (item && showItem) {\n                    const { width = 0, height = 0 } = item;\n                    if (itemOptions.distance && tooltip) {\n                        itemPosition = tooltip.getPosition.call({\n                            chart,\n                            distance: pick(itemOptions.distance, 16),\n                            getPlayingField: tooltip.getPlayingField\n                        }, width, height, {\n                            plotX: anchorRelativePosition.x,\n                            plotY: anchorRelativePosition.y,\n                            negative: point.negative,\n                            ttBelow: point.ttBelow,\n                            h: (anchorRelativePosition.height ||\n                                anchorRelativePosition.width)\n                        });\n                    }\n                    else if (itemOptions.positioner) {\n                        itemPosition = itemOptions.positioner.call(this);\n                    }\n                    else {\n                        alignTo = {\n                            x: anchorAbsolutePosition.x,\n                            y: anchorAbsolutePosition.y,\n                            width: 0,\n                            height: 0\n                        };\n                        itemPosition = ControllableLabel.alignedPosition(extend(itemOptions, {\n                            width,\n                            height\n                        }), alignTo);\n                        if (this.options.overflow === 'justify') {\n                            itemPosition = ControllableLabel.alignedPosition(ControllableLabel.justifiedOptions(chart, item, itemOptions, itemPosition), alignTo);\n                        }\n                    }\n                    if (itemOptions.crop) {\n                        itemPosRelativeX = itemPosition.x - chart.plotLeft;\n                        itemPosRelativeY = itemPosition.y - chart.plotTop;\n                        showItem =\n                            chart.isInsidePlot(itemPosRelativeX, itemPosRelativeY) &&\n                                chart.isInsidePlot(itemPosRelativeX + width, itemPosRelativeY + height);\n                    }\n                }\n                return showItem ? itemPosition : null;\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        /**\n         * A map object which allows to map options attributes to element attributes\n         *\n         * @type {Highcharts.Dictionary<string>}\n         */\n        ControllableLabel.attrsMap = {\n            backgroundColor: 'fill',\n            borderColor: 'stroke',\n            borderWidth: 'stroke-width',\n            zIndex: 'zIndex',\n            borderRadius: 'r',\n            padding: 'padding'\n        };\n        /**\n         * Shapes which do not have background - the object is used for proper\n         * setting of the contrast color.\n         *\n         * @type {Array<string>}\n         */\n        ControllableLabel.shapesWithoutBackground = ['connector'];\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return ControllableLabel;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Controllables/ControllableImage.js', [_modules['Extensions/Annotations/Controllables/Controllable.js'], _modules['Extensions/Annotations/Controllables/ControllableLabel.js']], function (Controllable, ControllableLabel) {\n        /* *\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * A controllable image class.\n         *\n         * @requires modules/annotations\n         *\n         * @private\n         * @class\n         * @name Highcharts.AnnotationControllableImage\n         *\n         * @param {Highcharts.Annotation} annotation\n         * An annotation instance.\n         *\n         * @param {Highcharts.AnnotationsShapeOptions} options\n         * A controllable's options.\n         *\n         * @param {number} index\n         * Index of the image.\n         */\n        class ControllableImage extends Controllable {\n            /* *\n             *\n             *  Constructors\n             *\n             * */\n            constructor(annotation, options, index) {\n                super(annotation, options, index, 'shape');\n                /* *\n                 *\n                 *  Properties\n                 *\n                 * */\n                this.type = 'image';\n                this.translate = super.translateShape;\n            }\n            render(parent) {\n                const attrs = this.attrsFromOptions(this.options), options = this.options;\n                this.graphic = this.annotation.chart.renderer\n                    .image(options.src, 0, -9e9, options.width, options.height)\n                    .attr(attrs)\n                    .add(parent);\n                this.graphic.width = options.width;\n                this.graphic.height = options.height;\n                super.render();\n            }\n            redraw(animation) {\n                if (this.graphic) {\n                    const anchor = this.anchor(this.points[0]), position = ControllableLabel.prototype.position.call(this, anchor);\n                    if (position) {\n                        this.graphic[animation ? 'animate' : 'attr']({\n                            x: position.x,\n                            y: position.y\n                        });\n                    }\n                    else {\n                        this.graphic.attr({\n                            x: 0,\n                            y: -9e9\n                        });\n                    }\n                    this.graphic.placed = Boolean(position);\n                }\n                super.redraw(animation);\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        /**\n         * A map object which allows to map options attributes to element attributes\n         *\n         * @name Highcharts.AnnotationControllableImage.attrsMap\n         * @type {Highcharts.Dictionary<string>}\n         */\n        ControllableImage.attrsMap = {\n            width: 'width',\n            height: 'height',\n            zIndex: 'zIndex'\n        };\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return ControllableImage;\n    });\n    _registerModule(_modules, 'Core/Chart/ChartNavigationComposition.js', [], function () {\n        /**\n         *\n         *  (c) 2010-2021 Pawe Fus\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        /* *\n         *\n         *  Composition\n         *\n         * */\n        var ChartNavigationComposition;\n        (function (ChartNavigationComposition) {\n            /* *\n             *\n             *  Declarations\n             *\n             * */\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /* eslint-disable valid-jsdoc */\n            /**\n             * @private\n             */\n            function compose(chart) {\n                if (!chart.navigation) {\n                    chart.navigation = new Additions(chart);\n                }\n                return chart;\n            }\n            ChartNavigationComposition.compose = compose;\n            /* *\n             *\n             *  Class\n             *\n             * */\n            /**\n             * Initializes `chart.navigation` object which delegates `update()` methods\n             * to all other common classes (used in exporting and navigationBindings).\n             * @private\n             */\n            class Additions {\n                /* *\n                 *\n                 *  Constructor\n                 *\n                 * */\n                constructor(chart) {\n                    this.updates = [];\n                    this.chart = chart;\n                }\n                /* *\n                 *\n                 *  Functions\n                 *\n                 * */\n                /**\n                 * Registers an `update()` method in the `chart.navigation` object.\n                 *\n                 * @private\n                 * @param {UpdateFunction} updateFn\n                 * The `update()` method that will be called in `chart.update()`.\n                 */\n                addUpdate(updateFn) {\n                    this.chart.navigation.updates.push(updateFn);\n                }\n                /**\n                 * @private\n                 */\n                update(options, redraw) {\n                    this.updates.forEach((updateFn) => {\n                        updateFn.call(this.chart, options, redraw);\n                    });\n                }\n            }\n            ChartNavigationComposition.Additions = Additions;\n        })(ChartNavigationComposition || (ChartNavigationComposition = {}));\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return ChartNavigationComposition;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/NavigationBindingsUtilities.js', [_modules['Core/Utilities.js']], function (U) {\n        /* *\n         *\n         *  (c) 2009-2021 Highsoft, Black Label\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { defined, isNumber, pick } = U;\n        /* *\n         *\n         *  Constants\n         *\n         * */\n        /**\n         * Define types for editable fields per annotation. There is no need to define\n         * numbers, because they won't change their type to string.\n         * @private\n         */\n        const annotationsFieldsTypes = {\n            backgroundColor: 'string',\n            borderColor: 'string',\n            borderRadius: 'string',\n            color: 'string',\n            fill: 'string',\n            fontSize: 'string',\n            labels: 'string',\n            name: 'string',\n            stroke: 'string',\n            title: 'string'\n        };\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * Returns the first xAxis or yAxis that was clicked with its value.\n         *\n         * @private\n         *\n         * @param {Array<Highcharts.PointerAxisCoordinateObject>} coords\n         *        All the chart's x or y axes with a current pointer's axis value.\n         *\n         * @return {Highcharts.PointerAxisCoordinateObject}\n         *         Object with a first found axis and its value that pointer\n         *         is currently pointing.\n         */\n        function getAssignedAxis(coords) {\n            return coords.filter((coord) => {\n                const extremes = coord.axis.getExtremes(), axisMin = extremes.min, axisMax = extremes.max, \n                // Correct axis edges when axis has series\n                // with pointRange (like column)\n                minPointOffset = pick(coord.axis.minPointOffset, 0);\n                return isNumber(axisMin) && isNumber(axisMax) &&\n                    coord.value >= (axisMin - minPointOffset) &&\n                    coord.value <= (axisMax + minPointOffset) &&\n                    // don't count navigator axis\n                    !coord.axis.options.isInternal;\n            })[0]; // If the axes overlap, return the first axis that was found.\n        }\n        /**\n         * Get field type according to value\n         *\n         * @private\n         *\n         * @param {'boolean'|'number'|'string'} value\n         * Atomic type (one of: string, number, boolean)\n         *\n         * @return {'checkbox'|'number'|'text'}\n         * Field type (one of: text, number, checkbox)\n         */\n        function getFieldType(key, value) {\n            const predefinedType = annotationsFieldsTypes[key];\n            let fieldType = typeof value;\n            if (defined(predefinedType)) {\n                fieldType = predefinedType;\n            }\n            return {\n                'string': 'text',\n                'number': 'number',\n                'boolean': 'checkbox'\n            }[fieldType];\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        const NavigationBindingUtilities = {\n            annotationsFieldsTypes,\n            getAssignedAxis,\n            getFieldType\n        };\n\n        return NavigationBindingUtilities;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/NavigationBindingsDefaults.js', [_modules['Extensions/Annotations/NavigationBindingsUtilities.js'], _modules['Core/Utilities.js']], function (NBU, U) {\n        /* *\n         *\n         *  (c) 2009-2021 Highsoft, Black Label\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { getAssignedAxis } = NBU;\n        const { isNumber, merge } = U;\n        /* *\n         *\n         *  Constants\n         *\n         * */\n        /**\n         * @optionparent lang\n         */\n        const lang = {\n            /**\n             * Configure the Popup strings in the chart. Requires the\n             * `annotations.js` or `annotations-advanced.src.js` module to be\n             * loaded.\n             * @since   7.0.0\n             * @product highcharts highstock\n             */\n            navigation: {\n                /**\n                 * Translations for all field names used in popup.\n                 *\n                 * @product highcharts highstock\n                 */\n                popup: {\n                    simpleShapes: 'Simple shapes',\n                    lines: 'Lines',\n                    circle: 'Circle',\n                    ellipse: 'Ellipse',\n                    rectangle: 'Rectangle',\n                    label: 'Label',\n                    shapeOptions: 'Shape options',\n                    typeOptions: 'Details',\n                    fill: 'Fill',\n                    format: 'Text',\n                    strokeWidth: 'Line width',\n                    stroke: 'Line color',\n                    title: 'Title',\n                    name: 'Name',\n                    labelOptions: 'Label options',\n                    labels: 'Labels',\n                    backgroundColor: 'Background color',\n                    backgroundColors: 'Background colors',\n                    borderColor: 'Border color',\n                    borderRadius: 'Border radius',\n                    borderWidth: 'Border width',\n                    style: 'Style',\n                    padding: 'Padding',\n                    fontSize: 'Font size',\n                    color: 'Color',\n                    height: 'Height',\n                    shapes: 'Shape options'\n                }\n            }\n        };\n        /**\n         * @optionparent navigation\n         * @product      highcharts highstock\n         */\n        const navigation = {\n            /**\n             * A CSS class name where all bindings will be attached to. Multiple\n             * charts on the same page should have separate class names to prevent\n             * duplicating events.\n             *\n             * Default value of versions < 7.0.4 `highcharts-bindings-wrapper`\n             *\n             * @since     7.0.0\n             * @type      {string}\n             */\n            bindingsClassName: 'highcharts-bindings-container',\n            /**\n             * Bindings definitions for custom HTML buttons. Each binding implements\n             * simple event-driven interface:\n             *\n             * - `className`: classname used to bind event to\n             *\n             * - `init`: initial event, fired on button click\n             *\n             * - `start`: fired on first click on a chart\n             *\n             * - `steps`: array of sequential events fired one after another on each\n             *   of users clicks\n             *\n             * - `end`: last event to be called after last step event\n             *\n             * @type         {Highcharts.Dictionary<Highcharts.NavigationBindingsOptionsObject>|*}\n             *\n             * @sample {highstock} stock/stocktools/stocktools-thresholds\n             *               Custom bindings\n             * @sample {highcharts} highcharts/annotations/bindings/\n             *               Simple binding\n             * @sample {highcharts} highcharts/annotations/bindings-custom-annotation/\n             *               Custom annotation binding\n             *\n             * @since        7.0.0\n             * @requires     modules/annotations\n             * @product      highcharts highstock\n             */\n            bindings: {\n                /**\n                 * A circle annotation bindings. Includes `start` and one event in\n                 * `steps` array.\n                 *\n                 * @type    {Highcharts.NavigationBindingsOptionsObject}\n                 * @default {\"className\": \"highcharts-circle-annotation\", \"start\": function() {}, \"steps\": [function() {}], \"annotationsOptions\": {}}\n                 */\n                circleAnnotation: {\n                    /** @ignore-option */\n                    className: 'highcharts-circle-annotation',\n                    /** @ignore-option */\n                    start: function (e) {\n                        const coords = this.chart.pointer.getCoordinates(e), coordsX = getAssignedAxis(coords.xAxis), coordsY = getAssignedAxis(coords.yAxis), navigation = this.chart.options.navigation;\n                        // Exit if clicked out of axes area\n                        if (!coordsX || !coordsY) {\n                            return;\n                        }\n                        return this.chart.addAnnotation(merge({\n                            langKey: 'circle',\n                            type: 'basicAnnotation',\n                            shapes: [{\n                                    type: 'circle',\n                                    point: {\n                                        x: coordsX.value,\n                                        y: coordsY.value,\n                                        xAxis: coordsX.axis.index,\n                                        yAxis: coordsY.axis.index\n                                    },\n                                    r: 5\n                                }]\n                        }, navigation.annotationsOptions, navigation.bindings.circleAnnotation\n                            .annotationsOptions));\n                    },\n                    /** @ignore-option */\n                    steps: [\n                        function (e, annotation) {\n                            const shapes = annotation.options.shapes, mockPointOpts = ((shapes && shapes[0] && shapes[0].point) ||\n                                {});\n                            let distance;\n                            if (isNumber(mockPointOpts.xAxis) &&\n                                isNumber(mockPointOpts.yAxis)) {\n                                const inverted = this.chart.inverted, x = this.chart.xAxis[mockPointOpts.xAxis]\n                                    .toPixels(mockPointOpts.x), y = this.chart.yAxis[mockPointOpts.yAxis]\n                                    .toPixels(mockPointOpts.y);\n                                distance = Math.max(Math.sqrt(Math.pow(inverted ? y - e.chartX : x - e.chartX, 2) +\n                                    Math.pow(inverted ? x - e.chartY : y - e.chartY, 2)), 5);\n                            }\n                            annotation.update({\n                                shapes: [{\n                                        r: distance\n                                    }]\n                            });\n                        }\n                    ]\n                },\n                /**\n                 * A ellipse annotation bindings. Includes `start` and two events in\n                 * `steps` array. First updates the second point, responsible for a\n                 * rx width, and second updates the ry width.\n                 *\n                 * @type    {Highcharts.NavigationBindingsOptionsObject}\n                 * @default {\"className\": \"highcharts-ellipse-annotation\", \"start\": function() {}, \"steps\": [function() {}], \"annotationsOptions\": {}}\n                 */\n                ellipseAnnotation: {\n                    className: 'highcharts-ellipse-annotation',\n                    start: function (e) {\n                        const coords = this.chart.pointer.getCoordinates(e), coordsX = getAssignedAxis(coords.xAxis), coordsY = getAssignedAxis(coords.yAxis), navigation = this.chart.options.navigation;\n                        if (!coordsX || !coordsY) {\n                            return;\n                        }\n                        return this.chart.addAnnotation(merge({\n                            langKey: 'ellipse',\n                            type: 'basicAnnotation',\n                            shapes: [\n                                {\n                                    type: 'ellipse',\n                                    xAxis: coordsX.axis.index,\n                                    yAxis: coordsY.axis.index,\n                                    points: [{\n                                            x: coordsX.value,\n                                            y: coordsY.value\n                                        }, {\n                                            x: coordsX.value,\n                                            y: coordsY.value\n                                        }],\n                                    ry: 1\n                                }\n                            ]\n                        }, navigation.annotationsOptions, navigation.bindings.ellipseAnnotation\n                            .annotationOptions));\n                    },\n                    steps: [\n                        function (e, annotation) {\n                            const target = annotation.shapes[0], position = target.getAbsolutePosition(target.points[1]);\n                            target.translatePoint(e.chartX - position.x, e.chartY - position.y, 1);\n                            target.redraw(false);\n                        },\n                        function (e, annotation) {\n                            const target = annotation.shapes[0], position = target.getAbsolutePosition(target.points[0]), position2 = target.getAbsolutePosition(target.points[1]), newR = target.getDistanceFromLine(position, position2, e.chartX, e.chartY), yAxis = target.getYAxis(), newRY = Math.abs(yAxis.toValue(0) - yAxis.toValue(newR));\n                            target.setYRadius(newRY);\n                            target.redraw(false);\n                        }\n                    ]\n                },\n                /**\n                 * A rectangle annotation bindings. Includes `start` and one event\n                 * in `steps` array.\n                 *\n                 * @type    {Highcharts.NavigationBindingsOptionsObject}\n                 * @default {\"className\": \"highcharts-rectangle-annotation\", \"start\": function() {}, \"steps\": [function() {}], \"annotationsOptions\": {}}\n                 */\n                rectangleAnnotation: {\n                    /** @ignore-option */\n                    className: 'highcharts-rectangle-annotation',\n                    /** @ignore-option */\n                    start: function (e) {\n                        const coords = this.chart.pointer.getCoordinates(e), coordsX = getAssignedAxis(coords.xAxis), coordsY = getAssignedAxis(coords.yAxis);\n                        // Exit if clicked out of axes area\n                        if (!coordsX || !coordsY) {\n                            return;\n                        }\n                        const x = coordsX.value, y = coordsY.value, xAxis = coordsX.axis.index, yAxis = coordsY.axis.index, navigation = this.chart.options.navigation;\n                        return this.chart.addAnnotation(merge({\n                            langKey: 'rectangle',\n                            type: 'basicAnnotation',\n                            shapes: [{\n                                    type: 'path',\n                                    points: [\n                                        { xAxis, yAxis, x, y },\n                                        { xAxis, yAxis, x, y },\n                                        { xAxis, yAxis, x, y },\n                                        { xAxis, yAxis, x, y },\n                                        { command: 'Z' }\n                                    ]\n                                }]\n                        }, navigation\n                            .annotationsOptions, navigation\n                            .bindings\n                            .rectangleAnnotation\n                            .annotationsOptions));\n                    },\n                    /** @ignore-option */\n                    steps: [\n                        function (e, annotation) {\n                            const shapes = annotation.options.shapes, points = ((shapes && shapes[0] && shapes[0].points) ||\n                                []), coords = this.chart.pointer.getCoordinates(e), coordsX = getAssignedAxis(coords.xAxis), coordsY = getAssignedAxis(coords.yAxis);\n                            if (coordsX && coordsY) {\n                                const x = coordsX.value, y = coordsY.value;\n                                // Top right point\n                                points[1].x = x;\n                                // Bottom right point (cursor position)\n                                points[2].x = x;\n                                points[2].y = y;\n                                // Bottom left\n                                points[3].y = y;\n                                annotation.update({\n                                    shapes: [{\n                                            points: points\n                                        }]\n                                });\n                            }\n                        }\n                    ]\n                },\n                /**\n                 * A label annotation bindings. Includes `start` event only.\n                 *\n                 * @type    {Highcharts.NavigationBindingsOptionsObject}\n                 * @default {\"className\": \"highcharts-label-annotation\", \"start\": function() {}, \"steps\": [function() {}], \"annotationsOptions\": {}}\n                 */\n                labelAnnotation: {\n                    /** @ignore-option */\n                    className: 'highcharts-label-annotation',\n                    /** @ignore-option */\n                    start: function (e) {\n                        const coords = this.chart.pointer.getCoordinates(e), coordsX = getAssignedAxis(coords.xAxis), coordsY = getAssignedAxis(coords.yAxis), navigation = this.chart.options.navigation;\n                        // Exit if clicked out of axes area\n                        if (!coordsX || !coordsY) {\n                            return;\n                        }\n                        return this.chart.addAnnotation(merge({\n                            langKey: 'label',\n                            type: 'basicAnnotation',\n                            labelOptions: {\n                                format: '{y:.2f}',\n                                overflow: 'none',\n                                crop: true\n                            },\n                            labels: [{\n                                    point: {\n                                        xAxis: coordsX.axis.index,\n                                        yAxis: coordsY.axis.index,\n                                        x: coordsX.value,\n                                        y: coordsY.value\n                                    }\n                                }]\n                        }, navigation\n                            .annotationsOptions, navigation\n                            .bindings\n                            .labelAnnotation\n                            .annotationsOptions));\n                    }\n                }\n            },\n            /**\n             * Path where Highcharts will look for icons. Change this to use icons\n             * from a different server.\n             *\n             * @type      {string}\n             * @default   https://code.highcharts.com/11.2.0/gfx/stock-icons/\n             * @since     7.1.3\n             * @apioption navigation.iconsURL\n             */\n            /**\n             * A `showPopup` event. Fired when selecting for example an annotation.\n             *\n             * @type      {Function}\n             * @apioption navigation.events.showPopup\n             */\n            /**\n             * A `closePopup` event. Fired when Popup should be hidden, for example\n             * when clicking on an annotation again.\n             *\n             * @type      {Function}\n             * @apioption navigation.events.closePopup\n             */\n            /**\n             * Event fired on a button click.\n             *\n             * @type      {Function}\n             * @sample    highcharts/annotations/gui/\n             *            Change icon in a dropddown on event\n             * @sample    highcharts/annotations/gui-buttons/\n             *            Change button class on event\n             * @apioption navigation.events.selectButton\n             */\n            /**\n             * Event fired when button state should change, for example after\n             * adding an annotation.\n             *\n             * @type      {Function}\n             * @sample    highcharts/annotations/gui/\n             *            Change icon in a dropddown on event\n             * @sample    highcharts/annotations/gui-buttons/\n             *            Change button class on event\n             * @apioption navigation.events.deselectButton\n             */\n            /**\n             * Events to communicate between Stock Tools and custom GUI.\n             *\n             * @since        7.0.0\n             * @product      highcharts highstock\n             * @optionparent navigation.events\n             */\n            events: {},\n            /**\n             * Additional options to be merged into all annotations.\n             *\n             * @sample stock/stocktools/navigation-annotation-options\n             *         Set red color of all line annotations\n             *\n             * @type      {Highcharts.AnnotationsOptions}\n             * @extends   annotations\n             * @exclude   crookedLine, elliottWave, fibonacci, infinityLine,\n             *            measure, pitchfork, tunnel, verticalLine, basicAnnotation\n             * @requires     modules/annotations\n             * @apioption navigation.annotationsOptions\n             */\n            annotationsOptions: {\n                animation: {\n                    defer: 0\n                }\n            }\n        };\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        const NavigationBindingDefaults = {\n            lang,\n            navigation\n        };\n\n        return NavigationBindingDefaults;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/NavigationBindings.js', [_modules['Core/Chart/ChartNavigationComposition.js'], _modules['Core/Defaults.js'], _modules['Core/Templating.js'], _modules['Core/Globals.js'], _modules['Extensions/Annotations/NavigationBindingsDefaults.js'], _modules['Extensions/Annotations/NavigationBindingsUtilities.js'], _modules['Core/Utilities.js']], function (ChartNavigationComposition, D, F, H, NavigationBindingDefaults, NBU, U) {\n        /* *\n         *\n         *  (c) 2009-2021 Highsoft, Black Label\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { setOptions } = D;\n        const { format } = F;\n        const { doc, win } = H;\n        const { getFieldType } = NBU;\n        const { addEvent, attr, defined, fireEvent, isArray, isFunction, isNumber, isObject, merge, objectEach, pick } = U;\n        /* *\n         *\n         *  Constants\n         *\n         * */\n        const composedMembers = [];\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * IE 9-11 polyfill for Element.closest():\n         * @private\n         */\n        function closestPolyfill(el, s) {\n            const ElementProto = win.Element.prototype, elementMatches = ElementProto.matches ||\n                ElementProto.msMatchesSelector ||\n                ElementProto.webkitMatchesSelector;\n            let ret = null;\n            if (ElementProto.closest) {\n                ret = ElementProto.closest.call(el, s);\n            }\n            else {\n                do {\n                    if (elementMatches.call(el, s)) {\n                        return el;\n                    }\n                    el = el.parentElement || el.parentNode;\n                } while (el !== null && el.nodeType === 1);\n            }\n            return ret;\n        }\n        /**\n         * @private\n         */\n        function onAnnotationRemove() {\n            if (this.chart.navigationBindings) {\n                this.chart.navigationBindings.deselectAnnotation();\n            }\n        }\n        /**\n         * @private\n         */\n        function onChartDestroy() {\n            if (this.navigationBindings) {\n                this.navigationBindings.destroy();\n            }\n        }\n        /**\n         * @private\n         */\n        function onChartLoad() {\n            const options = this.options;\n            if (options && options.navigation && options.navigation.bindings) {\n                this.navigationBindings = new NavigationBindings(this, options.navigation);\n                this.navigationBindings.initEvents();\n                this.navigationBindings.initUpdate();\n            }\n        }\n        /**\n         * @private\n         */\n        function onChartRender() {\n            const navigationBindings = this.navigationBindings, disabledClassName = 'highcharts-disabled-btn';\n            if (this && navigationBindings) {\n                // Check if the buttons should be enabled/disabled based on\n                // visible series.\n                let buttonsEnabled = false;\n                this.series.forEach((series) => {\n                    if (!series.options.isInternal && series.visible) {\n                        buttonsEnabled = true;\n                    }\n                });\n                if (this.navigationBindings &&\n                    this.navigationBindings.container &&\n                    this.navigationBindings.container[0]) {\n                    const container = this.navigationBindings.container[0];\n                    objectEach(navigationBindings.boundClassNames, (value, key) => {\n                        // Get the HTML element coresponding to the className taken\n                        // from StockToolsBindings.\n                        const buttonNode = container.querySelectorAll('.' + key);\n                        if (buttonNode) {\n                            for (let i = 0; i < buttonNode.length; i++) {\n                                const button = buttonNode[i], cls = button.className;\n                                if (value.noDataState === 'normal') {\n                                    // If button has noDataState: 'normal', and has\n                                    // disabledClassName, remove this className.\n                                    if (cls.indexOf(disabledClassName) !== -1) {\n                                        button.classList.remove(disabledClassName);\n                                    }\n                                }\n                                else if (!buttonsEnabled) {\n                                    if (cls.indexOf(disabledClassName) === -1) {\n                                        button.className += ' ' + disabledClassName;\n                                    }\n                                }\n                                else {\n                                    // Enable all buttons by deleting the className.\n                                    if (cls.indexOf(disabledClassName) !== -1) {\n                                        button.classList.remove(disabledClassName);\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n            }\n        }\n        /**\n         * @private\n         */\n        function onNavigationBindingsClosePopup() {\n            this.deselectAnnotation();\n        }\n        /**\n         * @private\n         */\n        function onNavigationBindingsDeselectButton() {\n            this.selectedButtonElement = null;\n        }\n        /**\n         * Show edit-annotation form:\n         * @private\n         */\n        function selectableAnnotation(annotationType) {\n            const originalClick = annotationType.prototype.defaultOptions.events &&\n                annotationType.prototype.defaultOptions.events.click;\n            /**\n             * Select and show popup\n             * @private\n             */\n            function selectAndShowPopup(eventArguments) {\n                const annotation = this, navigation = annotation.chart.navigationBindings, prevAnnotation = navigation.activeAnnotation;\n                if (originalClick) {\n                    originalClick.call(annotation, eventArguments);\n                }\n                if (prevAnnotation !== annotation) {\n                    // Select current:\n                    navigation.deselectAnnotation();\n                    navigation.activeAnnotation = annotation;\n                    annotation.setControlPointsVisibility(true);\n                    fireEvent(navigation, 'showPopup', {\n                        annotation: annotation,\n                        formType: 'annotation-toolbar',\n                        options: navigation.annotationToFields(annotation),\n                        onSubmit: function (data) {\n                            if (data.actionType === 'remove') {\n                                navigation.activeAnnotation = false;\n                                navigation.chart.removeAnnotation(annotation);\n                            }\n                            else {\n                                const config = {};\n                                navigation.fieldsToOptions(data.fields, config);\n                                navigation.deselectAnnotation();\n                                const typeOptions = config.typeOptions;\n                                if (annotation.options.type === 'measure') {\n                                    // Manually disable crooshars according to\n                                    // stroke width of the shape:\n                                    typeOptions.crosshairY.enabled = (typeOptions.crosshairY\n                                        .strokeWidth !== 0);\n                                    typeOptions.crosshairX.enabled = (typeOptions.crosshairX\n                                        .strokeWidth !== 0);\n                                }\n                                annotation.update(config);\n                            }\n                        }\n                    });\n                }\n                else {\n                    // Deselect current:\n                    fireEvent(navigation, 'closePopup');\n                }\n                // Let bubble event to chart.click:\n                eventArguments.activeAnnotation = true;\n            }\n            // #18276, show popup on touchend, but not on touchmove\n            let touchStartX, touchStartY;\n            function saveCoords(e) {\n                touchStartX = e.touches[0].clientX;\n                touchStartY = e.touches[0].clientY;\n            }\n            function checkForTouchmove(e) {\n                const hasMoved = touchStartX ? Math.sqrt(Math.pow(touchStartX - e.changedTouches[0].clientX, 2) +\n                    Math.pow(touchStartY - e.changedTouches[0].clientY, 2)) >= 4 : false;\n                if (!hasMoved) {\n                    selectAndShowPopup.call(this, e);\n                }\n            }\n            merge(true, annotationType.prototype.defaultOptions.events, {\n                click: selectAndShowPopup,\n                touchstart: saveCoords,\n                touchend: checkForTouchmove\n            });\n        }\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * @private\n         */\n        class NavigationBindings {\n            /* *\n             *\n             *  Static Functions\n             *\n             * */\n            static compose(AnnotationClass, ChartClass) {\n                if (U.pushUnique(composedMembers, AnnotationClass)) {\n                    addEvent(AnnotationClass, 'remove', onAnnotationRemove);\n                    // Basic shapes:\n                    selectableAnnotation(AnnotationClass);\n                    // Advanced annotations:\n                    objectEach(AnnotationClass.types, (annotationType) => {\n                        selectableAnnotation(annotationType);\n                    });\n                }\n                if (U.pushUnique(composedMembers, ChartClass)) {\n                    addEvent(ChartClass, 'destroy', onChartDestroy);\n                    addEvent(ChartClass, 'load', onChartLoad);\n                    addEvent(ChartClass, 'render', onChartRender);\n                }\n                if (U.pushUnique(composedMembers, NavigationBindings)) {\n                    addEvent(NavigationBindings, 'closePopup', onNavigationBindingsClosePopup);\n                    addEvent(NavigationBindings, 'deselectButton', onNavigationBindingsDeselectButton);\n                }\n                if (U.pushUnique(composedMembers, setOptions)) {\n                    setOptions(NavigationBindingDefaults);\n                }\n            }\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(chart, options) {\n                this.boundClassNames = void 0;\n                this.selectedButton = void 0;\n                this.chart = chart;\n                this.options = options;\n                this.eventsToUnbind = [];\n                this.container =\n                    this.chart.container.getElementsByClassName(this.options.bindingsClassName || '');\n                if (!this.container.length) {\n                    this.container = doc.getElementsByClassName(this.options.bindingsClassName || '');\n                }\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Initi all events conencted to NavigationBindings.\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#initEvents\n             */\n            initEvents() {\n                const navigation = this, chart = navigation.chart, bindingsContainer = navigation.container, options = navigation.options;\n                // Shorthand object for getting events for buttons:\n                navigation.boundClassNames = {};\n                objectEach((options.bindings || {}), (value) => {\n                    navigation.boundClassNames[value.className] = value;\n                });\n                // Handle multiple containers with the same class names:\n                [].forEach.call(bindingsContainer, (subContainer) => {\n                    navigation.eventsToUnbind.push(addEvent(subContainer, 'click', (event) => {\n                        const bindings = navigation.getButtonEvents(subContainer, event);\n                        if (bindings &&\n                            (!bindings.button.classList\n                                .contains('highcharts-disabled-btn'))) {\n                            navigation.bindingsButtonClick(bindings.button, bindings.events, event);\n                        }\n                    }));\n                });\n                objectEach((options.events || {}), (callback, eventName) => {\n                    if (isFunction(callback)) {\n                        navigation.eventsToUnbind.push(addEvent(navigation, eventName, callback, { passive: false }));\n                    }\n                });\n                navigation.eventsToUnbind.push(addEvent(chart.container, 'click', function (e) {\n                    if (!chart.cancelClick &&\n                        chart.isInsidePlot(e.chartX - chart.plotLeft, e.chartY - chart.plotTop, {\n                            visiblePlotOnly: true\n                        })) {\n                        navigation.bindingsChartClick(this, e);\n                    }\n                }));\n                navigation.eventsToUnbind.push(addEvent(chart.container, H.isTouchDevice ? 'touchmove' : 'mousemove', function (e) {\n                    navigation.bindingsContainerMouseMove(this, e);\n                }, H.isTouchDevice ? { passive: false } : void 0));\n            }\n            /**\n             * Common chart.update() delegation, shared between bindings and exporting.\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#initUpdate\n             */\n            initUpdate() {\n                const navigation = this;\n                ChartNavigationComposition\n                    .compose(this.chart).navigation\n                    .addUpdate((options) => {\n                    navigation.update(options);\n                });\n            }\n            /**\n             * Hook for click on a button, method selcts/unselects buttons,\n             * then calls `bindings.init` callback.\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#bindingsButtonClick\n             *\n             * @param {Highcharts.HTMLDOMElement} [button]\n             *        Clicked button\n             *\n             * @param {Object} events\n             *        Events passed down from bindings (`init`, `start`, `step`, `end`)\n             *\n             * @param {Highcharts.PointerEventObject} clickEvent\n             *        Browser's click event\n             */\n            bindingsButtonClick(button, events, clickEvent) {\n                const navigation = this, chart = navigation.chart, svgContainer = chart.renderer.boxWrapper;\n                let shouldEventBeFired = true;\n                if (navigation.selectedButtonElement) {\n                    if (navigation.selectedButtonElement.classList === button.classList) {\n                        shouldEventBeFired = false;\n                    }\n                    fireEvent(navigation, 'deselectButton', { button: navigation.selectedButtonElement });\n                    if (navigation.nextEvent) {\n                        // Remove in-progress annotations adders:\n                        if (navigation.currentUserDetails &&\n                            navigation.currentUserDetails.coll === 'annotations') {\n                            chart.removeAnnotation(navigation.currentUserDetails);\n                        }\n                        navigation.mouseMoveEvent = navigation.nextEvent = false;\n                    }\n                }\n                if (shouldEventBeFired) {\n                    navigation.selectedButton = events;\n                    navigation.selectedButtonElement = button;\n                    fireEvent(navigation, 'selectButton', { button: button });\n                    // Call \"init\" event, for example to open modal window\n                    if (events.init) {\n                        events.init.call(navigation, button, clickEvent);\n                    }\n                    if (events.start || events.steps) {\n                        chart.renderer.boxWrapper.addClass('highcharts-draw-mode');\n                    }\n                }\n                else {\n                    chart.stockTools &&\n                        chart.stockTools.toggleButtonActiveClass(button);\n                    svgContainer.removeClass('highcharts-draw-mode');\n                    navigation.nextEvent = false;\n                    navigation.mouseMoveEvent = false;\n                    navigation.selectedButton = null;\n                }\n            }\n            /**\n             * Hook for click on a chart, first click on a chart calls `start` event,\n             * then on all subsequent clicks iterate over `steps` array.\n             * When finished, calls `end` event.\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#bindingsChartClick\n             *\n             * @param {Highcharts.Chart} chart\n             *        Chart that click was performed on.\n             *\n             * @param {Highcharts.PointerEventObject} clickEvent\n             *        Browser's click event.\n             */\n            bindingsChartClick(chart, clickEvent) {\n                chart = this.chart;\n                const navigation = this, activeAnnotation = navigation.activeAnnotation, selectedButton = navigation.selectedButton, svgContainer = chart.renderer.boxWrapper;\n                if (activeAnnotation) {\n                    // Click outside popups, should close them and deselect the\n                    // annotation\n                    if (!activeAnnotation.cancelClick && // #15729\n                        !clickEvent.activeAnnotation &&\n                        // Element could be removed in the child action, e.g. button\n                        clickEvent.target.parentNode &&\n                        // TO DO: Polyfill for IE11?\n                        !closestPolyfill(clickEvent.target, '.highcharts-popup')) {\n                        fireEvent(navigation, 'closePopup');\n                    }\n                    else if (activeAnnotation.cancelClick) {\n                        // Reset cancelClick after the other event handlers have run\n                        setTimeout(() => {\n                            activeAnnotation.cancelClick = false;\n                        }, 0);\n                    }\n                }\n                if (!selectedButton || !selectedButton.start) {\n                    return;\n                }\n                if (!navigation.nextEvent) {\n                    // Call init method:\n                    navigation.currentUserDetails = selectedButton.start.call(navigation, clickEvent);\n                    // If steps exists (e.g. Annotations), bind them:\n                    if (navigation.currentUserDetails && selectedButton.steps) {\n                        navigation.stepIndex = 0;\n                        navigation.steps = true;\n                        navigation.mouseMoveEvent = navigation.nextEvent =\n                            selectedButton.steps[navigation.stepIndex];\n                    }\n                    else {\n                        fireEvent(navigation, 'deselectButton', { button: navigation.selectedButtonElement });\n                        svgContainer.removeClass('highcharts-draw-mode');\n                        navigation.steps = false;\n                        navigation.selectedButton = null;\n                        // First click is also the last one:\n                        if (selectedButton.end) {\n                            selectedButton.end.call(navigation, clickEvent, navigation.currentUserDetails);\n                        }\n                    }\n                }\n                else {\n                    navigation.nextEvent(clickEvent, navigation.currentUserDetails);\n                    if (navigation.steps) {\n                        navigation.stepIndex++;\n                        if (selectedButton.steps[navigation.stepIndex]) {\n                            // If we have more steps, bind them one by one:\n                            navigation.mouseMoveEvent = navigation.nextEvent = selectedButton.steps[navigation.stepIndex];\n                        }\n                        else {\n                            fireEvent(navigation, 'deselectButton', { button: navigation.selectedButtonElement });\n                            svgContainer.removeClass('highcharts-draw-mode');\n                            // That was the last step, call end():\n                            if (selectedButton.end) {\n                                selectedButton.end.call(navigation, clickEvent, navigation.currentUserDetails);\n                            }\n                            navigation.nextEvent = false;\n                            navigation.mouseMoveEvent = false;\n                            navigation.selectedButton = null;\n                        }\n                    }\n                }\n            }\n            /**\n             * Hook for mouse move on a chart's container. It calls current step.\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#bindingsContainerMouseMove\n             *\n             * @param {Highcharts.HTMLDOMElement} container\n             *        Chart's container.\n             *\n             * @param {global.Event} moveEvent\n             *        Browser's move event.\n             */\n            bindingsContainerMouseMove(_container, moveEvent) {\n                if (this.mouseMoveEvent) {\n                    this.mouseMoveEvent(moveEvent, this.currentUserDetails);\n                }\n            }\n            /**\n             * Translate fields (e.g. `params.period` or `marker.styles.color`) to\n             * Highcharts options object (e.g. `{ params: { period } }`).\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#fieldsToOptions<T>\n             *\n             * @param {Highcharts.Dictionary<string>} fields\n             *        Fields from popup form.\n             *\n             * @param {T} config\n             *        Default config to be modified.\n             *\n             * @return {T}\n             *         Modified config\n             */\n            fieldsToOptions(fields, config) {\n                objectEach(fields, (value, field) => {\n                    const parsedValue = parseFloat(value), path = field.split('.'), pathLength = path.length - 1;\n                    // If it's a number (not \"format\" options), parse it:\n                    if (isNumber(parsedValue) &&\n                        !value.match(/px|em/g) &&\n                        !field.match(/format/g)) {\n                        value = parsedValue;\n                    }\n                    // Remove values like 0\n                    if (value !== 'undefined') {\n                        let parent = config;\n                        path.forEach((name, index) => {\n                            const nextName = pick(path[index + 1], '');\n                            if (pathLength === index) {\n                                // Last index, put value:\n                                parent[name] = value;\n                            }\n                            else if (!parent[name]) {\n                                // Create middle property:\n                                parent[name] = nextName.match(/\\d/g) ? [] : {};\n                                parent = parent[name];\n                            }\n                            else {\n                                // Jump into next property\n                                parent = parent[name];\n                            }\n                        });\n                    }\n                });\n                return config;\n            }\n            /**\n             * Shorthand method to deselect an annotation.\n             *\n             * @function Highcharts.NavigationBindings#deselectAnnotation\n             */\n            deselectAnnotation() {\n                if (this.activeAnnotation) {\n                    this.activeAnnotation.setControlPointsVisibility(false);\n                    this.activeAnnotation = false;\n                }\n            }\n            /**\n             * Generates API config for popup in the same format as options for\n             * Annotation object.\n             *\n             * @function Highcharts.NavigationBindings#annotationToFields\n             *\n             * @param {Highcharts.Annotation} annotation\n             *        Annotations object\n             *\n             * @return {Highcharts.Dictionary<string>}\n             *         Annotation options to be displayed in popup box\n             */\n            annotationToFields(annotation) {\n                const options = annotation.options, editables = NavigationBindings.annotationsEditable, nestedEditables = editables.nestedOptions, type = pick(options.type, options.shapes && options.shapes[0] &&\n                    options.shapes[0].type, options.labels && options.labels[0] &&\n                    options.labels[0].type, 'label'), nonEditables = NavigationBindings.annotationsNonEditable[options.langKey] || [], visualOptions = {\n                    langKey: options.langKey,\n                    type: type\n                };\n                /**\n                 * Nested options traversing. Method goes down to the options and copies\n                 * allowed options (with values) to new object, which is last parameter:\n                 * \"parent\".\n                 *\n                 * @private\n                 *\n                 * @param {*} option\n                 *        Atomic type or object/array\n                 *\n                 * @param {string} key\n                 *        Option name, for example \"visible\" or \"x\", \"y\"\n                 *\n                 * @param {Object} parentEditables\n                 *        Editables from NavigationBindings.annotationsEditable\n                 *\n                 * @param {Object} parent\n                 *        Where new options will be assigned\n                 */\n                function traverse(option, key, parentEditables, parent, parentKey) {\n                    let nextParent;\n                    if (parentEditables &&\n                        defined(option) &&\n                        nonEditables.indexOf(key) === -1 &&\n                        ((parentEditables.indexOf &&\n                            parentEditables.indexOf(key)) >= 0 ||\n                            parentEditables[key] || // nested array\n                            parentEditables === true // simple array\n                        )) {\n                        // Roots:\n                        if (isArray(option)) {\n                            parent[key] = [];\n                            option.forEach((arrayOption, i) => {\n                                if (!isObject(arrayOption)) {\n                                    // Simple arrays, e.g. [String, Number, Boolean]\n                                    traverse(arrayOption, 0, nestedEditables[key], parent[key], key);\n                                }\n                                else {\n                                    // Advanced arrays, e.g. [Object, Object]\n                                    parent[key][i] = {};\n                                    objectEach(arrayOption, (nestedOption, nestedKey) => {\n                                        traverse(nestedOption, nestedKey, nestedEditables[key], parent[key][i], key);\n                                    });\n                                }\n                            });\n                        }\n                        else if (isObject(option)) {\n                            nextParent = {};\n                            if (isArray(parent)) {\n                                parent.push(nextParent);\n                                nextParent[key] = {};\n                                nextParent = nextParent[key];\n                            }\n                            else {\n                                parent[key] = nextParent;\n                            }\n                            objectEach(option, (nestedOption, nestedKey) => {\n                                traverse(nestedOption, nestedKey, key === 0 ?\n                                    parentEditables :\n                                    nestedEditables[key], nextParent, key);\n                            });\n                        }\n                        else {\n                            // Leaf:\n                            if (key === 'format') {\n                                parent[key] = [\n                                    format(option, annotation.labels[0].points[0]).toString(),\n                                    'text'\n                                ];\n                            }\n                            else if (isArray(parent)) {\n                                parent.push([option, getFieldType(parentKey, option)]);\n                            }\n                            else {\n                                parent[key] = [option, getFieldType(key, option)];\n                            }\n                        }\n                    }\n                }\n                objectEach(options, (option, key) => {\n                    if (key === 'typeOptions') {\n                        visualOptions[key] = {};\n                        objectEach(options[key], (typeOption, typeKey) => {\n                            traverse(typeOption, typeKey, nestedEditables, visualOptions[key], typeKey);\n                        });\n                    }\n                    else {\n                        traverse(option, key, editables[type], visualOptions, key);\n                    }\n                });\n                return visualOptions;\n            }\n            /**\n             * Get all class names for all parents in the element. Iterates until finds\n             * main container.\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#getClickedClassNames\n             *\n             * @param {Highcharts.HTMLDOMElement} container\n             * Container that event is bound to.\n             *\n             * @param {global.Event} event\n             * Browser's event.\n             *\n             * @return {Array<Array<string, Highcharts.HTMLDOMElement>>}\n             * Array of class names with corresponding elements\n             */\n            getClickedClassNames(container, event) {\n                let element = event.target, classNames = [], elemClassName;\n                while (element && element.tagName) {\n                    elemClassName = attr(element, 'class');\n                    if (elemClassName) {\n                        classNames = classNames.concat(elemClassName\n                            .split(' ')\n                            // eslint-disable-next-line no-loop-func\n                            .map((name) => ([name, element])));\n                    }\n                    element = element.parentNode;\n                    if (element === container) {\n                        return classNames;\n                    }\n                }\n                return classNames;\n            }\n            /**\n             * Get events bound to a button. It's a custom event delegation to find all\n             * events connected to the element.\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#getButtonEvents\n             *\n             * @param {Highcharts.HTMLDOMElement} container\n             *        Container that event is bound to.\n             *\n             * @param {global.Event} event\n             *        Browser's event.\n             *\n             * @return {Object}\n             *         Object with events (init, start, steps, and end)\n             */\n            getButtonEvents(container, event) {\n                const navigation = this, classNames = this.getClickedClassNames(container, event);\n                let bindings;\n                classNames.forEach((className) => {\n                    if (navigation.boundClassNames[className[0]] && !bindings) {\n                        bindings = {\n                            events: navigation.boundClassNames[className[0]],\n                            button: className[1]\n                        };\n                    }\n                });\n                return bindings;\n            }\n            /**\n             * Bindings are just events, so the whole update process is simply\n             * removing old events and adding new ones.\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#update\n             */\n            update(options) {\n                this.options = merge(true, this.options, options);\n                this.removeEvents();\n                this.initEvents();\n            }\n            /**\n             * Remove all events created in the navigation.\n             *\n             * @private\n             * @function Highcharts.NavigationBindings#removeEvents\n             */\n            removeEvents() {\n                this.eventsToUnbind.forEach((unbinder) => unbinder());\n            }\n            /**\n             * @private\n             * @function Highcharts.NavigationBindings#destroy\n             */\n            destroy() {\n                this.removeEvents();\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        // Define which options from annotations should show up in edit box:\n        NavigationBindings.annotationsEditable = {\n            // `typeOptions` are always available\n            // Nested and shared options:\n            nestedOptions: {\n                labelOptions: ['style', 'format', 'backgroundColor'],\n                labels: ['style'],\n                label: ['style'],\n                style: ['fontSize', 'color'],\n                background: ['fill', 'strokeWidth', 'stroke'],\n                innerBackground: ['fill', 'strokeWidth', 'stroke'],\n                outerBackground: ['fill', 'strokeWidth', 'stroke'],\n                shapeOptions: ['fill', 'strokeWidth', 'stroke'],\n                shapes: ['fill', 'strokeWidth', 'stroke'],\n                line: ['strokeWidth', 'stroke'],\n                backgroundColors: [true],\n                connector: ['fill', 'strokeWidth', 'stroke'],\n                crosshairX: ['strokeWidth', 'stroke'],\n                crosshairY: ['strokeWidth', 'stroke']\n            },\n            // Simple shapes:\n            circle: ['shapes'],\n            ellipse: ['shapes'],\n            verticalLine: [],\n            label: ['labelOptions'],\n            // Measure\n            measure: ['background', 'crosshairY', 'crosshairX'],\n            // Others:\n            fibonacci: [],\n            tunnel: ['background', 'line', 'height'],\n            pitchfork: ['innerBackground', 'outerBackground'],\n            rect: ['shapes'],\n            // Crooked lines, elliots, arrows etc:\n            crookedLine: [],\n            basicAnnotation: ['shapes', 'labelOptions']\n        };\n        // Define non editable fields per annotation, for example Rectangle inherits\n        // options from Measure, but crosshairs are not available\n        NavigationBindings.annotationsNonEditable = {\n            rectangle: ['crosshairX', 'crosshairY', 'labelOptions'],\n            ellipse: ['labelOptions'],\n            circle: ['labelOptions']\n        };\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        /* *\n         *\n         *  API Declarations\n         *\n         * */\n        /**\n         * A config object for navigation bindings in annotations.\n         *\n         * @interface Highcharts.NavigationBindingsOptionsObject\n         */ /**\n        * ClassName of the element for a binding.\n        * @name Highcharts.NavigationBindingsOptionsObject#className\n        * @type {string|undefined}\n        */ /**\n        * Last event to be fired after last step event.\n        * @name Highcharts.NavigationBindingsOptionsObject#end\n        * @type {Function|undefined}\n        */ /**\n        * Initial event, fired on a button click.\n        * @name Highcharts.NavigationBindingsOptionsObject#init\n        * @type {Function|undefined}\n        */ /**\n        * Event fired on first click on a chart.\n        * @name Highcharts.NavigationBindingsOptionsObject#start\n        * @type {Function|undefined}\n        */ /**\n        * Last event to be fired after last step event. Array of step events to be\n        * called sequentially after each user click.\n        * @name Highcharts.NavigationBindingsOptionsObject#steps\n        * @type {Array<Function>|undefined}\n        */\n        (''); // keeps doclets above in JS file\n\n        return NavigationBindings;\n    });\n    _registerModule(_modules, 'Shared/BaseForm.js', [_modules['Core/Renderer/HTML/AST.js'], _modules['Core/Utilities.js']], function (AST, U) {\n        /* *\n         *\n         *  (c) 2009 - 2023 Highsoft AS\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        /* *\n         *\n         *  Imports\n         *\n         * */\n        const { addEvent, createElement } = U;\n        /* *\n         *\n         *  Class\n         *\n         * */\n        class BaseForm {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(parentDiv, iconsURL) {\n                this.iconsURL = iconsURL;\n                this.container = this.createPopupContainer(parentDiv);\n                this.closeButton = this.addCloseButton();\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Create popup div container.\n             *\n             * @param {HTMLElement} parentDiv\n             * Parent div to attach popup.\n             *\n             * @param  {string} className\n             * Class name of the popup.\n             *\n             * @return {HTMLElement}\n             * Popup div.\n             */\n            createPopupContainer(parentDiv, className = 'highcharts-popup highcharts-no-tooltip') {\n                return createElement('div', { className }, void 0, parentDiv);\n            }\n            /**\n             * Create HTML element and attach click event to close popup.\n             *\n             * @param {string} className\n             * Class name of the close button.\n             *\n             * @return {HTMLElement}\n             * Close button.\n             */\n            addCloseButton(className = 'highcharts-popup-close') {\n                const popup = this, iconsURL = this.iconsURL;\n                // Create close popup button.\n                const closeButton = createElement('div', { className }, void 0, this.container);\n                closeButton.style['background-image'] = 'url(' +\n                    (iconsURL.match(/png|svg|jpeg|jpg|gif/ig) ?\n                        iconsURL : iconsURL + 'close.svg') + ')';\n                ['click', 'touchstart'].forEach((eventName) => {\n                    addEvent(closeButton, eventName, popup.closeButtonEvents.bind(popup));\n                });\n                // close popup when press ESC\n                addEvent(document, 'keydown', function (event) {\n                    if (event.code === 'Escape') {\n                        popup.closeButtonEvents();\n                    }\n                });\n                return closeButton;\n            }\n            /**\n             * Close button events.\n             * @return {void}\n             */\n            closeButtonEvents() {\n                this.closePopup();\n            }\n            /**\n             * Reset content of the current popup and show.\n             *\n             * @param {string} toolbarClass\n             * Class name of the toolbar which styles should be reset.\n             */\n            showPopup(toolbarClass = 'highcharts-annotation-toolbar') {\n                const popupDiv = this.container, popupCloseButton = this.closeButton;\n                this.type = void 0;\n                // Reset content.\n                popupDiv.innerHTML = AST.emptyHTML;\n                // Reset toolbar styles if exists.\n                if (popupDiv.className.indexOf(toolbarClass) >= 0) {\n                    popupDiv.classList.remove(toolbarClass);\n                    // reset toolbar inline styles\n                    popupDiv.removeAttribute('style');\n                }\n                // Add close button.\n                popupDiv.appendChild(popupCloseButton);\n                popupDiv.style.display = 'block';\n                popupDiv.style.height = '';\n            }\n            /**\n             * Hide popup.\n             */\n            closePopup() {\n                this.container.style.display = 'none';\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return BaseForm;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Popup/PopupAnnotations.js', [_modules['Core/Globals.js'], _modules['Core/Utilities.js']], function (H, U) {\n        /* *\n         *\n         *  Popup generator for Stock tools\n         *\n         *  (c) 2009-2021 Sebastian Bochan\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { doc, isFirefox } = H;\n        const { createElement, isArray, isObject, objectEach, pick, stableSort } = U;\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * Create annotation simple form.\n         * It contains fields with param names.\n         * @private\n         * @param {Highcharts.Chart} chart\n         * Chart\n         * @param {Object} options\n         * Options\n         * @param {Function} callback\n         * On click callback\n         * @param {boolean} [isInit]\n         * If it is a form declared for init annotation\n         */\n        function addForm(chart, options, callback, isInit) {\n            if (!chart) {\n                return;\n            }\n            const popupDiv = this.container, lang = this.lang;\n            // create title of annotations\n            let lhsCol = createElement('h2', {\n                className: 'highcharts-popup-main-title'\n            }, void 0, popupDiv);\n            lhsCol.appendChild(doc.createTextNode(lang[options.langKey] || options.langKey || ''));\n            // left column\n            lhsCol = createElement('div', {\n                className: ('highcharts-popup-lhs-col highcharts-popup-lhs-full')\n            }, void 0, popupDiv);\n            const bottomRow = createElement('div', {\n                className: 'highcharts-popup-bottom-row'\n            }, void 0, popupDiv);\n            addFormFields.call(this, lhsCol, chart, '', options, [], true);\n            this.addButton(bottomRow, isInit ?\n                (lang.addButton || 'Add') :\n                (lang.saveButton || 'Save'), isInit ? 'add' : 'save', popupDiv, callback);\n        }\n        /**\n         * Create annotation simple form. It contains two buttons\n         * (edit / remove) and text label.\n         * @private\n         * @param {Highcharts.Chart} - chart\n         * @param {Highcharts.AnnotationsOptions} - options\n         * @param {Function} - on click callback\n         */\n        function addToolbar(chart, options, callback) {\n            const lang = this.lang, popupDiv = this.container, showForm = this.showForm, toolbarClass = 'highcharts-annotation-toolbar';\n            // set small size\n            if (popupDiv.className.indexOf(toolbarClass) === -1) {\n                popupDiv.className += ' ' + toolbarClass + ' highcharts-no-mousewheel';\n            }\n            // set position\n            if (chart) {\n                popupDiv.style.top = chart.plotTop + 10 + 'px';\n            }\n            // create label\n            createElement('span', void 0, void 0, popupDiv).appendChild(doc.createTextNode(pick(\n            // Advanced annotations:\n            lang[options.langKey] || options.langKey, \n            // Basic shapes:\n            options.shapes && options.shapes[0].type, '')));\n            // add buttons\n            let button = this.addButton(popupDiv, lang.removeButton || 'Remove', 'remove', popupDiv, callback);\n            button.className += ' highcharts-annotation-remove-button';\n            button.style['background-image'] = 'url(' +\n                this.iconsURL + 'destroy.svg)';\n            button = this.addButton(popupDiv, lang.editButton || 'Edit', 'edit', popupDiv, () => {\n                showForm.call(this, 'annotation-edit', chart, options, callback);\n            });\n            button.className += ' highcharts-annotation-edit-button';\n            button.style['background-image'] = 'url(' +\n                this.iconsURL + 'edit.svg)';\n        }\n        /**\n         * Create annotation's form fields.\n         * @private\n         * @param {Highcharts.HTMLDOMElement} parentDiv\n         * Div where inputs are placed\n         * @param {Highcharts.Chart} chart\n         * Chart\n         * @param {string} parentNode\n         * Name of parent to create chain of names\n         * @param {Highcharts.AnnotationsOptions} options\n         * Options\n         * @param {Array<unknown>} storage\n         * Array where all items are stored\n         * @param {boolean} [isRoot]\n         * Recursive flag for root\n         */\n        function addFormFields(parentDiv, chart, parentNode, options, storage, isRoot) {\n            if (!chart) {\n                return;\n            }\n            const addInput = this.addInput, lang = this.lang;\n            let parentFullName, titleName;\n            objectEach(options, (value, option) => {\n                // create name like params.styles.fontSize\n                parentFullName = parentNode !== '' ? parentNode + '.' + option : option;\n                if (isObject(value)) {\n                    if (\n                    // value is object of options\n                    !isArray(value) ||\n                        // array of objects with params. i.e labels in Fibonacci\n                        (isArray(value) && isObject(value[0]))) {\n                        titleName = lang[option] || option;\n                        if (!titleName.match(/\\d/g)) {\n                            storage.push([\n                                true,\n                                titleName,\n                                parentDiv\n                            ]);\n                        }\n                        addFormFields.call(this, parentDiv, chart, parentFullName, value, storage, false);\n                    }\n                    else {\n                        storage.push([\n                            this,\n                            parentFullName,\n                            'annotation',\n                            parentDiv,\n                            value\n                        ]);\n                    }\n                }\n            });\n            if (isRoot) {\n                stableSort(storage, (a) => (a[1].match(/format/g) ? -1 : 1));\n                if (isFirefox) {\n                    storage.reverse(); // (#14691)\n                }\n                storage.forEach((genInput) => {\n                    if (genInput[0] === true) {\n                        createElement('span', {\n                            className: 'highcharts-annotation-title'\n                        }, void 0, genInput[2]).appendChild(doc.createTextNode(genInput[1]));\n                    }\n                    else {\n                        genInput[4] = {\n                            value: genInput[4][0],\n                            type: genInput[4][1]\n                        };\n                        addInput.apply(genInput[0], genInput.splice(1));\n                    }\n                });\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        const PopupAnnotations = {\n            addForm,\n            addToolbar\n        };\n\n        return PopupAnnotations;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Popup/PopupIndicators.js', [_modules['Core/Renderer/HTML/AST.js'], _modules['Core/Globals.js'], _modules['Extensions/Annotations/NavigationBindingsUtilities.js'], _modules['Core/Series/SeriesRegistry.js'], _modules['Core/Utilities.js']], function (AST, H, NU, SeriesRegistry, U) {\n        /* *\n         *\n         *  Popup generator for Stock tools\n         *\n         *  (c) 2009-2021 Sebastian Bochan\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { doc } = H;\n        const { annotationsFieldsTypes } = NU;\n        const { seriesTypes } = SeriesRegistry;\n        const { addEvent, createElement, defined, isArray, isObject, objectEach, stableSort } = U;\n        /* *\n         *\n         *  Enums\n         *\n         * */\n        /**\n         * Enum for properties which should have dropdown list.\n         * @private\n         */\n        var DropdownProperties;\n        (function (DropdownProperties) {\n            DropdownProperties[DropdownProperties[\"params.algorithm\"] = 0] = \"params.algorithm\";\n            DropdownProperties[DropdownProperties[\"params.average\"] = 1] = \"params.average\";\n        })(DropdownProperties || (DropdownProperties = {}));\n        /**\n         * List of available algorithms for the specific indicator.\n         * @private\n         */\n        const dropdownParameters = {\n            'algorithm-pivotpoints': ['standard', 'fibonacci', 'camarilla'],\n            'average-disparityindex': ['sma', 'ema', 'dema', 'tema', 'wma']\n        };\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * Create two columns (divs) in HTML.\n         * @private\n         * @param {Highcharts.HTMLDOMElement} container\n         * Container of columns\n         * @return {Highcharts.Dictionary<Highcharts.HTMLDOMElement>}\n         * Reference to two HTML columns (lhsCol, rhsCol)\n         */\n        function addColsContainer(container) {\n            // left column\n            const lhsCol = createElement('div', {\n                className: 'highcharts-popup-lhs-col'\n            }, void 0, container);\n            // right column\n            const rhsCol = createElement('div', {\n                className: 'highcharts-popup-rhs-col'\n            }, void 0, container);\n            // wrapper content\n            createElement('div', {\n                className: 'highcharts-popup-rhs-col-wrapper'\n            }, void 0, rhsCol);\n            return {\n                lhsCol: lhsCol,\n                rhsCol: rhsCol\n            };\n        }\n        /**\n         * Create indicator's form. It contains two tabs (ADD and EDIT) with\n         * content.\n         * @private\n         */\n        function addForm(chart, _options, callback) {\n            const lang = this.lang;\n            let buttonParentDiv;\n            if (!chart) {\n                return;\n            }\n            // add tabs\n            this.tabs.init.call(this, chart);\n            // get all tabs content divs\n            const tabsContainers = this.container\n                .querySelectorAll('.highcharts-tab-item-content');\n            // ADD tab\n            addColsContainer(tabsContainers[0]);\n            addSearchBox.call(this, chart, tabsContainers[0]);\n            addIndicatorList.call(this, chart, tabsContainers[0], 'add');\n            buttonParentDiv = tabsContainers[0]\n                .querySelectorAll('.highcharts-popup-rhs-col')[0];\n            this.addButton(buttonParentDiv, lang.addButton || 'add', 'add', buttonParentDiv, callback);\n            // EDIT tab\n            addColsContainer(tabsContainers[1]);\n            addIndicatorList.call(this, chart, tabsContainers[1], 'edit');\n            buttonParentDiv = tabsContainers[1]\n                .querySelectorAll('.highcharts-popup-rhs-col')[0];\n            this.addButton(buttonParentDiv, lang.saveButton || 'save', 'edit', buttonParentDiv, callback);\n            this.addButton(buttonParentDiv, lang.removeButton || 'remove', 'remove', buttonParentDiv, callback);\n        }\n        /**\n         * Create typical inputs for chosen indicator. Fields are extracted from\n         * defaultOptions (ADD mode) or current indicator (ADD mode). Two extra\n         * fields are added:\n         * - hidden input - contains indicator type (required for callback)\n         * - select - list of series which can be linked with indicator\n         * @private\n         * @param {Highcharts.Chart} chart\n         * Chart\n         * @param {Highcharts.Series} series\n         * Indicator\n         * @param {string} seriesType\n         * Indicator type like: sma, ema, etc.\n         * @param {Highcharts.HTMLDOMElement} rhsColWrapper\n         * Element where created HTML list is added\n         */\n        function addFormFields(chart, series, seriesType, rhsColWrapper) {\n            const fields = series.params || series.options.params;\n            // reset current content\n            rhsColWrapper.innerHTML = AST.emptyHTML;\n            // create title (indicator name in the right column)\n            createElement('h3', {\n                className: 'highcharts-indicator-title'\n            }, void 0, rhsColWrapper).appendChild(doc.createTextNode(getNameType(series, seriesType).indicatorFullName));\n            // input type\n            createElement('input', {\n                type: 'hidden',\n                name: 'highcharts-type-' + seriesType,\n                value: seriesType\n            }, void 0, rhsColWrapper);\n            // list all series with id\n            listAllSeries.call(this, seriesType, 'series', chart, rhsColWrapper, series, series.linkedParent && series.linkedParent.options.id);\n            if (fields.volumeSeriesID) {\n                listAllSeries.call(this, seriesType, 'volume', chart, rhsColWrapper, series, series.linkedParent && fields.volumeSeriesID);\n            }\n            // add param fields\n            addParamInputs.call(this, chart, 'params', fields, seriesType, rhsColWrapper);\n        }\n        /**\n         * Create HTML list of all indicators (ADD mode) or added indicators\n         * (EDIT mode).\n         *\n         * @private\n         *\n         * @param {Highcharts.AnnotationChart} chart\n         *        The chart object.\n         *\n         * @param {string} [optionName]\n         *        Name of the option into which selection is being added.\n         *\n         * @param {HTMLDOMElement} [parentDiv]\n         *        HTML parent element.\n         *\n         * @param {string} listType\n         *        Type of list depending on the selected bookmark.\n         *        Might be 'add' or 'edit'.\n         *\n         * @param {string|undefined} filter\n         *        Applied filter string from the input.\n         *        For the first iteration, it's an empty string.\n         */\n        function addIndicatorList(chart, parentDiv, listType, filter) {\n            const popup = this, lang = popup.lang, lhsCol = parentDiv.querySelectorAll('.highcharts-popup-lhs-col')[0], rhsCol = parentDiv.querySelectorAll('.highcharts-popup-rhs-col')[0], isEdit = listType === 'edit', series = (isEdit ?\n                chart.series : // EDIT mode\n                chart.options.plotOptions || {} // ADD mode\n            );\n            if (!chart && series) {\n                return;\n            }\n            let item, filteredSeriesArray = [];\n            // Filter and sort the series.\n            if (!isEdit && !isArray(series)) {\n                // Apply filters only for the 'add' indicator list.\n                filteredSeriesArray = filterSeries.call(this, series, filter);\n            }\n            else if (isArray(series)) {\n                filteredSeriesArray = filterSeriesArray.call(this, series);\n            }\n            // Sort indicators alphabeticaly.\n            stableSort(filteredSeriesArray, (a, b) => {\n                const seriesAName = a.indicatorFullName.toLowerCase(), seriesBName = b.indicatorFullName.toLowerCase();\n                return (seriesAName < seriesBName) ?\n                    -1 : (seriesAName > seriesBName) ? 1 : 0;\n            });\n            // If the list exists remove it from the DOM\n            // in order to create a new one with different filters.\n            if (lhsCol.children[1]) {\n                lhsCol.children[1].remove();\n            }\n            // Create wrapper for list.\n            const indicatorList = createElement('ul', {\n                className: 'highcharts-indicator-list'\n            }, void 0, lhsCol);\n            const rhsColWrapper = rhsCol.querySelectorAll('.highcharts-popup-rhs-col-wrapper')[0];\n            filteredSeriesArray.forEach((seriesSet) => {\n                const { indicatorFullName, indicatorType, series } = seriesSet;\n                item = createElement('li', {\n                    className: 'highcharts-indicator-list'\n                }, void 0, indicatorList);\n                item.appendChild(doc.createTextNode(indicatorFullName));\n                ['click', 'touchstart'].forEach((eventName) => {\n                    addEvent(item, eventName, function () {\n                        const button = rhsColWrapper.parentNode\n                            .children[1];\n                        addFormFields.call(popup, chart, series, indicatorType, rhsColWrapper);\n                        if (button) {\n                            button.style.display = 'block';\n                        }\n                        // add hidden input with series.id\n                        if (isEdit && series.options) {\n                            createElement('input', {\n                                type: 'hidden',\n                                name: 'highcharts-id-' + indicatorType,\n                                value: series.options.id\n                            }, void 0, rhsColWrapper).setAttribute('highcharts-data-series-id', series.options.id);\n                        }\n                    });\n                });\n            });\n            // select first item from the list\n            if (indicatorList.childNodes.length > 0) {\n                indicatorList.childNodes[0].click();\n            }\n            else if (!isEdit) {\n                AST.setElementHTML(rhsColWrapper.parentNode.children[0], lang.noFilterMatch || '');\n                rhsColWrapper.parentNode.children[1]\n                    .style.display = 'none';\n            }\n        }\n        /**\n         * Recurent function which lists all fields, from params object and\n         * create them as inputs. Each input has unique `data-name` attribute,\n         * which keeps chain of fields i.e params.styles.fontSize.\n         * @private\n         * @param {Highcharts.Chart} chart\n         * Chart\n         * @param {string} parentNode\n         * Name of parent to create chain of names\n         * @param {Highcharts.PopupFieldsDictionary<string>} fields\n         * Params which are based for input create\n         * @param {string} type\n         * Indicator type like: sma, ema, etc.\n         * @param {Highcharts.HTMLDOMElement} parentDiv\n         * Element where created HTML list is added\n         */\n        function addParamInputs(chart, parentNode, fields, type, parentDiv) {\n            if (!chart) {\n                return;\n            }\n            const addInput = this.addInput;\n            objectEach(fields, (value, fieldName) => {\n                const predefinedType = annotationsFieldsTypes[fieldName];\n                let fieldType = type;\n                if (predefinedType) {\n                    fieldType = predefinedType;\n                }\n                // create name like params.styles.fontSize\n                const parentFullName = parentNode + '.' + fieldName;\n                if (defined(value) && // skip if field is unnecessary, #15362\n                    parentFullName) {\n                    if (isObject(value)) {\n                        // (15733) 'Periods' has an arrayed value. Label must be\n                        // created here.\n                        addInput.call(this, parentFullName, type, parentDiv, {});\n                        addParamInputs.call(this, chart, parentFullName, value, type, parentDiv);\n                    }\n                    // If the option is listed in dropdown enum,\n                    // add the selection box for it.\n                    if (parentFullName in DropdownProperties) {\n                        // Add selection boxes.\n                        const selectBox = addSelection.call(this, type, parentFullName, parentDiv);\n                        // Add possible dropdown options.\n                        addSelectionOptions.call(this, chart, parentNode, selectBox, type, fieldName, value);\n                    }\n                    else if (\n                    // Skip volume field which is created by addFormFields.\n                    parentFullName !== 'params.volumeSeriesID' &&\n                        !isArray(value) // Skip params declared in array.\n                    ) {\n                        addInput.call(this, parentFullName, type, parentDiv, {\n                            value: value,\n                            type: 'number'\n                        } // all inputs are text type\n                        );\n                    }\n                }\n            });\n        }\n        /**\n         * Add searchbox HTML element and its' label.\n         *\n         * @private\n         *\n         * @param {Highcharts.AnnotationChart} chart\n         *        The chart object.\n         *\n         * @param {HTMLDOMElement} parentDiv\n         *        HTML parent element.\n         */\n        function addSearchBox(chart, parentDiv) {\n            const popup = this, lhsCol = parentDiv.querySelectorAll('.highcharts-popup-lhs-col')[0], options = 'searchIndicators', inputAttributes = {\n                value: '',\n                type: 'text',\n                htmlFor: 'search-indicators',\n                labelClassName: 'highcharts-input-search-indicators-label'\n            }, clearFilterText = this.lang.clearFilter, inputWrapper = createElement('div', {\n                className: 'highcharts-input-wrapper'\n            }, void 0, lhsCol);\n            const handleInputChange = function (inputText) {\n                // Apply some filters.\n                addIndicatorList.call(popup, chart, popup.container, 'add', inputText);\n            };\n            // Add input field with the label and button.\n            const input = this.addInput(options, 'input', inputWrapper, inputAttributes), button = createElement('a', {\n                textContent: clearFilterText\n            }, void 0, inputWrapper);\n            input.classList.add('highcharts-input-search-indicators');\n            button.classList.add('clear-filter-button');\n            // Add input change events.\n            addEvent(input, 'input', function (e) {\n                handleInputChange(this.value);\n                // Show clear filter button.\n                if (this.value.length) {\n                    button.style.display = 'inline-block';\n                }\n                else {\n                    button.style.display = 'none';\n                }\n            });\n            // Add clear filter click event.\n            ['click', 'touchstart'].forEach((eventName) => {\n                addEvent(button, eventName, function () {\n                    // Clear the input.\n                    input.value = '';\n                    handleInputChange('');\n                    // Hide clear filter button- no longer nececary.\n                    button.style.display = 'none';\n                });\n            });\n        }\n        /**\n         * Add selection HTML element and its' label.\n         *\n         * @private\n         *\n         * @param {string} indicatorType\n         * Type of the indicator i.e. sma, ema...\n         *\n         * @param {string} [optionName]\n         * Name of the option into which selection is being added.\n         *\n         * @param {HTMLDOMElement} [parentDiv]\n         * HTML parent element.\n         */\n        function addSelection(indicatorType, optionName, parentDiv) {\n            const optionParamList = optionName.split('.'), labelText = optionParamList[optionParamList.length - 1], selectName = 'highcharts-' + optionName + '-type-' + indicatorType, lang = this.lang;\n            // Add a label for the selection box.\n            createElement('label', {\n                htmlFor: selectName\n            }, null, parentDiv).appendChild(doc.createTextNode(lang[labelText] || optionName));\n            // Create a selection box.\n            const selectBox = createElement('select', {\n                name: selectName,\n                className: 'highcharts-popup-field',\n                id: 'highcharts-select-' + optionName\n            }, null, parentDiv);\n            selectBox.setAttribute('id', 'highcharts-select-' + optionName);\n            return selectBox;\n        }\n        /**\n         * Get and add selection options.\n         *\n         * @private\n         *\n         * @param {Highcharts.AnnotationChart} chart\n         *        The chart object.\n         *\n         * @param {string} [optionName]\n         *        Name of the option into which selection is being added.\n         *\n         * @param {HTMLSelectElement} [selectBox]\n         *        HTML select box element to which the options are being added.\n         *\n         * @param {string|undefined} indicatorType\n         *        Type of the indicator i.e. sma, ema...\n         *\n         * @param {string|undefined} parameterName\n         *        Name of the parameter which should be applied.\n         *\n         * @param {string|undefined} selectedOption\n         *        Default value in dropdown.\n         */\n        function addSelectionOptions(chart, optionName, selectBox, indicatorType, parameterName, selectedOption, currentSeries) {\n            // Get and apply selection options for the possible series.\n            if (optionName === 'series' || optionName === 'volume') {\n                // List all series which have id - mandatory for indicator.\n                chart.series.forEach((series) => {\n                    const seriesOptions = series.options, seriesName = seriesOptions.name ||\n                        seriesOptions.params ?\n                        series.name :\n                        seriesOptions.id || '';\n                    if (seriesOptions.id !== 'highcharts-navigator-series' &&\n                        seriesOptions.id !== (currentSeries &&\n                            currentSeries.options &&\n                            currentSeries.options.id)) {\n                        if (!defined(selectedOption) &&\n                            optionName === 'volume' &&\n                            series.type === 'column') {\n                            selectedOption = seriesOptions.id;\n                        }\n                        createElement('option', {\n                            value: seriesOptions.id\n                        }, void 0, selectBox).appendChild(doc.createTextNode(seriesName));\n                    }\n                });\n            }\n            else if (indicatorType && parameterName) {\n                // Get and apply options for the possible parameters.\n                const dropdownKey = parameterName + '-' + indicatorType, parameterOption = dropdownParameters[dropdownKey];\n                parameterOption.forEach((element) => {\n                    createElement('option', {\n                        value: element\n                    }, void 0, selectBox).appendChild(doc.createTextNode(element));\n                });\n            }\n            // Add the default dropdown value if defined.\n            if (defined(selectedOption)) {\n                selectBox.value = selectedOption;\n            }\n        }\n        /**\n         * Filter object of series which are not indicators.\n         * If the filter string exists, check against it.\n         *\n         * @private\n         *\n         * @param {Highcharts.FilteredSeries} series\n         *        All series are available in the plotOptions.\n         *\n         * @param {string|undefined} filter\n         *        Applied filter string from the input.\n         *        For the first iteration, it's an empty string.\n         *\n         * @return {Array<Highcharts.FilteredSeries>} filteredSeriesArray\n         *         Returns array of filtered series based on filter string.\n         */\n        function filterSeries(series, filter) {\n            const popup = this, indicators = popup.indicators, lang = popup.chart && popup.chart.options.lang, indicatorAliases = lang &&\n                lang.navigation &&\n                lang.navigation.popup &&\n                lang.navigation.popup.indicatorAliases, filteredSeriesArray = [];\n            let filteredSeries;\n            objectEach(series, (series, value) => {\n                const seriesOptions = series && series.options;\n                // Allow only indicators.\n                if (series.params || seriesOptions &&\n                    seriesOptions.params) {\n                    const { indicatorFullName, indicatorType } = getNameType(series, value);\n                    if (filter) {\n                        // Replace invalid characters.\n                        const validFilter = filter.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                        const regex = new RegExp(validFilter, 'i'), alias = indicatorAliases &&\n                            indicatorAliases[indicatorType] &&\n                            indicatorAliases[indicatorType].join(' ') || '';\n                        if (indicatorFullName.match(regex) ||\n                            alias.match(regex)) {\n                            filteredSeries = {\n                                indicatorFullName,\n                                indicatorType,\n                                series: series\n                            };\n                            filteredSeriesArray.push(filteredSeries);\n                        }\n                    }\n                    else {\n                        filteredSeries = {\n                            indicatorFullName,\n                            indicatorType,\n                            series: series\n                        };\n                        filteredSeriesArray.push(filteredSeries);\n                    }\n                }\n            });\n            return filteredSeriesArray;\n        }\n        /**\n         * Filter an array of series and map its names and types.\n         *\n         * @private\n         *\n         * @param {Highcharts.FilteredSeries} series\n         *        All series that are available in the plotOptions.\n         *\n         * @return {Array<Highcharts.FilteredSeries>} filteredSeriesArray\n         *         Returns array of filtered series based on filter string.\n         */\n        function filterSeriesArray(series) {\n            const filteredSeriesArray = [];\n            // Allow only indicators.\n            series.forEach((series) => {\n                if (series.is('sma')) {\n                    filteredSeriesArray.push({\n                        indicatorFullName: series.name,\n                        indicatorType: series.type,\n                        series: series\n                    });\n                }\n            });\n            return filteredSeriesArray;\n        }\n        /**\n         * Get amount of indicators added to chart.\n         * @private\n         * @return {number} - Amount of indicators\n         */\n        function getAmount() {\n            let counter = 0;\n            this.series.forEach((serie) => {\n                if (serie.params ||\n                    serie.options.params) {\n                    counter++;\n                }\n            });\n            return counter;\n        }\n        /**\n         * Extract full name and type of requested indicator.\n         *\n         * @private\n         *\n         * @param {Highcharts.Series} series\n         * Series which name is needed(EDITmode - defaultOptions.series,\n         * ADDmode - indicator series).\n         *\n         * @param {string} [indicatorType]\n         * Type of the indicator i.e. sma, ema...\n         *\n         * @return {Highcharts.Dictionary<string>}\n         * Full name and series type.\n         */\n        function getNameType(series, indicatorType) {\n            const options = series.options;\n            // add mode\n            let seriesName = (seriesTypes[indicatorType] &&\n                seriesTypes[indicatorType].prototype.nameBase) ||\n                indicatorType.toUpperCase(), seriesType = indicatorType;\n            // edit\n            if (options && options.type) {\n                seriesType = series.options.type;\n                seriesName = series.name;\n            }\n            return {\n                indicatorFullName: seriesName,\n                indicatorType: seriesType\n            };\n        }\n        /**\n         * Create the selection box for the series,\n         * add options and apply the default one.\n         *\n         * @private\n         *\n         * @param {string} indicatorType\n         *        Type of the indicator i.e. sma, ema...\n         *\n         * @param {string} [optionName]\n         *        Name of the option into which selection is being added.\n         *\n         * @param {Highcharts.AnnotationChart} chart\n         *        The chart object.\n         *\n         * @param {HTMLDOMElement} [parentDiv]\n         *        HTML parent element.\n         *\n         * @param {string|undefined} selectedOption\n         *        Default value in dropdown.\n         */\n        function listAllSeries(indicatorType, optionName, chart, parentDiv, currentSeries, selectedOption) {\n            const popup = this, indicators = popup.indicators;\n            // Won't work without the chart.\n            if (!chart) {\n                return;\n            }\n            // Add selection boxes.\n            const selectBox = addSelection.call(popup, indicatorType, optionName, parentDiv);\n            // Add possible dropdown options.\n            addSelectionOptions.call(popup, chart, optionName, selectBox, void 0, void 0, void 0, currentSeries);\n            // Add the default dropdown value if defined.\n            if (defined(selectedOption)) {\n                selectBox.value = selectedOption;\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        const PopupIndicators = {\n            addForm,\n            getAmount\n        };\n\n        return PopupIndicators;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Popup/PopupTabs.js', [_modules['Core/Globals.js'], _modules['Core/Utilities.js']], function (H, U) {\n        /* *\n         *\n         *  Popup generator for Stock tools\n         *\n         *  (c) 2009-2021 Sebastian Bochan\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { doc } = H;\n        const { addEvent, createElement } = U;\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * Create tab content\n         * @private\n         * @return {HTMLDOMElement} - created HTML tab-content element\n         */\n        function addContentItem() {\n            const popupDiv = this.container;\n            return createElement('div', {\n                // #12100\n                className: 'highcharts-tab-item-content highcharts-no-mousewheel'\n            }, void 0, popupDiv);\n        }\n        /**\n         * Create tab menu item\n         * @private\n         * @param {string} tabName\n         * `add` or `edit`\n         * @param {number} [disableTab]\n         * Disable tab when 0\n         * @return {Highcharts.HTMLDOMElement}\n         * Created HTML tab-menu element\n         */\n        function addMenuItem(tabName, disableTab) {\n            const popupDiv = this.container, lang = this.lang;\n            let className = 'highcharts-tab-item';\n            if (disableTab === 0) {\n                className += ' highcharts-tab-disabled';\n            }\n            // tab 1\n            const menuItem = createElement('span', {\n                className\n            }, void 0, popupDiv);\n            menuItem.appendChild(doc.createTextNode(lang[tabName + 'Button'] || tabName));\n            menuItem.setAttribute('highcharts-data-tab-type', tabName);\n            return menuItem;\n        }\n        /**\n         * Set all tabs as invisible.\n         * @private\n         */\n        function deselectAll() {\n            const popupDiv = this.container, tabs = popupDiv\n                .querySelectorAll('.highcharts-tab-item'), tabsContent = popupDiv\n                .querySelectorAll('.highcharts-tab-item-content');\n            for (let i = 0; i < tabs.length; i++) {\n                tabs[i].classList.remove('highcharts-tab-item-active');\n                tabsContent[i].classList.remove('highcharts-tab-item-show');\n            }\n        }\n        /**\n         * Init tabs. Create tab menu items, tabs containers\n         * @private\n         * @param {Highcharts.Chart} chart\n         * Reference to current chart\n         */\n        function init(chart) {\n            if (!chart) {\n                return;\n            }\n            const indicatorsCount = this.indicators.getAmount.call(chart);\n            // create menu items\n            const firstTab = addMenuItem.call(this, 'add'); // run by default\n            addMenuItem.call(this, 'edit', indicatorsCount);\n            // create tabs containers\n            addContentItem.call(this);\n            addContentItem.call(this);\n            switchTabs.call(this, indicatorsCount);\n            // activate first tab\n            selectTab.call(this, firstTab, 0);\n        }\n        /**\n         * Set tab as visible\n         * @private\n         * @param {globals.Element} - current tab\n         * @param {number} - Index of tab in menu\n         */\n        function selectTab(tab, index) {\n            const allTabs = this.container\n                .querySelectorAll('.highcharts-tab-item-content');\n            tab.className += ' highcharts-tab-item-active';\n            allTabs[index].className += ' highcharts-tab-item-show';\n        }\n        /**\n         * Add click event to each tab\n         * @private\n         * @param {number} disableTab\n         * Disable tab when 0\n         */\n        function switchTabs(disableTab) {\n            const popup = this, popupDiv = this.container, tabs = popupDiv.querySelectorAll('.highcharts-tab-item');\n            tabs.forEach((tab, i) => {\n                if (disableTab === 0 &&\n                    tab.getAttribute('highcharts-data-tab-type') === 'edit') {\n                    return;\n                }\n                ['click', 'touchstart'].forEach((eventName) => {\n                    addEvent(tab, eventName, function () {\n                        // reset class on other elements\n                        deselectAll.call(popup);\n                        selectTab.call(popup, this, i);\n                    });\n                });\n            });\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        const PopupTabs = {\n            init\n        };\n\n        return PopupTabs;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Popup/Popup.js', [_modules['Shared/BaseForm.js'], _modules['Core/Globals.js'], _modules['Core/Defaults.js'], _modules['Extensions/Annotations/Popup/PopupAnnotations.js'], _modules['Extensions/Annotations/Popup/PopupIndicators.js'], _modules['Extensions/Annotations/Popup/PopupTabs.js'], _modules['Core/Utilities.js']], function (BaseForm, H, D, PopupAnnotations, PopupIndicators, PopupTabs, U) {\n        /* *\n         *\n         *  Popup generator for Stock tools\n         *\n         *  (c) 2009-2021 Sebastian Bochan\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { doc } = H;\n        const { getOptions } = D;\n        const { addEvent, createElement, extend, fireEvent, pick } = U;\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * Get values from all inputs and selections then create JSON.\n         *\n         * @private\n         *\n         * @param {Highcharts.HTMLDOMElement} parentDiv\n         * The container where inputs and selections are created.\n         *\n         * @param {string} type\n         * Type of the popup bookmark (add|edit|remove).\n         */\n        function getFields(parentDiv, type) {\n            const inputList = Array.prototype.slice.call(parentDiv.querySelectorAll('input')), selectList = Array.prototype.slice.call(parentDiv.querySelectorAll('select')), optionSeries = '#highcharts-select-series > option:checked', optionVolume = '#highcharts-select-volume > option:checked', linkedTo = parentDiv.querySelectorAll(optionSeries)[0], volumeTo = parentDiv.querySelectorAll(optionVolume)[0];\n            const fieldsOutput = {\n                actionType: type,\n                linkedTo: linkedTo && linkedTo.getAttribute('value') || '',\n                fields: {}\n            };\n            inputList.forEach((input) => {\n                const param = input.getAttribute('highcharts-data-name'), seriesId = input.getAttribute('highcharts-data-series-id');\n                // params\n                if (seriesId) {\n                    fieldsOutput.seriesId = input.value;\n                }\n                else if (param) {\n                    fieldsOutput.fields[param] = input.value;\n                }\n                else {\n                    // type like sma / ema\n                    fieldsOutput.type = input.value;\n                }\n            });\n            selectList.forEach((select) => {\n                const id = select.id;\n                // Get inputs only for the parameters, not for series and volume.\n                if (id !== 'highcharts-select-series' &&\n                    id !== 'highcharts-select-volume') {\n                    const parameter = id.split('highcharts-select-')[1];\n                    fieldsOutput.fields[parameter] = select.value;\n                }\n            });\n            if (volumeTo) {\n                fieldsOutput.fields['params.volumeSeriesID'] = volumeTo\n                    .getAttribute('value') || '';\n            }\n            return fieldsOutput;\n        }\n        /* *\n         *\n         *  Class\n         *\n         * */\n        class Popup extends BaseForm {\n            /* *\n             *\n             *  Constructor\n             *\n             * */\n            constructor(parentDiv, iconsURL, chart) {\n                super(parentDiv, iconsURL);\n                this.chart = chart;\n                this.lang = (getOptions().lang.navigation || {}).popup || {};\n                addEvent(this.container, 'mousedown', () => {\n                    const activeAnnotation = chart &&\n                        chart.navigationBindings &&\n                        chart.navigationBindings.activeAnnotation;\n                    if (activeAnnotation) {\n                        activeAnnotation.cancelClick = true;\n                        const unbind = addEvent(doc, 'click', () => {\n                            setTimeout(() => {\n                                activeAnnotation.cancelClick = false;\n                            }, 0);\n                            unbind();\n                        });\n                    }\n                });\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * Create input with label.\n             *\n             * @private\n             *\n             * @param {string} option\n             *        Chain of fields i.e params.styles.fontSize separeted by the dot.\n             *\n             * @param {string} indicatorType\n             *        Type of the indicator i.e. sma, ema...\n             *\n             * @param {HTMLDOMElement} parentDiv\n             *        HTML parent element.\n             *\n             * @param {Highcharts.InputAttributes} inputAttributes\n             *        Attributes of the input.\n             *\n             * @return {HTMLInputElement}\n             *         Return created input element.\n             */\n            addInput(option, indicatorType, parentDiv, inputAttributes) {\n                const optionParamList = option.split('.'), optionName = optionParamList[optionParamList.length - 1], lang = this.lang, inputName = 'highcharts-' + indicatorType + '-' + pick(inputAttributes.htmlFor, optionName);\n                if (!optionName.match(/^\\d+$/)) {\n                    // add label\n                    createElement('label', {\n                        htmlFor: inputName,\n                        className: inputAttributes.labelClassName\n                    }, void 0, parentDiv).appendChild(doc.createTextNode(lang[optionName] || optionName));\n                }\n                // add input\n                const input = createElement('input', {\n                    name: inputName,\n                    value: inputAttributes.value,\n                    type: inputAttributes.type,\n                    className: 'highcharts-popup-field'\n                }, void 0, parentDiv);\n                input.setAttribute('highcharts-data-name', option);\n                return input;\n            }\n            closeButtonEvents() {\n                if (this.chart) {\n                    const navigationBindings = this.chart.navigationBindings;\n                    fireEvent(navigationBindings, 'closePopup');\n                    if (navigationBindings &&\n                        navigationBindings.selectedButtonElement) {\n                        fireEvent(navigationBindings, 'deselectButton', { button: navigationBindings.selectedButtonElement });\n                    }\n                }\n                else {\n                    super.closeButtonEvents();\n                }\n            }\n            /**\n             * Create button.\n             * @private\n             * @param {Highcharts.HTMLDOMElement} parentDiv\n             * Container where elements should be added\n             * @param {string} label\n             * Text placed as button label\n             * @param {string} type\n             * add | edit | remove\n             * @param {Function} callback\n             * On click callback\n             * @param {Highcharts.HTMLDOMElement} fieldsDiv\n             * Container where inputs are generated\n             * @return {Highcharts.HTMLDOMElement}\n             * HTML button\n             */\n            addButton(parentDiv, label, type, fieldsDiv, callback) {\n                const button = createElement('button', void 0, void 0, parentDiv);\n                button.appendChild(doc.createTextNode(label));\n                if (callback) {\n                    ['click', 'touchstart'].forEach((eventName) => {\n                        addEvent(button, eventName, () => {\n                            this.closePopup();\n                            return callback(getFields(fieldsDiv, type));\n                        });\n                    });\n                }\n                return button;\n            }\n            /**\n             * Create content and show popup.\n             * @private\n             * @param {string} - type of popup i.e indicators\n             * @param {Highcharts.Chart} - chart\n             * @param {Highcharts.AnnotationsOptions} - options\n             * @param {Function} - on click callback\n             */\n            showForm(type, chart, options, callback) {\n                if (!chart) {\n                    return;\n                }\n                // show blank popup\n                this.showPopup();\n                // indicator form\n                if (type === 'indicators') {\n                    this.indicators.addForm.call(this, chart, options, callback);\n                }\n                // annotation small toolbar\n                if (type === 'annotation-toolbar') {\n                    this.annotations.addToolbar.call(this, chart, options, callback);\n                }\n                // annotation edit form\n                if (type === 'annotation-edit') {\n                    this.annotations.addForm.call(this, chart, options, callback);\n                }\n                // flags form - add / edit\n                if (type === 'flag') {\n                    this.annotations.addForm.call(this, chart, options, callback, true);\n                }\n                this.type = type;\n                // Explicit height is needed to make inner elements scrollable\n                this.container.style.height = this.container.offsetHeight + 'px';\n            }\n        }\n        extend(Popup.prototype, {\n            annotations: PopupAnnotations,\n            indicators: PopupIndicators,\n            tabs: PopupTabs\n        });\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n\n        return Popup;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Popup/PopupComposition.js', [_modules['Extensions/Annotations/Popup/Popup.js'], _modules['Core/Utilities.js']], function (Popup, U) {\n        /* *\n         *\n         *  Popup generator for Stock tools\n         *\n         *  (c) 2009-2021 Sebastian Bochan\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { addEvent, wrap } = U;\n        /* *\n         *\n         *  Constants\n         *\n         * */\n        const composedMembers = [];\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * @private\n         */\n        function compose(NagivationBindingsClass, PointerClass) {\n            if (U.pushUnique(composedMembers, NagivationBindingsClass)) {\n                addEvent(NagivationBindingsClass, 'closePopup', onNavigationBindingsClosePopup);\n                addEvent(NagivationBindingsClass, 'showPopup', onNavigationBindingsShowPopup);\n            }\n            if (U.pushUnique(composedMembers, PointerClass)) {\n                wrap(PointerClass.prototype, 'onContainerMouseDown', wrapPointerOnContainerMouserDown);\n            }\n        }\n        /**\n         * @private\n         */\n        function onNavigationBindingsClosePopup() {\n            if (this.popup) {\n                this.popup.closePopup();\n            }\n        }\n        /**\n         * @private\n         */\n        function onNavigationBindingsShowPopup(config) {\n            if (!this.popup) {\n                // Add popup to main container\n                this.popup = new Popup(this.chart.container, (this.chart.options.navigation.iconsURL ||\n                    (this.chart.options.stockTools &&\n                        this.chart.options.stockTools.gui.iconsURL) ||\n                    'https://code.highcharts.com/11.2.0/gfx/stock-icons/'), this.chart);\n            }\n            this.popup.showForm(config.formType, this.chart, config.options, config.onSubmit);\n        }\n        /**\n         * onContainerMouseDown blocks internal popup events, due to e.preventDefault.\n         * Related issue #4606\n         * @private\n         */\n        function wrapPointerOnContainerMouserDown(proceed, e) {\n            // elements is not in popup\n            if (!this.inClass(e.target, 'highcharts-popup')) {\n                proceed.apply(this, Array.prototype.slice.call(arguments, 1));\n            }\n        }\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        const PopupComposition = {\n            compose\n        };\n\n        return PopupComposition;\n    });\n    _registerModule(_modules, 'Extensions/Annotations/Annotation.js', [_modules['Core/Animation/AnimationUtilities.js'], _modules['Extensions/Annotations/AnnotationChart.js'], _modules['Extensions/Annotations/AnnotationDefaults.js'], _modules['Extensions/Annotations/Controllables/ControllableRect.js'], _modules['Extensions/Annotations/Controllables/ControllableCircle.js'], _modules['Extensions/Annotations/Controllables/ControllableEllipse.js'], _modules['Extensions/Annotations/Controllables/ControllablePath.js'], _modules['Extensions/Annotations/Controllables/ControllableImage.js'], _modules['Extensions/Annotations/Controllables/ControllableLabel.js'], _modules['Extensions/Annotations/ControlPoint.js'], _modules['Extensions/Annotations/ControlTarget.js'], _modules['Extensions/Annotations/EventEmitter.js'], _modules['Extensions/Annotations/MockPoint.js'], _modules['Extensions/Annotations/NavigationBindings.js'], _modules['Extensions/Annotations/Popup/PopupComposition.js'], _modules['Core/Utilities.js']], function (A, AnnotationChart, AnnotationDefaults, ControllableRect, ControllableCircle, ControllableEllipse, ControllablePath, ControllableImage, ControllableLabel, ControlPoint, ControlTarget, EventEmitter, MockPoint, NavigationBindings, PopupComposition, U) {\n        /* *\n         *\n         *  (c) 2009-2021 Highsoft, Black Label\n         *\n         *  License: www.highcharts.com/license\n         *\n         *  !!!!!!! SOURCE GETS TRANSPILED BY TYPESCRIPT. EDIT TS FILE ONLY. !!!!!!!\n         *\n         * */\n        const { getDeferredAnimation } = A;\n        const { destroyObjectProperties, erase, fireEvent, merge, pick, splat } = U;\n        /* *\n         *\n         *  Functions\n         *\n         * */\n        /**\n         * Hide or show annotaiton attached to points.\n         * @private\n         */\n        function adjustVisibility(item) {\n            const label = item.graphic, hasVisiblePoints = item.points.some((point) => (point.series.visible !== false &&\n                point.visible !== false));\n            if (label) {\n                if (!hasVisiblePoints) {\n                    label.hide();\n                }\n                else if (label.visibility === 'hidden') {\n                    label.show();\n                }\n            }\n        }\n        /**\n         * @private\n         */\n        function getLabelsAndShapesOptions(baseOptions, newOptions) {\n            const mergedOptions = {};\n            ['labels', 'shapes'].forEach((name) => {\n                const someBaseOptions = baseOptions[name];\n                if (someBaseOptions) {\n                    if (newOptions[name]) {\n                        mergedOptions[name] = splat(newOptions[name]).map(function (basicOptions, i) {\n                            return merge(someBaseOptions[i], basicOptions);\n                        });\n                    }\n                    else {\n                        mergedOptions[name] = baseOptions[name];\n                    }\n                }\n            });\n            return mergedOptions;\n        }\n        /* *\n         *\n         *  Class\n         *\n         * */\n        /**\n         * An annotation class which serves as a container for items like labels or\n         * shapes. Created items are positioned on the chart either by linking them to\n         * existing points or created mock points\n         *\n         * @class\n         * @name Highcharts.Annotation\n         *\n         * @param {Highcharts.Chart} chart\n         *        A chart instance\n         * @param {Highcharts.AnnotationsOptions} userOptions\n         *        The annotation options\n         */\n        class Annotation extends EventEmitter {\n            /* *\n             *\n             *  Static Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            static compose(ChartClass, PointerClass, SVGRendererClass) {\n                AnnotationChart.compose(Annotation, ChartClass, PointerClass);\n                ControllableLabel.compose(SVGRendererClass);\n                ControllablePath.compose(ChartClass, SVGRendererClass);\n                NavigationBindings.compose(Annotation, ChartClass);\n                PopupComposition.compose(NavigationBindings, PointerClass);\n            }\n            /* *\n             *\n             *  Constructors\n             *\n             * */\n            constructor(chart, userOptions) {\n                super();\n                this.coll = 'annotations';\n                this.animationConfig = void 0;\n                this.graphic = void 0;\n                this.group = void 0;\n                this.labelCollector = void 0;\n                this.labelsGroup = void 0;\n                this.shapesGroup = void 0;\n                /**\n                 * The chart that the annotation belongs to.\n                 *\n                 * @name Highcharts.Annotation#chart\n                 * @type {Highcharts.Chart}\n                 */\n                this.chart = chart;\n                /**\n                 * The array of points which defines the annotation.\n                 * @private\n                 * @name Highcharts.Annotation#points\n                 * @type {Array<Highcharts.Point>}\n                 */\n                this.points = [];\n                /**\n                 * The array of control points.\n                 * @private\n                 * @name Highcharts.Annotation#controlPoints\n                 * @type {Array<Annotation.ControlPoint>}\n                 */\n                this.controlPoints = [];\n                this.coll = 'annotations';\n                this.index = -1;\n                /**\n                 * The array of labels which belong to the annotation.\n                 * @private\n                 * @name Highcharts.Annotation#labels\n                 * @type {Array<Highcharts.AnnotationLabelType>}\n                 */\n                this.labels = [];\n                /**\n                 * The array of shapes which belong to the annotation.\n                 * @private\n                 * @name Highcharts.Annotation#shapes\n                 * @type {Array<Highcharts.AnnotationShapeType>}\n                 */\n                this.shapes = [];\n                /**\n                 * The options for the annotations.\n                 *\n                 * @name Highcharts.Annotation#options\n                 * @type {Highcharts.AnnotationsOptions}\n                 */\n                this.options = merge(this.defaultOptions, userOptions);\n                /**\n                 * The user options for the annotations.\n                 *\n                 * @name Highcharts.Annotation#userOptions\n                 * @type {Highcharts.AnnotationsOptions}\n                 */\n                this.userOptions = userOptions;\n                // Handle labels and shapes - those are arrays\n                // Merging does not work with arrays (stores reference)\n                const labelsAndShapes = getLabelsAndShapesOptions(this.options, userOptions);\n                this.options.labels = labelsAndShapes.labels;\n                this.options.shapes = labelsAndShapes.shapes;\n                /**\n                 * The callback that reports to the overlapping-labels module which\n                 * labels it should account for.\n                 * @private\n                 * @name Highcharts.Annotation#labelCollector\n                 * @type {Function}\n                 */\n                /**\n                 * The group svg element.\n                 *\n                 * @name Highcharts.Annotation#group\n                 * @type {Highcharts.SVGElement}\n                 */\n                /**\n                 * The group svg element of the annotation's shapes.\n                 *\n                 * @name Highcharts.Annotation#shapesGroup\n                 * @type {Highcharts.SVGElement}\n                 */\n                /**\n                 * The group svg element of the annotation's labels.\n                 *\n                 * @name Highcharts.Annotation#labelsGroup\n                 * @type {Highcharts.SVGElement}\n                 */\n                this.init(chart, this.options);\n            }\n            /* *\n             *\n             *  Functions\n             *\n             * */\n            /**\n             * @private\n             */\n            addClipPaths() {\n                this.setClipAxes();\n                if (this.clipXAxis &&\n                    this.clipYAxis &&\n                    this.options.crop // #15399\n                ) {\n                    this.clipRect = this.chart.renderer.clipRect(this.getClipBox());\n                }\n            }\n            /**\n             * @private\n             */\n            addLabels() {\n                const labelsOptions = (this.options.labels || []);\n                labelsOptions.forEach((labelOptions, i) => {\n                    const label = this.initLabel(labelOptions, i);\n                    merge(true, labelsOptions[i], label.options);\n                });\n            }\n            /**\n             * @private\n             */\n            addShapes() {\n                const shapes = this.options.shapes || [];\n                shapes.forEach((shapeOptions, i) => {\n                    const shape = this.initShape(shapeOptions, i);\n                    merge(true, shapes[i], shape.options);\n                });\n            }\n            /**\n             * Destroy the annotation. This function does not touch the chart\n             * that the annotation belongs to (all annotations are kept in\n             * the chart.annotations array) - it is recommended to use\n             * {@link Highcharts.Chart#removeAnnotation} instead.\n             * @private\n             */\n            destroy() {\n                const chart = this.chart, destroyItem = function (item) {\n                    item.destroy();\n                };\n                this.labels.forEach(destroyItem);\n                this.shapes.forEach(destroyItem);\n                this.clipXAxis = null;\n                this.clipYAxis = null;\n                erase(chart.labelCollectors, this.labelCollector);\n                super.destroy();\n                this.destroyControlTarget();\n                destroyObjectProperties(this, chart);\n            }\n            /**\n             * Destroy a single item.\n             * @private\n             */\n            destroyItem(item) {\n                // erase from shapes or labels array\n                erase(this[item.itemType + 's'], item);\n                item.destroy();\n            }\n            /**\n             * @private\n             */\n            getClipBox() {\n                if (this.clipXAxis && this.clipYAxis) {\n                    return {\n                        x: this.clipXAxis.left,\n                        y: this.clipYAxis.top,\n                        width: this.clipXAxis.width,\n                        height: this.clipYAxis.height\n                    };\n                }\n            }\n            /**\n             * Initialize the annotation properties.\n             * @private\n             */\n            initProperties(chart, userOptions) {\n                this.setOptions(userOptions);\n                const labelsAndShapes = getLabelsAndShapesOptions(this.options, userOptions);\n                this.options.labels = labelsAndShapes.labels;\n                this.options.shapes = labelsAndShapes.shapes;\n                this.chart = chart;\n                this.points = [];\n                this.controlPoints = [];\n                this.coll = 'annotations';\n                this.userOptions = userOptions;\n                this.labels = [];\n                this.shapes = [];\n            }\n            /**\n             * Initialize the annotation.\n             * @private\n             */\n            init(_annotationOrChart, _userOptions, index = this.index) {\n                const chart = this.chart, animOptions = this.options.animation;\n                this.index = index;\n                this.linkPoints();\n                this.addControlPoints();\n                this.addShapes();\n                this.addLabels();\n                this.setLabelCollector();\n                this.animationConfig = getDeferredAnimation(chart, animOptions);\n            }\n            /**\n             * Initialisation of a single label\n             * @private\n             */\n            initLabel(labelOptions, index) {\n                const options = merge(this.options.labelOptions, {\n                    controlPointOptions: this.options.controlPointOptions\n                }, labelOptions), label = new ControllableLabel(this, options, index);\n                label.itemType = 'label';\n                this.labels.push(label);\n                return label;\n            }\n            /**\n             * Initialisation of a single shape\n             * @private\n             * @param {Object} shapeOptions\n             * a confg object for a single shape\n             * @param {number} index\n             * annotation may have many shapes, this is the shape's index saved in\n             * shapes.index.\n             */\n            initShape(shapeOptions, index) {\n                const options = merge(this.options.shapeOptions, {\n                    controlPointOptions: this.options.controlPointOptions\n                }, shapeOptions), shape = new (Annotation.shapesMap[options.type])(this, options, index);\n                shape.itemType = 'shape';\n                this.shapes.push(shape);\n                return shape;\n            }\n            /**\n             * @private\n             */\n            redraw(animation) {\n                this.linkPoints();\n                if (!this.graphic) {\n                    this.render();\n                }\n                if (this.clipRect) {\n                    this.clipRect.animate(this.getClipBox());\n                }\n                this.redrawItems(this.shapes, animation);\n                this.redrawItems(this.labels, animation);\n                this.redrawControlPoints(animation);\n            }\n            /**\n             * Redraw a single item.\n             * @private\n             */\n            redrawItem(item, animation) {\n                item.linkPoints();\n                if (!item.shouldBeDrawn()) {\n                    this.destroyItem(item);\n                }\n                else {\n                    if (!item.graphic) {\n                        this.renderItem(item);\n                    }\n                    item.redraw(pick(animation, true) && item.graphic.placed);\n                    if (item.points.length) {\n                        adjustVisibility(item);\n                    }\n                }\n            }\n            /**\n             * @private\n             */\n            redrawItems(items, animation) {\n                let i = items.length;\n                // needs a backward loop\n                // labels/shapes array might be modified\n                // due to destruction of the item\n                while (i--) {\n                    this.redrawItem(items[i], animation);\n                }\n            }\n            /**\n             * See {@link Highcharts.Chart#removeAnnotation}.\n             * @private\n             */\n            remove() {\n                // Let chart.update() remove annoations on demand\n                return this.chart.removeAnnotation(this);\n            }\n            /**\n             * @private\n             */\n            render() {\n                const renderer = this.chart.renderer;\n                this.graphic = renderer\n                    .g('annotation')\n                    .attr({\n                    opacity: 0,\n                    zIndex: this.options.zIndex,\n                    visibility: this.options.visible ?\n                        'inherit' :\n                        'hidden'\n                })\n                    .add();\n                this.shapesGroup = renderer\n                    .g('annotation-shapes')\n                    .add(this.graphic);\n                if (this.options.crop) { // #15399\n                    this.shapesGroup.clip(this.chart.plotBoxClip);\n                }\n                this.labelsGroup = renderer\n                    .g('annotation-labels')\n                    .attr({\n                    // hideOverlappingLabels requires translation\n                    translateX: 0,\n                    translateY: 0\n                })\n                    .add(this.graphic);\n                this.addClipPaths();\n                if (this.clipRect) {\n                    this.graphic.clip(this.clipRect);\n                }\n                // Render shapes and labels before adding events (#13070).\n                this.renderItems(this.shapes);\n                this.renderItems(this.labels);\n                this.addEvents();\n                this.renderControlPoints();\n            }\n            /**\n             * @private\n             */\n            renderItem(item) {\n                item.render(item.itemType === 'label' ?\n                    this.labelsGroup :\n                    this.shapesGroup);\n            }\n            /**\n             * @private\n             */\n            renderItems(items) {\n                let i = items.length;\n                while (i--) {\n                    this.renderItem(items[i]);\n                }\n            }\n            /**\n             * @private\n             */\n            setClipAxes() {\n                const xAxes = this.chart.xAxis, yAxes = this.chart.yAxis, linkedAxes = (this.options.labels || [])\n                    .concat(this.options.shapes || [])\n                    .reduce((axes, labelOrShape) => {\n                    const point = labelOrShape &&\n                        (labelOrShape.point ||\n                            (labelOrShape.points && labelOrShape.points[0]));\n                    return [\n                        xAxes[point && point.xAxis] || axes[0],\n                        yAxes[point && point.yAxis] || axes[1]\n                    ];\n                }, []);\n                this.clipXAxis = linkedAxes[0];\n                this.clipYAxis = linkedAxes[1];\n            }\n            /**\n             * @private\n             */\n            setControlPointsVisibility(visible) {\n                const setItemControlPointsVisibility = function (item) {\n                    item.setControlPointsVisibility(visible);\n                };\n                this.controlPoints.forEach((controlPoint) => {\n                    controlPoint.setVisibility(visible);\n                });\n                this.shapes.forEach(setItemControlPointsVisibility);\n                this.labels.forEach(setItemControlPointsVisibility);\n            }\n            /**\n             * @private\n             */\n            setLabelCollector() {\n                const annotation = this;\n                annotation.labelCollector = function () {\n                    return annotation.labels.reduce(function (labels, label) {\n                        if (!label.options.allowOverlap) {\n                            labels.push(label.graphic);\n                        }\n                        return labels;\n                    }, []);\n                };\n                annotation.chart.labelCollectors.push(annotation.labelCollector);\n            }\n            /**\n             * Set an annotation options.\n             * @private\n             * @param {Highcharts.AnnotationsOptions} userOptions\n             *        User options for an annotation\n             */\n            setOptions(userOptions) {\n                this.options = merge(this.defaultOptions, userOptions);\n            }\n            /**\n             * Set the annotation's visibility.\n             * @private\n             * @param {boolean} [visible]\n             * Whether to show or hide an annotation. If the param is omitted, the\n             * annotation's visibility is toggled.\n             */\n            setVisibility(visible) {\n                const options = this.options, navigation = this.chart.navigationBindings, visibility = pick(visible, !options.visible);\n                this.graphic.attr('visibility', visibility ? 'inherit' : 'hidden');\n                if (!visibility) {\n                    const setItemControlPointsVisibility = function (item) {\n                        item.setControlPointsVisibility(visibility);\n                    };\n                    this.shapes.forEach(setItemControlPointsVisibility);\n                    this.labels.forEach(setItemControlPointsVisibility);\n                    if (navigation.activeAnnotation === this &&\n                        navigation.popup &&\n                        navigation.popup.type === 'annotation-toolbar') {\n                        fireEvent(navigation, 'closePopup');\n                    }\n                }\n                options.visible = visibility;\n            }\n            /**\n             * Updates an annotation.\n             *\n             * @function Highcharts.Annotation#update\n             *\n             * @param {Partial<Highcharts.AnnotationsOptions>} userOptions\n             *        New user options for the annotation.\n             *\n             */\n            update(userOptions, redraw) {\n                const chart = this.chart, labelsAndShapes = getLabelsAndShapesOptions(this.userOptions, userOptions), userOptionsIndex = chart.annotations.indexOf(this), options = merge(true, this.userOptions, userOptions);\n                options.labels = labelsAndShapes.labels;\n                options.shapes = labelsAndShapes.shapes;\n                this.destroy();\n                this.initProperties(chart, options);\n                this.init(chart, options);\n                // Update options in chart options, used in exporting (#9767):\n                chart.options.annotations[userOptionsIndex] = options;\n                this.isUpdating = true;\n                if (pick(redraw, true)) {\n                    chart.redraw();\n                }\n                fireEvent(this, 'afterUpdate');\n                this.isUpdating = false;\n            }\n        }\n        /* *\n         *\n         *  Static Properties\n         *\n         * */\n        /**\n         * @private\n         */\n        Annotation.ControlPoint = ControlPoint;\n        /**\n         * @private\n         */\n        Annotation.MockPoint = MockPoint;\n        /**\n         * An object uses for mapping between a shape type and a constructor.\n         * To add a new shape type extend this object with type name as a key\n         * and a constructor as its value.\n         */\n        Annotation.shapesMap = {\n            'rect': ControllableRect,\n            'circle': ControllableCircle,\n            'ellipse': ControllableEllipse,\n            'path': ControllablePath,\n            'image': ControllableImage\n        };\n        /**\n         * @private\n         */\n        Annotation.types = {};\n        Annotation.prototype.defaultOptions = AnnotationDefaults;\n        /**\n         * List of events for `annotation.options.events` that should not be\n         * added to `annotation.graphic` but to the `annotation`.\n         *\n         * @private\n         * @type {Array<string>}\n         */\n        Annotation.prototype.nonDOMEvents = ['add', 'afterUpdate', 'drag', 'remove'];\n        ControlTarget.compose(Annotation);\n        /* *\n         *\n         *  Default Export\n         *\n         * */\n        /* *\n         *\n         *  API Declarations\n         *\n         * */\n        /**\n         * Possible directions for draggable annotations. An empty string (`''`)\n         * makes the annotation undraggable.\n         *\n         * @typedef {''|'x'|'xy'|'y'} Highcharts.AnnotationDraggableValue\n         * @requires modules/annotations\n         */\n        /**\n         * @private\n         * @typedef {\n         *          Highcharts.AnnotationControllableCircle|\n         *          Highcharts.AnnotationControllableImage|\n         *          Highcharts.AnnotationControllablePath|\n         *          Highcharts.AnnotationControllableRect\n         *     } Highcharts.AnnotationShapeType\n         * @requires modules/annotations\n         */\n        /**\n         * @private\n         * @typedef {\n         *          Highcharts.AnnotationControllableLabel\n         *     } Highcharts.AnnotationLabelType\n         * @requires modules/annotations\n         */\n        /**\n         * A point-like object, a mock point or a point used in series.\n         * @private\n         * @typedef {\n         *          Highcharts.AnnotationMockPoint|\n         *          Highcharts.Point\n         *     } Highcharts.AnnotationPointType\n         * @requires modules/annotations\n         */\n        /**\n         * Shape point as string, object or function.\n         *\n         * @typedef {\n         *          string|\n         *          Highcharts.AnnotationMockPointOptionsObject|\n         *          Highcharts.AnnotationMockPointFunction\n         *     } Highcharts.AnnotationShapePointOptions\n         */\n        (''); // keeps doclets above in JS file\n\n        return Annotation;\n    });\n    _registerModule(_modules, 'masters/modules/annotations.src.js', [_modules['Core/Globals.js'], _modules['Extensions/Annotations/Annotation.js']], function (Highcharts, Annotation) {\n\n        const G = Highcharts;\n        G.Annotation = Annotation;\n        Annotation.compose(G.Chart, G.Pointer, G.SVGRenderer);\n\n    });\n}));"],"names":["factory","module","exports","define","amd","Highcharts","undefined","_modules","_registerModule","obj","path","args","fn","hasOwnProperty","apply","CustomEvent","window","dispatchEvent","detail","U","AnnotationChart","addEvent","erase","find","fireEvent","pick","wrap","composedMembers","chartAddAnnotation","userOptions","redraw","annotation","initAnnotation","options","annotations","push","graphic","attr","opacity","chartCallback","chart","plotBoxClip","renderer","clipRect","plotBox","controlPointsGroup","g","zIndex","clip","add","forEach","annotationOptions","i","some","drawAnnotations","destroy","event","csvColumnHeaderFormatter","exporting","csv","columnHeaderFormatter","multiLevelHeaders","dataRows","xValues","annotationHeader","lang","exportData","startRowLength","length","annotationSeparator","itemDelimiter","joinAnnotations","join","labelOptions","includeInDataExport","labels","label","text","annotationText","points","annotationX","x","xAxisIndex","series","xAxis","index","wasAdded","n","newRow","Array","row","maxRowLen","Math","max","newRows","header","s","columnTitle","topLevelColumnTitle","chartDrawAnnotations","animate","animationConfig","chartRemoveAnnotation","idOrAnnotation","coll","id","onChartAfterInit","wrapPointerOnContainerMouseDown","proceed","hasDraggedAnnotation","prototype","slice","call","arguments","compose","AnnotationClass","ChartClass","PointerClass","pushUnique","chartProto","addAnnotation","callbacks","collectionsWithInit","collectionsWithUpdate","removeAnnotation","Constructor","types","type","pointerProto","defined","visible","animation","crop","draggable","align","allowOverlap","backgroundColor","borderColor","borderRadius","borderWidth","className","formatter","y","overflow","padding","shadow","shape","style","fontSize","fontWeight","color","useHTML","verticalAlign","shapeOptions","stroke","strokeWidth","fill","r","snap","controlPointOptions","events","cursor","height","symbol","width","H","doc","isTouchDevice","objectEach","removeEvent","addEvents","emitter","addMouseDownEvent","element","e","onMouseDown","passive","eventHandler","cancelClick","pointer","normalize","target","nonDOMEvents","indexOf","on","onDrag","styledMode","cssPointer","xy","css","isUpdating","removeDocEvents","hcEvents","mouseMoveToRadians","cx","cy","prevDy","prevChartY","prevDx","prevChartX","dy","chartY","dx","chartX","temp","inverted","atan2","mouseMoveToScale","sx","sy","mouseMoveToTranslation","isInsidePlot","plotLeft","plotTop","visiblePlotOnly","translation","translate","shapes","preventDefault","button","firesTouchEvents","sourceCapabilities","removeDrag","hasDragged","removeMouseUp","onMouseUp","_e","annotationsOptions","EventEmitter","merge","constructor","positioner","render","setVisibility","update","SeriesRegistry","seriesProto","MockPoint","fromPoint","point","yAxis","pointToPixels","paneCoordinates","plotX","plotY","mock","plotWidth","plotHeight","getPlotBox","translateX","translateY","pointToOptions","applyOptions","getOptions","command","setAxis","refresh","getLabelConfig","hasDynamicOptions","len","toPixels","isInside","refreshOptions","toValue","rotate","radians","cos","sin","tx","ty","scale","xOrY","axisName","axisOptions","get","toAnchor","anchor","_cx","_cy","ControlPoint","ControlTarget","addControlPoints","controlPoints","controlPointsOptions","box","tooltip","getAnchor","relativePosition","absolutePosition","destroyControlTarget","controlPoint","getPointsOptions","splat","linkPoints","pointsOptions","pointOptions","isObject","isString","pointConfig","redrawControlPoints","renderControlPoints","transform","transformation","p1","p2","_point","transformPoint","translatePoint","ControlTargetClass","Controllable","itemType","collection","init","_args","attrsFromOptions","key","mappedKey","map","attrsMap","attrs","tracker","_parentGroup","setControlPointsVisibility","shouldBeDrawn","translateShape","translateSecondPoint","annotationIndex","chartOptions","newOptions","parentGroup","newControllable","defaultMarkers","arrow","tagName","attributes","refY","refX","markerWidth","markerHeight","children","d","ControllableDefaults","extend","uniqueKey","markerEndSetter","createMarkerSetter","markerStartSetter","TRACKER_FILL","svg","markerType","value","onChartAfterGetContainer","defs","svgRendererAddMarker","markerOptions","child","ast","orient","marker","definition","ControllablePath","SVGRendererClass","svgRendererProto","addMarker","toD","dOption","showPath","position","pointIndex","crispLine","parent","addClass","setMarkers","action","placed","item","itemOptions","markerId","def","predefinedMarker","getAttribute","dashStyle","ControllableRect","rect","Boolean","ControllableCircle","circle","setRadius","ControllableEllipse","createElement","getDistanceFromLine","point1","point2","x0","y0","abs","sqrt","getAttrs","position2","x1","y1","x2","y2","angle","atan","PI","ry","getRY","rx","getYAxis","yAxisIndex","getAbsolutePosition","rotation","rotationOriginX","rotationOriginY","setYRadius","F","format","isNumber","symbolConnector","w","h","anchorX","anchorY","yOffset","lateral","ControllableLabel","alignedPosition","alignOptions","vAlign","alignFactor","vAlignFactor","round","symbols","connector","justifiedOptions","alignAttr","off","bBox","getBBox","chartAnnotations","getContrast","shapesWithoutBackground","labelrank","String","anchorAbsolutePosition","anchorRelativePosition","itemPosition","alignTo","itemPosRelativeX","itemPosRelativeY","showItem","distance","getPosition","getPlayingField","negative","ttBelow","ControllableImage","image","src","ChartNavigationComposition","navigation","Additions","updates","addUpdate","updateFn","annotationsFieldsTypes","name","title","getAssignedAxis","coords","filter","coord","extremes","axis","getExtremes","axisMin","min","axisMax","minPointOffset","isInternal","getFieldType","predefinedType","fieldType","NBU","popup","simpleShapes","lines","ellipse","rectangle","typeOptions","backgroundColors","bindingsClassName","bindings","circleAnnotation","start","getCoordinates","coordsX","coordsY","langKey","steps","mockPointOpts","pow","ellipseAnnotation","newR","newRY","rectangleAnnotation","labelAnnotation","defer","D","NavigationBindingDefaults","setOptions","win","isArray","isFunction","onAnnotationRemove","navigationBindings","deselectAnnotation","onChartDestroy","onChartLoad","NavigationBindings","initEvents","initUpdate","onChartRender","disabledClassName","buttonsEnabled","container","boundClassNames","buttonNode","querySelectorAll","cls","noDataState","classList","remove","onNavigationBindingsClosePopup","onNavigationBindingsDeselectButton","selectedButtonElement","selectableAnnotation","annotationType","touchStartX","touchStartY","originalClick","defaultOptions","click","selectAndShowPopup","eventArguments","prevAnnotation","activeAnnotation","formType","annotationToFields","onSubmit","data","actionType","config","fieldsToOptions","fields","crosshairY","enabled","crosshairX","touchstart","touches","clientX","clientY","touchend","hasMoved","changedTouches","selectedButton","eventsToUnbind","getElementsByClassName","bindingsContainer","subContainer","getButtonEvents","contains","bindingsButtonClick","callback","eventName","bindingsChartClick","bindingsContainerMouseMove","clickEvent","svgContainer","boxWrapper","shouldEventBeFired","nextEvent","currentUserDetails","mouseMoveEvent","stockTools","toggleButtonActiveClass","removeClass","parentNode","closestPolyfill","el","ElementProto","Element","elementMatches","matches","msMatchesSelector","webkitMatchesSelector","ret","closest","parentElement","nodeType","setTimeout","stepIndex","end","_container","moveEvent","field","parsedValue","parseFloat","split","pathLength","match","nextName","editables","annotationsEditable","nestedEditables","nestedOptions","nonEditables","annotationsNonEditable","visualOptions","traverse","option","parentEditables","parentKey","nextParent","arrayOption","nestedOption","nestedKey","toString","typeOption","typeKey","getClickedClassNames","classNames","elemClassName","concat","removeEvents","unbinder","background","innerBackground","outerBackground","line","verticalLine","measure","fibonacci","tunnel","pitchfork","crookedLine","basicAnnotation","AST","parentDiv","iconsURL","createPopupContainer","closeButton","addCloseButton","closeButtonEvents","bind","document","code","closePopup","showPopup","toolbarClass","popupDiv","popupCloseButton","innerHTML","emptyHTML","removeAttribute","appendChild","display","isFirefox","stableSort","addFormFields","storage","isRoot","parentFullName","titleName","addInput","a","reverse","genInput","createTextNode","splice","addForm","isInit","lhsCol","bottomRow","addButton","saveButton","addToolbar","showForm","top","removeButton","editButton","NU","DropdownProperties","seriesTypes","dropdownParameters","addColsContainer","rhsCol","seriesType","rhsColWrapper","params","getNameType","indicatorFullName","listAllSeries","linkedParent","volumeSeriesID","addParamInputs","addIndicatorList","listType","isEdit","plotOptions","filteredSeriesArray","filterSeriesArray","filterSeries","b","seriesAName","toLowerCase","seriesBName","indicatorList","seriesSet","indicatorType","setAttribute","childNodes","setElementHTML","noFilterMatch","fieldName","selectBox","addSelection","addSelectionOptions","addSearchBox","clearFilterText","clearFilter","inputWrapper","handleInputChange","inputText","input","htmlFor","labelClassName","textContent","optionName","optionParamList","labelText","selectName","parameterName","selectedOption","currentSeries","seriesOptions","seriesName","parameterOption","filteredSeries","indicators","indicatorAliases","validFilter","replace","regex","RegExp","alias","is","nameBase","toUpperCase","_options","buttonParentDiv","tabs","tabsContainers","getAmount","counter","serie","addContentItem","addMenuItem","tabName","disableTab","menuItem","deselectAll","tabsContent","selectTab","tab","allTabs","switchTabs","indicatorsCount","firstTab","BaseForm","PopupAnnotations","PopupIndicators","PopupTabs","Popup","unbind","inputAttributes","inputName","fieldsDiv","getFields","inputList","selectList","linkedTo","volumeTo","fieldsOutput","param","seriesId","select","parameter","offsetHeight","onNavigationBindingsShowPopup","gui","wrapPointerOnContainerMouserDown","inClass","NagivationBindingsClass","A","AnnotationDefaults","PopupComposition","getDeferredAnimation","destroyObjectProperties","getLabelsAndShapesOptions","baseOptions","mergedOptions","someBaseOptions","basicOptions","Annotation","group","labelCollector","labelsGroup","shapesGroup","labelsAndShapes","addClipPaths","setClipAxes","clipXAxis","clipYAxis","getClipBox","addLabels","labelsOptions","initLabel","addShapes","initShape","destroyItem","labelCollectors","left","initProperties","_annotationOrChart","_userOptions","animOptions","setLabelCollector","shapesMap","redrawItems","redrawItem","renderItem","adjustVisibility","hasVisiblePoints","visibility","show","hide","items","renderItems","xAxes","yAxes","linkedAxes","reduce","axes","labelOrShape","setItemControlPointsVisibility","userOptionsIndex","G","Chart","Pointer","SVGRenderer"],"mappings":"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"}