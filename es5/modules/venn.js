/*
 Highcharts JS v11.1.0 (2023-06-05)

 (c) 2017-2021 Highsoft AS
 Authors: Jon Arild Nygard

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/modules/venn",["highcharts"],function(n){a(n);a.Highcharts=n;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function n(a,q,g,d){a.hasOwnProperty(q)||(a[q]=d.apply(null,g),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:q,module:a[q]}})))}a=a?a._modules:
{};n(a,"Core/Geometry/GeometryUtilities.js",[],function(){var a;(function(a){a.getCenterOfPoints=function(a){var d=a.reduce(function(a,d){a.x+=d.x;a.y+=d.y;return a},{x:0,y:0});return{x:d.x/a.length,y:d.y/a.length}};a.getDistanceBetweenPoints=function(a,d){return Math.sqrt(Math.pow(d.x-a.x,2)+Math.pow(d.y-a.y,2))};a.getAngleBetweenPoints=function(a,d){return Math.atan2(d.x-a.x,d.y-a.y)}})(a||(a={}));return a});n(a,"Core/Geometry/CircleUtilities.js",[a["Core/Geometry/GeometryUtilities.js"]],function(a){var q=
a.getAngleBetweenPoints,g=a.getCenterOfPoints,d=a.getDistanceBetweenPoints,f;(function(a){function m(a,h){h=Math.pow(10,h);return Math.round(a*h)/h}function f(a){if(0>=a)throw Error("radius of circle must be a positive number.");return Math.PI*a*a}function k(a,h){return a*a*Math.acos(1-h/a)-(a-h)*Math.sqrt(h*(2*a-h))}function r(a,h){var t=d(a,h),g=a.r,v=h.r,k=[];if(t<g+v&&t>Math.abs(g-v)){g*=g;var f=(g-v*v+t*t)/(2*t);v=Math.sqrt(g-f*f);g=a.x;k=h.x;a=a.y;var r=h.y;h=g+f*(k-g)/t;f=a+f*(r-a)/t;a=v/t*
-(r-a);t=v/t*-(k-g);k=[{x:m(h+a,14),y:m(f-t,14)},{x:m(h-a,14),y:m(f+t,14)}]}return k}function w(a){return a.reduce(function(a,d,g,f){f=f.slice(g+1).reduce(function(a,h,f,v){var k=[g,f+g+1];return a.concat(r(d,h).map(function(a){a.indexes=k;return a}))},[]);return a.concat(f)},[])}function n(a,h){return d(a,h)<=h.r+1e-10}function z(a,h){return!h.some(function(h){return!n(a,h)})}function C(a){return w(a).filter(function(h){return z(h,a)})}a.round=m;a.getAreaOfCircle=f;a.getCircularSegmentArea=k;a.getOverlapBetweenCircles=
function(a,h,g){var d=0;g<a+h&&(g<=Math.abs(h-a)?d=f(a<h?a:h):(d=(a*a-h*h+g*g)/(2*g),g-=d,d=k(a,a-d)+k(h,h-g)),d=m(d,14));return d};a.getCircleCircleIntersection=r;a.getCirclesIntersectionPoints=w;a.isCircle1CompletelyOverlappingCircle2=function(a,h){return d(a,h)+h.r<a.r+1e-10};a.isPointInsideCircle=n;a.isPointInsideAllCircles=z;a.isPointOutsideAllCircles=function(a,h){return!h.some(function(h){return n(a,h)})};a.getCirclesIntersectionPolygon=C;a.getAreaOfIntersectionBetweenCircles=function(a){var h=
C(a);if(1<h.length){var f=g(h);h=h.map(function(a){a.angle=q(f,a);return a}).sort(function(a,h){return h.angle-a.angle});var k=h[h.length-1];h=h.reduce(function(h,f){var k=h.startPoint,m=g([k,f]),r=f.indexes.filter(function(a){return-1<k.indexes.indexOf(a)}).reduce(function(p,b){b=a[b];var c=q(b,f),e=q(b,k);c=e-(e-c+(e<c?2*Math.PI:0))/2;c=d(m,{x:b.x+b.r*Math.sin(c),y:b.y+b.r*Math.cos(c)});b=b.r;c>2*b&&(c=2*b);if(!p||p.width>c)p={r:b,largeArc:c>b?1:0,width:c,x:f.x,y:f.y};return p},null);if(r){var y=
r.r;h.arcs.push(["A",y,y,0,r.largeArc,1,r.x,r.y]);h.startPoint=f}return h},{startPoint:k,arcs:[]}).arcs;if(0!==h.length&&1!==h.length){h.unshift(["M",k.x,k.y]);var m={center:f,d:h}}}return m}})(f||(f={}));return f});n(a,"Series/DrawPointUtilities.js",[a["Core/Utilities.js"]],function(a){var q=this&&this.__assign||function(){q=Object.assign||function(a){for(var d,g=1,r=arguments.length;g<r;g++){d=arguments[g];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(a[m]=d[m])}return a};return q.apply(this,
arguments)};return{draw:function(a,d){var f=d.animatableAttribs,g=d.onComplete,m=d.css,y=d.renderer,k=a.series&&a.series.chart.hasRendered?void 0:a.series&&a.series.options.animation,u=a.graphic;d.attribs=q(q({},d.attribs),{"class":a.getClassName()})||{};if(a.shouldDraw())u||(a.graphic=u="text"===d.shapeType?y.text():y[d.shapeType](d.shapeArgs||{}),u.add(d.group)),m&&u.css(m),u.attr(d.attribs).animate(f,d.isNew?!1:k,g);else if(u){var w=function(){a.graphic=u=u&&u.destroy();"function"===typeof g&&
g()};Object.keys(f).length?u.animate(f,void 0,function(){return w()}):w()}}}});n(a,"Series/Venn/VennPoint.js",[a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,q){var g=this&&this.__extends||function(){var a=function(d,g){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g])};return a(d,g)};return function(d,g){function f(){this.constructor=d}if("function"!==typeof g&&
null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");a(d,g);d.prototype=null===g?Object.create(g):(f.prototype=g.prototype,new f)}}(),d=q.isNumber;return function(a){function f(){var d=null!==a&&a.apply(this,arguments)||this;d.options=void 0;d.series=void 0;return d}g(f,a);f.prototype.isValid=function(){return d(this.value)};f.prototype.shouldDraw=function(){return!!this.shapeArgs};return f}(a.seriesTypes.scatter.prototype.pointClass)});n(a,"Series/Venn/VennUtils.js",
[a["Core/Geometry/CircleUtilities.js"],a["Core/Geometry/GeometryUtilities.js"],a["Core/Utilities.js"]],function(a,q,g){function d(a){var b={};a.filter(function(a){return 2===a.sets.length}).forEach(function(a){a.sets.forEach(function(c,l,p){var e;B(b[c])||(b[c]={totalOverlap:0,overlapping:{}});b[c]={totalOverlap:(b[c].totalOverlap||0)+a.value,overlapping:z(z({},b[c].overlapping||{}),(e={},e[p[1-l]]=a.value,e))}})});a.filter(k).forEach(function(a){E(a,b[a.sets[0]])});return a}function f(a,b,c,e,l){var p=
a(b),d=a(c);l=l||100;e=e||1e-10;var h=c-b,g=1;if(b>=c)throw Error("a must be smaller than b.");if(0<p*d)throw Error("f(a) and f(b) must have opposite signs.");if(0===p)var f=b;else if(0===d)f=c;else for(;g++<=l&&0!==k&&h>e;){h=(c-b)/2;f=b+h;var k=a(f);0<p*k?b=f:c=f}return f}function r(a){a=a.slice(0,-1);for(var b=a.length,c=[],e=function(a,b){a.sum+=b[a.i];return a},l=0;l<b;l++)c[l]=a.reduce(e,{sum:0,i:l}).sum/b;return c}function m(a,b,c){var e=a+b;return 0>=c?e:C(a<b?a:b)<=c?0:f(function(e){e=h(a,
b,e);return c-e},0,e)}function y(a){var b=0;2===a.length&&(b=a[0],a=a[1],b=h(b.r,a.r,A(b,a)));return b}function k(a){return x(a.sets)&&1===a.sets.length}function u(a){var b={};return B(a)&&G(a.value)&&-1<a.value&&x(a.sets)&&0<a.sets.length&&!a.sets.some(function(a){var e=!1;!b[a]&&I(a)?b[a]=!0:e=!0;return e})}function n(a,b){return b.reduce(function(b,e){var c=0;1<e.sets.length&&(c=e.value,e=y(e.sets.map(function(b){return a[b]})),e=c-e,c=Math.round(e*e*1E11)/1E11);return b+c},0)}function w(a,b){return"undefined"!==
typeof b.totalOverlap&&"undefined"!==typeof a.totalOverlap?b.totalOverlap-a.totalOverlap:NaN}var z=this&&this.__assign||function(){z=Object.assign||function(a){for(var b,c=1,e=arguments.length;c<e;c++){b=arguments[c];for(var l in b)Object.prototype.hasOwnProperty.call(b,l)&&(a[l]=b[l])}return a};return z.apply(this,arguments)},C=a.getAreaOfCircle,v=a.getCircleCircleIntersection,h=a.getOverlapBetweenCircles,t=a.isPointInsideAllCircles,F=a.isPointInsideCircle,D=a.isPointOutsideAllCircles,A=q.getDistanceBetweenPoints,
E=g.extend,x=g.isArray,G=g.isNumber,B=g.isObject,I=g.isString;return{geometry:q,geometryCircles:a,addOverlapToSets:d,getCentroid:r,getDistanceBetweenCirclesByOverlap:m,getLabelWidth:function(a,b,c){var e=b.reduce(function(a,b){return Math.min(b.r,a)},Infinity),l=c.filter(function(b){return!F(a,b)});c=function(c,e){return f(function(d){var h={x:a.x+e*d,y:a.y};h=t(h,b)&&D(h,l);return-(c-d)+(h?0:Number.MAX_VALUE)},0,c)};return 2*Math.min(c(e,-1),c(e,1))},getMarginFromCircles:function(a,b,c){b=b.reduce(function(b,
c){c=c.r-A(a,c);return c<=b?c:b},Number.MAX_VALUE);return b=c.reduce(function(b,c){c=A(a,c)-c.r;return c<=b?c:b},b)},isSet:k,layoutGreedyVenn:function(a){var b=[],c={};a.filter(function(a){return 1===a.sets.length}).forEach(function(a){c[a.sets[0]]=a.circle={x:Number.MAX_VALUE,y:Number.MAX_VALUE,r:Math.sqrt(a.value/Math.PI)}});var e=function(a,c){var e=a.circle;e&&(e.x=c.x,e.y=c.y);b.push(a)};d(a);var l=a.filter(k).sort(w);e(l.shift(),{x:0,y:0});var h=a.filter(function(a){return 2===a.sets.length});
l.forEach(function(a){var l=a.circle;if(l){var d=l.r,H=a.overlapping,g=b.reduce(function(a,e,g){var f=e.circle;if(!f||!H)return a;var p=m(d,f.r,H[e.sets[0]]),k=[{x:f.x+p,y:f.y},{x:f.x-p,y:f.y},{x:f.x,y:f.y+p},{x:f.x,y:f.y-p}];b.slice(g+1).forEach(function(a){var b=a.circle;b&&(a=m(d,b.r,H[a.sets[0]]),k=k.concat(v({x:f.x,y:f.y,r:p},{x:b.x,y:b.y,r:a})))});k.forEach(function(b){l.x=b.x;l.y=b.y;var e=n(c,h);e<a.loss&&(a.loss=e,a.coordinates=b)});return a},{loss:Number.MAX_VALUE,coordinates:void 0});e(a,
g.coordinates)}});return c},loss:n,nelderMead:function(a,b){var c=function(a,b){return a.fx-b.fx},e=function(a,b,c,e){return b.map(function(b,d){return a*b+c*e[d]})},l=function(b,c){c.fx=a(c);b[b.length-1]=c;return b},h=function(b){var c=b[0];return b.map(function(b){b=e(.5,c,.5,b);b.fx=a(b);return b})},d=function(b,c,d,l){b=e(d,b,l,c);b.fx=a(b);return b};b=function(b){var c=b.length,e=Array(c+1);e[0]=b;e[0].fx=a(b);for(var d=0;d<c;++d){var l=b.slice();l[d]=l[d]?1.05*l[d]:.001;l.fx=a(l);e[d+1]=l}return e}(b);
for(var g=0;100>g;g++){b.sort(c);var f=b[b.length-1],p=r(b),k=d(p,f,2,-1);if(k.fx<b[0].fx)f=d(p,f,3,-2),b=l(b,f.fx<k.fx?f:k);else if(k.fx>=b[b.length-2].fx){var m=void 0;k.fx>f.fx?(m=d(p,f,.5,.5),b=m.fx<f.fx?l(b,m):h(b)):(m=d(p,f,1.5,-.5),b=m.fx<k.fx?l(b,m):h(b))}else b=l(b,k)}return b[0]},processVennData:function(a,b){a=x(a)?a:[];var c=a.reduce(function(a,b){var c;if(c=b.sets)c=u(b)&&k(b)&&0<b.value;c&&-1===a.indexOf(b.sets[0])&&a.push(b.sets[0]);return a},[]).sort(),e=a.reduce(function(a,e){e.sets&&
u(e)&&!e.sets.some(function(a){return-1===c.indexOf(a)})&&(a[e.sets.sort().join(b)]={sets:e.sets,value:e.value||0});return a},{});c.reduce(function(a,c,e,d){d.slice(e+1).forEach(function(e){a.push(c+b+e)});return a},[]).forEach(function(a){if(!e[a]){var c={sets:a.split(b),value:0};e[a]=c}});return Object.keys(e).map(function(a){return e[a]})},sortByTotalOverlap:w}});n(a,"Series/Venn/VennSeries.js",[a["Core/Animation/AnimationUtilities.js"],a["Core/Color/Color.js"],a["Core/Geometry/CircleUtilities.js"],
a["Series/DrawPointUtilities.js"],a["Core/Geometry/GeometryUtilities.js"],a["Core/Series/SeriesRegistry.js"],a["Series/Venn/VennPoint.js"],a["Series/Venn/VennUtils.js"],a["Core/Utilities.js"]],function(a,q,g,d,f,r,m,n,k){var u=this&&this.__extends||function(){var a=function(d,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return a(d,b)};return function(d,b){function c(){this.constructor=
d}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}(),w=a.animObject,y=q.parse,z=g.getAreaOfIntersectionBetweenCircles,C=g.getCirclesIntersectionPolygon,v=g.isCircle1CompletelyOverlappingCircle2,h=g.isPointInsideAllCircles,t=g.isPointOutsideAllCircles,F=f.getCenterOfPoints,D=r.seriesTypes.scatter;a=k.addEvent;var A=k.extend,E=k.isArray,x=k.isNumber,
G=k.isObject,B=k.merge;k=function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b.data=void 0;b.mapOfIdToRelation=void 0;b.options=void 0;b.points=void 0;return b}u(f,a);f.getLabelPosition=function(a,c){var b=a.reduce(function(b,e){var d=e.r/2;return[{x:e.x,y:e.y},{x:e.x+d,y:e.y},{x:e.x-d,y:e.y},{x:e.x,y:e.y+d},{x:e.x,y:e.y-d}].reduce(function(b,e){var d=n.getMarginFromCircles(e,a,c);b.margin<d&&(b.point=e,b.margin=d);return b},b)},{point:void 0,margin:-Number.MAX_VALUE}).point;b=
n.nelderMead(function(b){return-n.getMarginFromCircles({x:b[0],y:b[1]},a,c)},[b.x,b.y]);b={x:b[0],y:b[1]};h(b,a)&&t(b,c)||(b=1<a.length?F(C(a)):{x:a[0].x,y:a[0].y});return b};f.getLabelValues=function(a,c){var b=a.sets,d=c.reduce(function(a,c){var e=-1<b.indexOf(c.sets[0]);c.circle&&a[e?"internal":"external"].push(c.circle);return a},{internal:[],external:[]});d.external=d.external.filter(function(a){return d.internal.some(function(b){return!v(a,b)})});a=f.getLabelPosition(d.internal,d.external);
c=n.getLabelWidth(a,d.internal,d.external);return{position:a,width:c}};f.layout=function(a){var b={},e={};if(0<a.length){var d=n.layoutGreedyVenn(a),h=a.filter(n.isSet);a.forEach(function(a){var c=a.sets,g=c.join();if(c=n.isSet(a)?d[g]:z(c.map(function(a){return d[a]})))b[g]=c,e[g]=f.getLabelValues(a,h)})}return{mapOfIdToShape:b,mapOfIdToLabelValues:e}};f.getScale=function(a,c,e){var b=e.bottom-e.top,d=e.right-e.left;b=Math.min(0<d?1/d*a:1,0<b?1/b*c:1);return{scale:b,centerX:a/2-(e.right+e.left)/
2*b,centerY:c/2-(e.top+e.bottom)/2*b}};f.updateFieldBoundaries=function(a,c){var b=c.x-c.r,d=c.x+c.r,f=c.y+c.r;c=c.y-c.r;if(!x(a.left)||a.left>b)a.left=b;if(!x(a.right)||a.right<d)a.right=d;if(!x(a.top)||a.top>c)a.top=c;if(!x(a.bottom)||a.bottom<f)a.bottom=f;return a};f.prototype.animate=function(a){if(!a){var b=w(this.options.animation);this.points.forEach(function(a){var c=a.shapeArgs;if(a.graphic&&c){var d={},e={};c.d?d.opacity=.001:(d.r=0,e.r=c.r);a.graphic.attr(d).animate(e,b);c.d&&setTimeout(function(){a&&
a.graphic&&a.graphic.animate({opacity:1})},b.duration)}},this)}};f.prototype.drawPoints=function(){var a=this,c=a.chart,e=a.group,f=c.renderer;(a.points||[]).forEach(function(b){var h={zIndex:E(b.sets)?b.sets.length:0},g=b.shapeArgs;c.styledMode||A(h,a.pointAttribs(b,b.state));d.draw(b,{isNew:!b.graphic,animatableAttribs:g,attribs:h,group:e,renderer:f,shapeType:g&&g.d?"path":"circle"})})};f.prototype.init=function(){D.prototype.init.apply(this,arguments);delete this.opacity};f.prototype.pointAttribs=
function(a,c){var b=this.options||{};a=B(b,{color:a&&a.color},a&&a.options||{},c&&b.states[c]||{});return{fill:y(a.color).brighten(a.brightness).get(),opacity:a.opacity,stroke:a.borderColor,"stroke-width":a.borderWidth,dashstyle:a.borderDashStyle}};f.prototype.translate=function(){var a=this.chart;this.processedXData=this.xData;this.generatePoints();var c=n.processVennData(this.options.data,f.splitter);c=f.layout(c);var d=c.mapOfIdToShape,h=c.mapOfIdToLabelValues;c=Object.keys(d).filter(function(a){return(a=
d[a])&&x(a.r)}).reduce(function(a,b){return f.updateFieldBoundaries(a,d[b])},{top:0,bottom:0,left:0,right:0});a=f.getScale(a.plotWidth,a.plotHeight,c);var g=a.scale,k=a.centerX,m=a.centerY;this.points.forEach(function(a){var b=E(a.sets)?a.sets:[],c=b.join(),e=d[c],f=h[c]||{};c=f.width;f=f.position;var l=a.options&&a.options.dataLabels;if(e){if(e.r)var n={x:k+e.x*g,y:m+e.y*g,r:e.r*g};else e.d&&(e=e.d,e.forEach(function(a){"M"===a[0]?(a[1]=k+a[1]*g,a[2]=m+a[2]*g):"A"===a[0]&&(a[1]*=g,a[2]*=g,a[6]=k+
a[6]*g,a[7]=m+a[7]*g)}),n={d:e});f?(f.x=k+f.x*g,f.y=m+f.y*g):f={};x(c)&&(c=Math.round(c*g))}a.shapeArgs=n;f&&n&&(a.plotX=f.x,a.plotY=f.y);c&&n&&(a.dlOptions=B(!0,{style:{width:c}},G(l,!0)?l:void 0));a.name=a.options.name||b.join("\u2229")})};f.splitter="highcharts-split";f.defaultOptions=B(D.defaultOptions,{borderColor:"#cccccc",borderDashStyle:"solid",borderWidth:1,brighten:0,clip:!1,colorByPoint:!0,dataLabels:{enabled:!0,verticalAlign:"middle",formatter:function(){return this.point.name}},inactiveOtherPoints:!0,
marker:!1,opacity:.75,showInLegend:!1,legendType:"point",states:{hover:{opacity:1,borderColor:"#333333"},select:{color:"#cccccc",borderColor:"#000000",animation:!1},inactive:{opacity:.075}},tooltip:{pointFormat:"{point.name}: {point.value}"},legendSymbol:"rectangle"});return f}(D);A(k.prototype,{axisTypes:[],directTouch:!0,isCartesian:!1,pointArrayMap:["value"],pointClass:m,utils:n});r.registerSeriesType("venn",k);"";a(k,"afterSetOptions",function(a){var d=a.options.states;this.is("venn")&&Object.keys(d).forEach(function(a){d[a].halo=
!1})});return k});n(a,"masters/modules/venn.src.js",[],function(){})});
//# sourceMappingURL=venn.js.map